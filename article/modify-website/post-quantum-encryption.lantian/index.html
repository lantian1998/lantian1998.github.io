<!DOCTYPE html><html lang="zh-CN" itemscope="" itemtype="https://schema.org/Article" data-astro-cid-porej7z2=""> <head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>未雨绸缪：使用后量子时代的加密算法 - Lan Tian @ Blog</title><script>
  ;(() => {
    try {
      const mode = localStorage.getItem('user-color-scheme')
      if (mode == 'dark' || mode == 'light') {
        document.documentElement.setAttribute('data-user-color-scheme', mode)
      }
    } catch {
      // Ignore errors
    }
  })()
</script><link rel="stylesheet" href="/assets/index.CUlf1-Vz.css"><style>#post-navi[data-astro-cid-gfbmwgei]{padding:5px;border-top:1px solid var(--lt-border-weak);border-bottom:1px solid var(--lt-border-weak)}
ol[data-astro-cid-nj3qel45]{margin:0;padding:0;line-height:1.5}ol[data-astro-cid-nj3qel45] .toc-item[data-astro-cid-nj3qel45]{list-style:none}ol[data-astro-cid-nj3qel45] .toc-child[data-astro-cid-nj3qel45],ol[data-astro-cid-nj3qel45] .toc[data-astro-cid-nj3qel45]{padding:0}ol[data-astro-cid-nj3qel45] .toc-link[data-astro-cid-nj3qel45]{display:block;margin-left:1em;padding:.25em 0}ol[data-astro-cid-nj3qel45] .toc-level-1[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-2[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-3[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-4[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-5[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-6[data-astro-cid-nj3qel45]:before{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:1em;padding:.25em 0;float:left;font-style:normal;font-variant:normal;font-weight:900;font-family:Font Awesome\ 6 Free;font-feature-settings:normal;text-align:center}ol[data-astro-cid-nj3qel45] .toc-level-1[data-astro-cid-nj3qel45]:before{content:""}ol[data-astro-cid-nj3qel45] .toc-level-2[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-3[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-4[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-5[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-6[data-astro-cid-nj3qel45]:before{content:""}.post-info-wrap[data-astro-cid-dckccua4]{-ms-flex:0 0 2.5em;flex:0 0 2.5em;background-color:var(--lt-component-bg-emphasis)}@media(min-width:768px){.post-info[data-astro-cid-dckccua4]{position:sticky;top:0}}@media(max-width:767.98px){.post-info[data-astro-cid-dckccua4]{position:absolute}}
</style><script type="module" src="/assets/PageLayout.astro_astro_type_script_index_0_lang.C1wfUPs6.js"></script><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Referrer-Policy" content="no-referrer, strict-origin-when-cross-origin"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="imagemode" content="force"><meta name="nightmode" content="disable"><meta name="wap-font-scale" content="no"><meta name="title" content="未雨绸缪：使用后量子时代的加密算法 - Lan Tian @ Blog"><meta name="keywords" content=""><meta name="author" content="Lan Tian"><link rel="canonical" href="https://lantian.pub/article/modify-website/post-quantum-encryption.lantian/"><link rel="alternate" type="application/rss+xml" title="Lan Tian @ Blog" href="https://lantian.pub/rss2.xml"><link rel="alternate" type="application/atom+xml" title="Lan Tian @ Blog" href="https://lantian.pub/feed.xml"><link rel="alternate" href="https://lantian.pub/article/modify-website/post-quantum-encryption.lantian/" hreflang="zh"><link rel="alternate" href="https://lantian.pub/en/article/modify-website/post-quantum-encryption.lantian/" hreflang="en"><meta name="copyright" content="Copyright 2012-2025 Lan Tian @ Blog"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="manifest" href="/manifest.webmanifest"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#03a9f4"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#212121"><meta name="application-name" content="Lan Tian @ Blog"><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="167x167" href="/apple-touch-icon-167x167.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><link rel="apple-touch-icon" sizes="1024x1024" href="/apple-touch-icon-1024x1024.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-precomposed.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#03a9f4"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="Lan Tian @ Blog"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-640x1136.png"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1136x640.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-750x1334.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1334x750.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1125x2436.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2436x1125.png"><link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1170x2532.png"><link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2532x1170.png"><link rel="apple-touch-startup-image" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1179x2556.png"><link rel="apple-touch-startup-image" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2556x1179.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-828x1792.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1792x828.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2688.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2688x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2208.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2208x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1284x2778.png"><link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2778x1284.png"><link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1290x2796.png"><link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2796x1290.png"><link rel="apple-touch-startup-image" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1488x2266.png"><link rel="apple-touch-startup-image" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2266x1488.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1536x2048.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2048x1536.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1620x2160.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1620.png"><link rel="apple-touch-startup-image" media="(device-width: 820px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1640x2160.png"><link rel="apple-touch-startup-image" media="(device-width: 820px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1640.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2388.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2388x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2224.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2224x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-2048x2732.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2732x2048.png"><meta name="msapplication-TileColor" content="#bbdefb"><meta name="msapplication-TileImage" content="/mstile-144x144.png"><meta name="msapplication-config" content="/browserconfig.xml"><link rel="yandex-tableau-widget" href="/yandex-browser-manifest.json"><meta property="og:url" content="https://lantian.pub/article/modify-website/post-quantum-encryption.lantian/"><meta property="og:type" content="website"><meta property="og:title" content="未雨绸缪：使用后量子时代的加密算法 - Lan Tian @ Blog"><meta property="og:image" content="https://lantian.pub/usr/uploads/202009/chromium-post-quantum.png"><meta content="现代互联网上，绝大多数网站都已经支持 HTTPS，其使用的 SSL/TLS 加密协议会将用户的请求数据与网站的响应进行加密，以防止信息被路径上的恶意用户窃取或篡改。而 SSL/TLS 协议中的一个重要组成部分是 RSA、ECDSA 等 非对称加密 算法，这些算法的密钥分为 公钥、私钥 两份，公钥可以公开，而私钥则要妥善保管。 在访问 HTTPS 网站时，会经过以下的流程： 网站会将它的 公钥 （以证书形式）发送给浏览器。 浏览器会校验公钥的有效性，防止中间人篡改公钥，从而拦截或监听通信。 浏览器（或操作系统）内置了一组可信任的证书颁发机构（CA）的公钥，通过密码学方法可以确认这份公钥是其中某个颁发机构生成的。 证书颁发机构则会通过一系列方法（多级证书链，物理隔绝的密钥保存设备）来保护他们自己的私钥安全，防止有人窃取他们的私钥来随意生成被信任的证书信息。 浏览器会与证书颁发机构的服务器联系，查询「证书吊销列表」（Certificate Revocation List）。..."><meta property="og:site_name" content="Lan Tian @ Blog"><meta property="og:locale" content="zh"><meta name="twitter:card" content="summary"><meta name="twitter:url" content="https://lantian.pub/article/modify-website/post-quantum-encryption.lantian/"><meta name="twitter:title" content="未雨绸缪：使用后量子时代的加密算法 - Lan Tian @ Blog"><meta property="twitter:image" content="https://lantian.pub/usr/uploads/202009/chromium-post-quantum.png"><meta content="现代互联网上，绝大多数网站都已经支持 HTTPS，其使用的 SSL/TLS 加密协议会将用户的请求数据与网站的响应进行加密，以防止信息被路径上的恶意用户窃取或篡改。而 SSL/TLS 协议中的一个重要组成部分是 RSA、ECDSA 等 非对称加密 算法，这些算法的密钥分为 公钥、私钥 两份，公钥可以公开，而私钥则要妥善保管。 在访问 HTTPS 网站时，会经过以下的流程： 网站会将它的 公钥 （以证书形式）发送给浏览器。 浏览器会校验公钥的有效性，防止中间人篡改公钥，从而拦截或监听通信。 浏览器（或操作系统）内置了一组可信任的证书颁发机构（CA）的公钥，通过密码学方法可以确认这份公钥是其中某个颁发机构生成的。 证书颁发机构则会通过一系列方法（多级证书链，物理隔绝的密钥保存设备）来保护他们自己的私钥安全，防止有人窃取他们的私钥来随意生成被信任的证书信息。 浏览器会与证书颁发机构的服务器联系，查询「证书吊销列表」（Certificate Revocation List）。..."><meta name="twitter:dnt" content="on"><meta itemprop="name" content="未雨绸缪：使用后量子时代的加密算法 - Lan Tian @ Blog"><meta property="image" content="https://lantian.pub/usr/uploads/202009/chromium-post-quantum.png"><meta content="现代互联网上，绝大多数网站都已经支持 HTTPS，其使用的 SSL/TLS 加密协议会将用户的请求数据与网站的响应进行加密，以防止信息被路径上的恶意用户窃取或篡改。而 SSL/TLS 协议中的一个重要组成部分是 RSA、ECDSA 等 非对称加密 算法，这些算法的密钥分为 公钥、私钥 两份，公钥可以公开，而私钥则要妥善保管。 在访问 HTTPS 网站时，会经过以下的流程： 网站会将它的 公钥 （以证书形式）发送给浏览器。 浏览器会校验公钥的有效性，防止中间人篡改公钥，从而拦截或监听通信。 浏览器（或操作系统）内置了一组可信任的证书颁发机构（CA）的公钥，通过密码学方法可以确认这份公钥是其中某个颁发机构生成的。 证书颁发机构则会通过一系列方法（多级证书链，物理隔绝的密钥保存设备）来保护他们自己的私钥安全，防止有人窃取他们的私钥来随意生成被信任的证书信息。 浏览器会与证书颁发机构的服务器联系，查询「证书吊销列表」（Certificate Revocation List）。..."><meta content="现代互联网上，绝大多数网站都已经支持 HTTPS，其使用的 SSL/TLS 加密协议会将用户的请求数据与网站的响应进行加密，以防止信息被路径上的恶意用户窃取或篡改。而 SSL/TLS 协议中的一个重要组成部分是 RSA、ECDSA 等 非对称加密 算法，这些算法的密钥分为 公钥、私钥 两份，公钥可以公开，而私钥则要妥善保管。 在访问 HTTPS 网站时，会经过以下的流程： 网站会将它的 公钥 （以证书形式）发送给浏览器。 浏览器会校验公钥的有效性，防止中间人篡改公钥，从而拦截或监听通信。 浏览器（或操作系统）内置了一组可信任的证书颁发机构（CA）的公钥，通过密码学方法可以确认这份公钥是其中某个颁发机构生成的。 证书颁发机构则会通过一系列方法（多级证书链，物理隔绝的密钥保存设备）来保护他们自己的私钥安全，防止有人窃取他们的私钥来随意生成被信任的证书信息。 浏览器会与证书颁发机构的服务器联系，查询「证书吊销列表」（Certificate Revocation List）。..."><link rel="me" href="https://mastodon.social/@lantian"></head> <body data-astro-cid-porej7z2=""> <div id="bg" data-astro-cid-j6vmxtef=""></div>   <div id="container" class="container" data-astro-cid-porej7z2=""> <nav class="lantian navbar navbar-expand-lg" data-astro-cid-wu5dj4rx=""> <div class="container-fluid" data-astro-cid-wu5dj4rx=""> <a class="navbar-brand" href="/" data-astro-cid-wu5dj4rx="">Lan Tian @ Blog</a> <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#lantian-navbar" aria-controls="lantian-navbar" aria-expanded="false" aria-label="Toggle navigation" data-astro-cid-wu5dj4rx=""> <span class="navbar-toggler-icon" data-astro-cid-wu5dj4rx=""></span> </button> <div class="collapse navbar-collapse" id="lantian-navbar" data-astro-cid-wu5dj4rx=""> <ul class="navbar-nav" data-astro-cid-wu5dj4rx=""> <li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/page/archive/index.html" data-astro-cid-wu5dj4rx=""> 文章们 </a> </li><li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/page/himawari/index.html" data-astro-cid-wu5dj4rx=""> 俯瞰地球 </a> </li><li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/page/dn42/index.html" data-astro-cid-wu5dj4rx=""> DN42 </a> </li> <li class="nav-item dropdown d-block d-lg-none" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="pages-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-file" data-astro-cid-wu5dj4rx=""></i> 页面  <span class="caret" data-astro-cid-wu5dj4rx=""></span> </a> <ul class="dropdown-menu" aria-labelledby="pages-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/page/archive/index.html" data-astro-cid-wu5dj4rx=""> 文章们 </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/page/himawari/index.html" data-astro-cid-wu5dj4rx=""> 俯瞰地球 </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/page/dn42/index.html" data-astro-cid-wu5dj4rx=""> DN42 </a> </li> </ul> </li> </ul> <ul class="navbar-nav ms-auto" data-astro-cid-wu5dj4rx=""> <li class="nav-item dropdown" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="languages-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-language" data-astro-cid-wu5dj4rx=""></i> Language <span class="caret" data-astro-cid-wu5dj4rx=""></span> </a> <ul class="dropdown-menu" aria-labelledby="languages-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item active" href="/article/modify-website/post-quantum-encryption.lantian/" data-astro-cid-wu5dj4rx=""> <span class="flag-icon flag-icon-cn" data-astro-cid-wu5dj4rx=""></span> Chinese Simplified / 简体中文 </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/en/article/modify-website/post-quantum-encryption.lantian/" data-astro-cid-wu5dj4rx=""> <span class="flag-icon flag-icon-us" data-astro-cid-wu5dj4rx=""></span> English </a> </li> <li data-astro-cid-wu5dj4rx=""><hr class="dropdown-divider" data-astro-cid-wu5dj4rx=""></li> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item disabled" href="#" data-astro-cid-wu5dj4rx="">Not all pages have translations.</a> </li> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item disabled" href="#" data-astro-cid-wu5dj4rx="">You may see 404 - this is normal.</a> </li> </ul> </li> <li class="nav-item dropdown" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="color-scheme-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-adjust" data-astro-cid-wu5dj4rx=""></i> 夜间模式 </a> <ul class="dropdown-menu" aria-labelledby="color-scheme-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-auto" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-adjust" data-astro-cid-wu5dj4rx=""></i> 自动 </a> </li> <li data-astro-cid-wu5dj4rx=""><hr class="dropdown-divider" data-astro-cid-wu5dj4rx=""></li> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-light" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-sun" data-astro-cid-wu5dj4rx=""></i> 浅色</a> </li> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-dark" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-moon" data-astro-cid-wu5dj4rx=""></i> 深色</a> </li> </ul> </li> </ul> </div> </div> </nav> <script type="module">const m="user-color-scheme",s="data-user-color-scheme",u=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},i=e=>{try{return localStorage.getItem(e)}catch{return null}},c=e=>{const t={dark:!0,light:!0,auto:!0},o=e===null||!Object.keys(t).includes(e)?"auto":e;u(m,o);for(const l in t){const n=document.getElementById("color-scheme-"+l);n&&(l==o?n.classList.add("active"):n.classList.remove("active"))}o!="auto"?document.documentElement.setAttribute(s,o):document.documentElement.removeAttribute(s)};c(i(m));const r=document.getElementById("color-scheme-auto");r&&r.addEventListener("click",()=>c("auto"));const a=document.getElementById("color-scheme-light");a&&a.addEventListener("click",()=>c("light"));const d=document.getElementById("color-scheme-dark");d&&d.addEventListener("click",()=>c("dark"));</script>  <div class="d-flex" data-astro-cid-porej7z2=""> <div id="content" data-astro-cid-porej7z2="">  <article> <div class="d-flex"> <div class="post-info-wrap" data-astro-cid-dckccua4=""> <div class="post-info" data-astro-cid-dckccua4=""> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-clock"></span> <br> <small>09-23</small> </p> <div class="post-meta-value"> 发布于<span class="badge badge-tag" data-astro-cid-dckccua4=""> 2020-09-23 01:11 </span>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-file-alt"></span> <br> <small>网站与服务端</small> </p> <div class="post-meta-value"> 分类 <a class="badge badge-tag" href="/category/modify-website" data-astro-cid-dckccua4=""> 网站与服务端 </a>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-tag"></span> <br> <small>2 标签</small> </p> <div class="post-meta-value"> 标签  <a class="badge badge-tag" href="/tag/后量子时代" data-astro-cid-dckccua4=""> 后量子时代 </a>  <a class="badge badge-tag" href="/tag/加密" data-astro-cid-dckccua4=""> 加密 </a>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-list"></span> <br> <small>目录</small> </p> <div class="post-meta-value">  <ol data-astro-cid-nj3qel45=""> <li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#nginx--openssl" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">nginx / OpenSSL</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#chromium--boringssl" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Chromium / BoringSSL</span> </a> </li> </ol>   </div> </div> </div> </div>  </div>  <div class="post-wrap"> <div class="post-image-wrap"> <picture> <source srcset="/usr/uploads/202009/chromium-post-quantum.png.thumb.png.webp" type="image/webp"> <source srcset="/usr/uploads/202009/chromium-post-quantum.png.thumb.png.avif" type="image/avif"> <source srcset="/usr/uploads/202009/chromium-post-quantum.png.thumb.png.jxl" type="image/jxl"> <img src="/usr/uploads/202009/chromium-post-quantum.png.thumb.png" alt="未雨绸缪：使用后量子时代的加密算法 的插图" width="200" height="150"> </picture> </div> <h1 class="post-title"> <a href="/article/modify-website/post-quantum-encryption.lantian/" rel="bookmark" title="未雨绸缪：使用后量子时代的加密算法">未雨绸缪：使用后量子时代的加密算法</a> </h1> <div class="post-text">   <p>现代互联网上，绝大多数网站都已经支持 HTTPS，其使用的 SSL/TLS 加密协议会将用户的请求数据与网站的响应进行加密，以防止信息被路径上的恶意用户窃取或篡改。而 SSL/TLS
协议中的一个重要组成部分是 RSA、ECDSA 等<strong>非对称加密</strong>算法，这些算法的密钥分为<strong>公钥、私钥</strong>两份，公钥可以公开，而私钥则要妥善保管。</p>
<p>在访问 HTTPS 网站时，会经过以下的流程：</p>
<ol>
<li>网站会将它的<strong>公钥</strong>（以证书形式）发送给浏览器。</li>
<li>浏览器会校验公钥的有效性，防止中间人篡改公钥，从而拦截或监听通信。
<ul>
<li>浏览器（或操作系统）内置了一组可信任的证书颁发机构（CA）的公钥，通过密码学方法可以确认这份公钥是其中某个颁发机构生成的。
<ul>
<li>证书颁发机构则会通过一系列方法（多级证书链，物理隔绝的密钥保存设备）来保护他们自己的私钥安全，防止有人窃取他们的私钥来随意生成被信任的证书信息。</li>
</ul>
</li>
<li>浏览器会与证书颁发机构的服务器联系，查询「证书吊销列表」（Certificate
Revocation List）。这个列表保存了所有的「虽然的确是证书颁发机构颁发，但是因为系统错误/私钥泄漏等原因不能再被信任」的证书。</li>
</ul>
</li>
<li>浏览器在确定公钥可信后，本地随机产生一个<strong>随机密钥</strong>，用来加密这一次的连接。</li>
<li>浏览器将随机密钥用网站的<strong>公钥</strong>加密，然后发送给网站服务器。
<ul>
<li>加密后的内容只能用网站的私钥解密，不能用公钥解密，因此监听者是无法获取随机密钥内容的。</li>
</ul>
</li>
<li>网站服务器用本地保存的<strong>私钥</strong>解密内容，获得浏览器产生的随机密钥。</li>
<li>浏览器和网站服务器开始用解密后的随机密钥进行<strong>对称加密</strong>，也就是双方使用同一份密码进行加密/解密的加密算法，例如 AES。
<ul>
<li>这里不再使用非对称加密是因为非对称加密对算力的消耗较大，而对称加密性能较高。</li>
</ul>
</li>
</ol>
<p>非对称加密算法保证了浏览器和网站交换对称加密密钥的安全，从而保证数据不被窃取或篡改。</p>
<p>但是随着量子计算机的诞生，事情发生了一点变化。在量子计算机上运行的<a href="https://zh.wikipedia.org/wiki/%E7%A7%80%E7%88%BE%E6%BC%94%E7%AE%97%E6%B3%95" rel="noopener noreferrer" target="_blank">秀尔算法</a>可以非常高效地破解 RSA、ECDSA 等基于质因数分解难度的传统非对称加密算法，只要有一台足够强大的量子计算机，也就是量子比特数目达标的计算机。</p>
<p>而随着量子计算的逐渐火热，量子计算机正在迅速地发展。目前公开的最强大的量子计算机是 IBM 的 53 量子比特计算机（见<a href="https://zh.wikipedia.org/wiki/%E9%87%8F%E5%AD%90%E9%9C%B8%E6%AC%8A" rel="noopener noreferrer" target="_blank">量子霸权</a>页面），仍然不够使用秀尔算法破解 RSA、ECDSA 等，但高速的科技发展随时可能将此变成现实。</p>
<p>因此，密码学家们着手开发无法被量子计算机有效破解的非对称加密算法，并推广它们的使用，以准备好迎接 RSA 被破解的那一天。</p>
<p>从 2016 年末开始，<a href="https://openquantumsafe.org/" rel="noopener noreferrer" target="_blank">Open Quantum Safe 项目</a>就开始将现有的、能抵抗量子计算机的加密算法整合到 liboqs 开发库里，并将它集成到
OpenSSL、BoringSSL 等广泛使用的加密库，以简化新加密算法的部署。</p>
<p>同时，官方还提供了 nginx、Chromium 等软件的编译、集成流程文档。因此，只需要参照文档进行简单的修改，我们就可以准备好迎接实用量子计算机的到来。</p>
<blockquote>
<p>注意：这里所有的后量子加密算法都相对较新，并且<a href="https://csrc.nist.gov/Projects/post-quantum-cryptography/round-3-submissions" rel="noopener noreferrer" target="_blank">正在进行 NIST 的标准化审核流程</a>，可能仍有未被发现的漏洞。虽然 Open Quantum Safe 项目有一些方法降低风险，但在这些算法的标准化流程完成之前，不建议将它们用于生产环境等重要用途。</p>
</blockquote>
<h2 id="nginx--openssl">nginx / OpenSSL</h2>
<p>由于 nginx 使用 OpenSSL 或 BoringSSL 作为自己的加密库，我们不需要对 nginx 做任何修改，只需要把 OpenSSL 替换成 Open Quantum Safe 项目的版本就可以。</p>
<p>Open Quantum Safe 提供了<a href="https://github.com/open-quantum-safe/oqs-demos/tree/master/chromium" rel="noopener noreferrer" target="_blank">一份修改后的 Dockerfile，可以用作参考</a>。</p>
<p>我参考以上内容也修改了自己编译 nginx 用的 Dockerfile，以使用 Open Quantum Safe
的
OpenSSL，<a href="https://github.com/xddxdd/dockerfiles/blob/1195fb20a1dfcbcad0fa3c494fe7440841c35963/dockerfiles/nginx/template.Dockerfile" rel="noopener noreferrer" target="_blank">在这里可以看到</a>。</p>
<p>相比编译普通的 nginx，主要的改动有两处：</p>
<ol>
<li>
<p>需要使用 Open Quantum Safe 的 OpenSSL，并额外下载、编译 liboqs，将其安装到
OpenSSL 的源码目录，以便调用。我的 Dockerfile 中与之相关的是 44-52 行：</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># 前略</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">&#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">git</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> clone</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -b</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> OQS-OpenSSL_1_1_1-stable</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> https://github.com/open-quantum-safe/openssl.git</span><span style="--shiki-dark:#D7BA7D;--shiki-light:#EE0000"> \</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000">   # 省略了一些我个人使用的 OpenSSL 修改，对后量子加密不是必要的</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">&#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">git</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> clone</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -b</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> master</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> https://github.com/open-quantum-safe/liboqs.git</span><span style="--shiki-dark:#D7BA7D;--shiki-light:#EE0000"> \</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">   &#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mkdir</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> /tmp/liboqs/build</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">cd</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> /tmp/liboqs/build</span><span style="--shiki-dark:#D7BA7D;--shiki-light:#EE0000"> \</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">   &#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">cmake</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -DOQS_BUILD_ONLY_LIB=1</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -DBUILD_SHARED_LIBS=OFF</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -DCMAKE_INSTALL_PREFIX=/tmp/openssl/oqs</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ..</span><span style="--shiki-dark:#D7BA7D;--shiki-light:#EE0000"> \</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">   &#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">make</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j4</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">make</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> install</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">cd</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> /tmp</span><span style="--shiki-dark:#D7BA7D;--shiki-light:#EE0000"> \</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># 后略</span></span></code></pre>
<p>其中所有文件都被下载到了 <code>/tmp</code> 目录下。关键点是用 cmake 编译 liboqs 项目，并将其安装到 OpenSSL 源码目录的 oqs 子目录下。</p>
</li>
<li>
<p>需要额外添加一些编译参数，以将 liboqs 包含在编译出来的 nginx 中，在
Dockerfile 的 102-104 行：</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># 前略</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">&#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">./configure</span><span style="--shiki-dark:#D7BA7D;--shiki-light:#EE0000"> \</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000">   # 略过一些 nginx 的编译参数</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">   --with-openssl</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">=</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">/tmp/openssl</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> \</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">   --with-cc-opt=</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">"-I/tmp/openssl/oqs/include"</span><span style="--shiki-dark:#D7BA7D;--shiki-light:#EE0000"> \</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">   --with-ld-opt=</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">"-L/tmp/openssl/oqs/lib"</span><span style="--shiki-dark:#D7BA7D;--shiki-light:#EE0000"> \</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">&#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">sed</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -i</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 's/libcrypto.a/libcrypto.a -loqs/g'</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> objs/Makefile</span><span style="--shiki-dark:#D7BA7D;--shiki-light:#EE0000"> \</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># 后略</span></span></code></pre>
</li>
</ol>
<p>然后正常编译 nginx 即可。</p>
<p>编译、安装 nginx 完成后，还需要修改参数使用这些后量子时代的非对称加密算法，包括<strong>密钥交换算法</strong>和<strong>身份验证算法</strong>两类：</p>
<ul>
<li>
<p>密钥交换算法：即浏览器和网站传输对称加密密钥时使用的非对称加密算法。</p>
<p>只需简单修改 <code>nginx.conf</code> 中的 <code>ssl_ecdh_curve</code> 参数，使用这些非对称加密算法的椭圆曲线，就可以使用这些密钥交换算法：</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ssl_ecdh_curve</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 'p256_frodo640aes:p256_bike1l1cpa:p256_kyber90s512:p256_ntru_hps2048509:p256_lightsaber:p256_sidhp434:p256_sikep434:prime256v1:secp384r1:secp521r1'</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span></code></pre>
<p>修改完成后 <code>nginx -s reload</code> 即可。</p>
<p>这里只开启了支持的密钥交换算法的一部分，原因有二：</p>
<ol>
<li>nginx 对这一参数的长度有限制，过长会报错；</li>
<li>选择的这些参数也都被 Open Quantum Safe 的 BoringSSL 支持，这在后续开启
Chromium 支持时至关重要。</li>
</ol>
<p>同时，这些密钥交换算法都以 <code>p256_</code> 开头，意味着后量子加密算法和传统加密算法同时使用。这是为了防止一种情况：新的加密算法存在数学漏洞，使得它们使用传统计算机（冯诺依曼计算机）就可以快速破解。同时使用两种交换算法，既保证了无法被量子计算机破解（如果新加密算法正常工作），也保证了一旦新加密算法被破解，密钥交换数据仍然拥有与传统算法同等级别的保护，不会被传统计算机立即破解。</p>
</li>
<li>
<p>身份验证算法：即证书颁发机构（CA）给网站颁发证书形式公私钥的算法。使用这些算法需要找支持后量子算法的 CA（现在还不存在）重新签发证书，或者自己签发证书（不被浏览器信任），都不实用，因此我选择现在不使用。</p>
</li>
</ul>
<p>在这里配置完后，你可以使用 Open Quantum Safe 的一个 curl Docker 镜像来测试一下你的网站：</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># 将最后一个参数替换成你要用的加密算法，格式和 ssl_ecdh_curve 相同</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">docker</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> run</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -it</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> openquantumsafe/curl:0.4.0</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> curl</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> https://lantian.pub</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> --curves</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> p256_frodo640aes</span></span></code></pre>
<h2 id="chromium--boringssl">Chromium / BoringSSL</h2>
<p>虽然有了命令行的 curl 验证，但是一个全功能的浏览器的支持能够让后量子加密实用化，给用户更佳的保护。Open Quantum Safe 同样提供了修改后的 BoringSSL，只需要将它编译到 Chromium 里，就可以在<a href="https://gs.statcounter.com/browser-market-share" rel="noopener noreferrer" target="_blank">目前世界上最流行的浏览器</a>中体验后量子加密算法了。</p>
<p>Open Quantum Safe 同样<a href="https://github.com/open-quantum-safe/oqs-demos/tree/master/chromium" rel="noopener noreferrer" target="_blank">提供了 Chromium 的编译教程，在这里可以找到</a>。与编译原版 Chromium 相比，主要不同的步骤有四处：</p>
<ol>
<li>
<p><code>git clone https://github.com/open-quantum-safe/boringssl</code>，用修改过的
BoringSSL 替换 Chromium 源代码中 <code>third_party/boringssl/src</code> 路径下的原版
BoringSSL；</p>
</li>
<li>
<p>下载 liboqs，编译安装到 BoringSSL 的 <code>oqs</code> 目录下：</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">git</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> clone</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> --branch</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> master</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> https://github.com/open-quantum-safe/liboqs.git</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">cd</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> liboqs</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mkdir</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> build</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">cd</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> build</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">cmake</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ..</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -G</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">"Ninja"</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -DCMAKE_INSTALL_PREFIX=</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">&#x3C;</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CHROMIUM_ROOT</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">></span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">/third_party/boringssl/src/oqs</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -DOQS_USE_OPENSSL=OFF</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ninja</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &#x26;&#x26; </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ninja</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> install</span></span></code></pre>
</li>
<li>
<p>给 Chromium 打上<a href="https://github.com/open-quantum-safe/oqs-demos/raw/master/chromium/oqs-mods.patch" rel="noopener noreferrer" target="_blank">这个调用 liboqs 的补丁</a>。</p>
</li>
<li>
<p>在 <code>third_party/boringssl</code> 文件夹下运行
<code>python2 src/util/generate_build_files.py gn</code> 以更新依赖，加入 liboqs 相关内容。</p>
</li>
</ol>
<p>之后按照正常步骤编译 Chromium 即可。</p>
<p>我也修改了一份 Chromium 的 PKGBUILD 文件，Arch Linux 用户可以直接使用。最新版的
PKGBUILD
<a href="https://github.com/xddxdd/pkgbuild/tree/master/chromium-vaapi-oqs" rel="noopener noreferrer" target="_blank">可以在此处找到</a>，我写文章时的版本<a href="https://github.com/xddxdd/pkgbuild/tree/241cfaad1d4e0c245efdfb345d9245ef57a07c82/chromium-vaapi-oqs" rel="noopener noreferrer" target="_blank">可以在此处找到（241cfaa）</a>。</p>
<blockquote>
<p>注意编译 Chromium 是个非常漫长的过程，我的 i7-7700HQ 花了 8 个小时。如果你的
CPU 更弱，请做好等上一整天的准备。</p>
</blockquote>
<p>编译、安装完成后，启动 Chromium 访问开启了后量子加密的网站，然后打开开发者工具的
Security（安全）面板：</p>
<p><picture><source srcset="/usr/uploads/202009/chromium-post-quantum.png.webp" type="image/webp"><source srcset="/usr/uploads/202009/chromium-post-quantum.png.avif" type="image/avif"><source srcset="/usr/uploads/202009/chromium-post-quantum.png.jxl" type="image/jxl"><img src="/usr/uploads/202009/chromium-post-quantum.png" alt="Chromium 显示使用后量子加密算法"></picture></p>
<p>上面已经显示使用了 <code>p256_frodo640aes</code> 算法，也就意味着你的网页浏览已经有了后量子时代的保护。</p>
<p>我的网站已经支持了后量子加密，可以作为测试。或者你也可以访问
<a href="https://test.openquantumsafe.org/" rel="noopener noreferrer" target="_blank">Open Quantum Safe 官方测试站</a>，上面提供了目前支持的所有密钥交换、身份验证算法组合，可以进行更全面的测试。</p>
<blockquote>
<p>额外要注意的是，Open Quantum Safe 的 BoringSSL 只支持一小部分的密钥交换算法：</p>
<p>P256_BIKE1L1CPA, P256_FRODO640AES, P256_KYBER90S512, P256_NTRU_HPS2048509,
P256_LIGHTSABER, P256_SIDHP434, P256_SIKEP434</p>
<p>这一列表只在<a href="https://test.openquantumsafe.org/" rel="noopener noreferrer" target="_blank">官方测试站</a>上提到。因此我先前选择了这些算法配置在 nginx 中。</p>
</blockquote>  </div>  <div class="clearfix" id="post-navi" data-astro-cid-gfbmwgei=""> <div class="float-end text-end" data-astro-cid-gfbmwgei=""> <a href="/article/modify-website/selfhost-dns-root-server.lantian/" title="自建 DNS 根服务器" data-astro-cid-gfbmwgei=""> 自建 DNS 根服务器 </a> <br data-astro-cid-gfbmwgei=""> 下一篇文章 »
</div> <div class="float-start text-start position-absolute" data-astro-cid-gfbmwgei="">
« 上一篇文章 <br data-astro-cid-gfbmwgei=""> <a href="/article/random-notes/youhua-pt926g-disable-tr069.lantian/" title="友华 PT926G 关闭 TR069" data-astro-cid-gfbmwgei=""> 友华 PT926G 关闭 TR069 </a> </div> </div>  <div id="waline" data-waline-language="zh-CN" data-waline-path="/article/modify-website/post-quantum-encryption.lantian"></div> <script type="module" src="/assets/WalineComment.astro_astro_type_script_index_0_lang.Dqib3X1E.js"></script>  </div> </div> </article>  </div> <aside class="d-none d-xl-block"> <section class="widget"> <h3>最新文章</h3> <ul class="list-unstyled"> <li> 07-20  <a href="/article/modify-computer/legal-lte-network-at-home-with-open5gs.lantian/">用 Open5GS 搭建合法的 LTE 网络</a> </li><li> 06-27  <a href="/article/modify-computer/sidestore-without-stosvpn-across-lan.lantian/">在内网中免 StosVPN 使用 SideStore</a> </li><li> 05-19  <a href="/article/modify-computer/nix-logarithmetic-math-library-from-zero.lantian/">从零开始实现 Nix 对数函数库</a> </li><li> 04-06  <a href="/article/modify-computer/legal-lte-network-at-home-for-100-bucks.lantian/">$100，DIY 搭建合法的 LTE 网络</a> </li><li> 02-10  <a href="/article/modify-computer/build-custom-android-kernel-with-nix.lantian/">用 Nix 编译自定义 Android 内核</a> </li><li> 04-20  <a href="/article/modify-website/migrate-blog-to-astro-js.lantian/">使用 Astro.js 重构我的博客</a> </li><li> 12-16  <a href="/article/modify-computer/nixos-low-ram-vps.lantian/">NixOS 系列（五）：制作小内存 VPS 的 DD 磁盘镜像</a> </li><li> 09-20  <a href="/article/modify-computer/nix-trigonometric-math-library-from-zero.lantian/">从零开始实现 Nix 三角函数库</a> </li><li> 05-29  <a href="/article/random-notes/pipewire-sigkill-fix.lantian/">解决 Pipewire 被 SIGKILL 的问题</a> </li><li> 05-12  <a href="/article/modify-website/how-to-kill-the-dn42-network.lantian/">如何引爆 DN42 网络（2023-05-12 更新）</a> </li><li> 05-08  <a href="/article/modify-computer/laptop-muxed-nvidia-passthrough.lantian/">Optimus MUXed 笔记本上的 NVIDIA 虚拟机显卡直通（2023-05 更新）</a> </li><li> 04-17  <a href="/article/random-notes/fix-china-telecom-roaming-no-4g-on-aosp-rom.lantian/">修改 APN 解决 AOSP ROM 上中国电信无法 4G 漫游问题</a> </li><li> 03-26  <a href="/article/random-notes/old-hp-workstation-as-all-in-one.lantian/">老款 HP 工作站配置 NAS+软路由笔记</a> </li><li> 01-14  <a href="/article/modify-computer/nixos-impermanence.lantian/">NixOS 系列（四）：“无状态”操作系统</a> </li><li> 06-21  <a href="/article/modify-computer/nixos-packaging.lantian/">NixOS 系列（三）：软件打包，从入门到放弃</a> </li> </ul> </section> <section class="widget"> <h3>最新评论</h3> <ul class="list-unstyled" id="recent-comments">  <li><a href="#">Loading...</a></li>  </ul> </section> <script type="module">const i=window.location.hostname=="localhost"?"https://comments.lantian.pub":window.location.origin;fetch(`${i}/api/comment?type=recent&count=10`).then(t=>{if(t.status!==200)throw new Error(`Server returned bad HTTP status ${t.status}`);return t.json()}).then(t=>{const e=document.getElementById("recent-comments");e&&(e.innerHTML=t.data.map(n=>{const o=n.comment.replace(/(<([^>]+)>)/gi,"");return"<li>"+n.nick+' <a href="'+n.url+'">'+o+"</a></li>"}).join(""))});</script> <section class="widget"> <h3>其它功能</h3> <ul class="list-unstyled">  <li> <i class="fas fa-fw fa-rss"></i>  <a href="/rss2.xml" target="_blank">RSS 订阅</a> |  <a href="/feed.xml" target="_blank">Atom</a> |  <a href="/feed.json" target="_blank">JSON</a> </li> <li> <i class="fas fa-fw fa-globe"></i>  <a href="https://stats.uptimerobot.com/BLK6VsRkR" target="_blank"> 服务器状态 </a> </li> <li> <i class="fas fa-fw fa-sitemap"></i>  <a href="https://lg.lantian.pub" target="_blank">DN42 节点状态</a> </li> <li> <i class="fas fa-fw fa-link"></i>  <a href="gopher://lantian.pub" target="_blank">使用 Gopher 协议访问</a> </li>  </ul> </section> <section class="widget"> <h3>友情链接</h3> <ul class="list-unstyled"> <li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://0x7f.cc"> 0x7f Blog 🐑 </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://alanyhq.com"> Alanyhq </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://blog.cas7.moe"> Blog of Moecast </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://jerryxiao.cc"> JerryXiao </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://snli.org"> Shucheng Li </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://sangsir.com"> SangSir | 艺术界的一朵奇葩 </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://yuetau.net"> YuetAu&#39;s Spot </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://blog.baoshuo.ren/?utm_source=friends"> 宝硕博客 </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="http://foreverblog.cn"> 十年之约 </a> </li> </ul> </section> </aside> </div> <footer class="lantian clearfix" data-astro-cid-w3csb3e3="">  <div id="copyright" class="float-end text-end" data-astro-cid-w3csb3e3=""> <i class="fas fa-copyright" data-astro-cid-w3csb3e3=""></i> 2012-2025 Lan Tian @ Blog<br data-astro-cid-w3csb3e3=""> <small data-astro-cid-w3csb3e3=""> 基于 Astro v5.15.1 构建 @ 2025-10-25 23:46:33 </small> </div> <script type="module">function v(c,o,r){const h=/^localhost$|^127(?:\.[0-9]+){0,2}\.[0-9]+$|^(?:0*:)*?:?0*1$/.test(location.hostname)||location.protocol==="file:";if(!o.trackLocalhost&&h)return console.warn("[Plausible] Ignoring event because website is running locally");try{if(window.localStorage.plausible_ignore==="true")return console.warn('[Plausible] Ignoring event because "plausible_ignore" is set to "true" in localStorage')}catch{}const p={n:c,u:o.url,d:o.domain,r:o.referrer,w:o.deviceWidth,h:o.hashMode?1:0,p:r&&r.props?JSON.stringify(r.props):void 0},s=new XMLHttpRequest;s.open("POST",`${o.apiHost}/api/event`,!0),s.setRequestHeader("Content-Type","text/plain"),s.send(JSON.stringify(p)),s.onreadystatechange=()=>{s.readyState===4&&r&&r.callback&&r.callback()}}function b(c){const o=()=>({hashMode:!1,trackLocalhost:!1,url:location.href,domain:location.hostname,referrer:document.referrer||null,deviceWidth:window.innerWidth,apiHost:"https://plausible.io",...c}),r=(t,n,i)=>{v(t,{...o(),...i},n)},h=(t,n)=>{r("pageview",n,t)};return{trackEvent:r,trackPageview:h,enableAutoPageviews:()=>{const t=()=>h(),n=history.pushState;return n&&(history.pushState=function(i,l,u){n.apply(this,[i,l,u]),t()},addEventListener("popstate",t)),c&&c.hashMode&&addEventListener("hashchange",t),h(),function(){n&&(history.pushState=n,removeEventListener("popstate",t)),c&&c.hashMode&&removeEventListener("hashchange",t)}},enableAutoOutboundTracking:(t=document,n={subtree:!0,childList:!0,attributes:!0,attributeFilter:["href"]})=>{function i(e){r("Outbound Link: Click",{props:{url:this.href}}),typeof process<"u"&&process,setTimeout(()=>{location.href=this.href},150),e.preventDefault()}const l=new Set;function u(e){e instanceof HTMLAnchorElement?e.host!==location.host&&(e.addEventListener("click",i),l.add(e)):"querySelectorAll"in e&&e.querySelectorAll("a").forEach(u)}function f(e){e instanceof HTMLAnchorElement?(e.removeEventListener("click",i),l.delete(e)):"querySelectorAll"in e&&e.querySelectorAll("a").forEach(f)}const d=new MutationObserver(e=>{e.forEach(a=>{a.type==="attributes"?(f(a.target),u(a.target)):a.type==="childList"&&(a.addedNodes.forEach(u),a.removedNodes.forEach(f))})});return t.querySelectorAll("a").forEach(u),d.observe(t,n),function(){l.forEach(a=>{a.removeEventListener("click",i)}),l.clear(),d.disconnect()}}}}const g=b({domain:"lantian.pub",trackLocalhost:!0,apiHost:""});g.trackPageview();</script> </footer>  </div>  </body> </html>