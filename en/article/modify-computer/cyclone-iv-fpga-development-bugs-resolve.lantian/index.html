<!DOCTYPE html><html lang="en-US" itemscope="" itemtype="https://schema.org/Article" data-astro-cid-porej7z2=""> <head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Cyclone IV FPGA Development Log - Lan Tian @ Blog</title><script>
  ;(() => {
    try {
      const mode = localStorage.getItem('user-color-scheme')
      if (mode == 'dark' || mode == 'light') {
        document.documentElement.setAttribute('data-user-color-scheme', mode)
      }
    } catch {
      // Ignore errors
    }
  })()
</script><link rel="stylesheet" href="/assets/index.CUlf1-Vz.css"><style>#post-navi[data-astro-cid-gfbmwgei]{padding:5px;border-top:1px solid var(--lt-border-weak);border-bottom:1px solid var(--lt-border-weak)}
ol[data-astro-cid-nj3qel45]{margin:0;padding:0;line-height:1.5}ol[data-astro-cid-nj3qel45] .toc-item[data-astro-cid-nj3qel45]{list-style:none}ol[data-astro-cid-nj3qel45] .toc-child[data-astro-cid-nj3qel45],ol[data-astro-cid-nj3qel45] .toc[data-astro-cid-nj3qel45]{padding:0}ol[data-astro-cid-nj3qel45] .toc-link[data-astro-cid-nj3qel45]{display:block;margin-left:1em;padding:.25em 0}ol[data-astro-cid-nj3qel45] .toc-level-1[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-2[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-3[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-4[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-5[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-6[data-astro-cid-nj3qel45]:before{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:1em;padding:.25em 0;float:left;font-style:normal;font-variant:normal;font-weight:900;font-family:Font Awesome\ 6 Free;font-feature-settings:normal;text-align:center}ol[data-astro-cid-nj3qel45] .toc-level-1[data-astro-cid-nj3qel45]:before{content:""}ol[data-astro-cid-nj3qel45] .toc-level-2[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-3[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-4[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-5[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-6[data-astro-cid-nj3qel45]:before{content:""}.post-info-wrap[data-astro-cid-dckccua4]{-ms-flex:0 0 2.5em;flex:0 0 2.5em;background-color:var(--lt-component-bg-emphasis)}@media(min-width:768px){.post-info[data-astro-cid-dckccua4]{position:sticky;top:0}}@media(max-width:767.98px){.post-info[data-astro-cid-dckccua4]{position:absolute}}
</style><script type="module" src="/assets/PageLayout.astro_astro_type_script_index_0_lang.C1wfUPs6.js"></script><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Referrer-Policy" content="no-referrer, strict-origin-when-cross-origin"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="imagemode" content="force"><meta name="nightmode" content="disable"><meta name="wap-font-scale" content="no"><meta name="title" content="Cyclone IV FPGA Development Log - Lan Tian @ Blog"><meta name="keywords" content=""><meta name="author" content="Lan Tian"><link rel="canonical" href="https://lantian.pub/en/article/modify-computer/cyclone-iv-fpga-development-bugs-resolve.lantian/"><link rel="alternate" type="application/rss+xml" title="Lan Tian @ Blog" href="https://lantian.pub/rss2.xml"><link rel="alternate" type="application/atom+xml" title="Lan Tian @ Blog" href="https://lantian.pub/feed.xml"><link rel="alternate" href="https://lantian.pub/article/modify-computer/cyclone-iv-fpga-development-bugs-resolve.lantian/" hreflang="zh"><link rel="alternate" href="https://lantian.pub/en/article/modify-computer/cyclone-iv-fpga-development-bugs-resolve.lantian/" hreflang="en"><meta name="copyright" content="Copyright 2012-2025 Lan Tian @ Blog"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="manifest" href="/manifest.webmanifest"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#03a9f4"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#212121"><meta name="application-name" content="Lan Tian @ Blog"><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="167x167" href="/apple-touch-icon-167x167.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><link rel="apple-touch-icon" sizes="1024x1024" href="/apple-touch-icon-1024x1024.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-precomposed.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#03a9f4"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="Lan Tian @ Blog"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-640x1136.png"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1136x640.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-750x1334.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1334x750.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1125x2436.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2436x1125.png"><link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1170x2532.png"><link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2532x1170.png"><link rel="apple-touch-startup-image" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1179x2556.png"><link rel="apple-touch-startup-image" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2556x1179.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-828x1792.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1792x828.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2688.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2688x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2208.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2208x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1284x2778.png"><link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2778x1284.png"><link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1290x2796.png"><link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2796x1290.png"><link rel="apple-touch-startup-image" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1488x2266.png"><link rel="apple-touch-startup-image" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2266x1488.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1536x2048.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2048x1536.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1620x2160.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1620.png"><link rel="apple-touch-startup-image" media="(device-width: 820px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1640x2160.png"><link rel="apple-touch-startup-image" media="(device-width: 820px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1640.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2388.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2388x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2224.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2224x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-2048x2732.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2732x2048.png"><meta name="msapplication-TileColor" content="#bbdefb"><meta name="msapplication-TileImage" content="/mstile-144x144.png"><meta name="msapplication-config" content="/browserconfig.xml"><link rel="yandex-tableau-widget" href="/yandex-browser-manifest.json"><meta property="og:url" content="https://lantian.pub/en/article/modify-computer/cyclone-iv-fpga-development-bugs-resolve.lantian/"><meta property="og:type" content="website"><meta property="og:title" content="Cyclone IV FPGA Development Log - Lan Tian @ Blog"><meta property="og:image" content="https://lantian.pub/apple-touch-icon.png"><meta content="Last semester, the school offered a digital systems course, which involves development on FPGAs. At the end of the course, we need to gather in groups and achieve some complicated functionality with the flexible architecture of FPGA, such as creating a game or running a convoluted neural network. We are free to add extra functionalities as we wish. Our group has done a game similar to Raiden, or controlling a fighter jet and attacking enemies with bullets. In addition to course requirements, we implemented these extra functionalities: A 640x480 VGA framebuffer with 16-bit color depth, stored on SRAM chip Naturally, Simplified Chinese fonts are included (full UTF-8 Chinese range, but without punctuation marks, since they are out of that range and we're kinda lazy)..."><meta property="og:site_name" content="Lan Tian @ Blog"><meta property="og:locale" content="en"><meta name="twitter:card" content="summary"><meta name="twitter:url" content="https://lantian.pub/en/article/modify-computer/cyclone-iv-fpga-development-bugs-resolve.lantian/"><meta name="twitter:title" content="Cyclone IV FPGA Development Log - Lan Tian @ Blog"><meta property="twitter:image" content="https://lantian.pub/apple-touch-icon.png"><meta content="Last semester, the school offered a digital systems course, which involves development on FPGAs. At the end of the course, we need to gather in groups and achieve some complicated functionality with the flexible architecture of FPGA, such as creating a game or running a convoluted neural network. We are free to add extra functionalities as we wish. Our group has done a game similar to Raiden, or controlling a fighter jet and attacking enemies with bullets. In addition to course requirements, we implemented these extra functionalities: A 640x480 VGA framebuffer with 16-bit color depth, stored on SRAM chip Naturally, Simplified Chinese fonts are included (full UTF-8 Chinese range, but without punctuation marks, since they are out of that range and we're kinda lazy)..."><meta name="twitter:dnt" content="on"><meta itemprop="name" content="Cyclone IV FPGA Development Log - Lan Tian @ Blog"><meta property="image" content="https://lantian.pub/apple-touch-icon.png"><meta content="Last semester, the school offered a digital systems course, which involves development on FPGAs. At the end of the course, we need to gather in groups and achieve some complicated functionality with the flexible architecture of FPGA, such as creating a game or running a convoluted neural network. We are free to add extra functionalities as we wish. Our group has done a game similar to Raiden, or controlling a fighter jet and attacking enemies with bullets. In addition to course requirements, we implemented these extra functionalities: A 640x480 VGA framebuffer with 16-bit color depth, stored on SRAM chip Naturally, Simplified Chinese fonts are included (full UTF-8 Chinese range, but without punctuation marks, since they are out of that range and we're kinda lazy)..."><meta content="Last semester, the school offered a digital systems course, which involves development on FPGAs. At the end of the course, we need to gather in groups and achieve some complicated functionality with the flexible architecture of FPGA, such as creating a game or running a convoluted neural network. We are free to add extra functionalities as we wish. Our group has done a game similar to Raiden, or controlling a fighter jet and attacking enemies with bullets. In addition to course requirements, we implemented these extra functionalities: A 640x480 VGA framebuffer with 16-bit color depth, stored on SRAM chip Naturally, Simplified Chinese fonts are included (full UTF-8 Chinese range, but without punctuation marks, since they are out of that range and we're kinda lazy)..."><link rel="me" href="https://mastodon.social/@lantian"></head> <body data-astro-cid-porej7z2=""> <div id="bg" data-astro-cid-j6vmxtef=""></div>   <div id="container" class="container" data-astro-cid-porej7z2=""> <nav class="lantian navbar navbar-expand-lg" data-astro-cid-wu5dj4rx=""> <div class="container-fluid" data-astro-cid-wu5dj4rx=""> <a class="navbar-brand" href="/en/" data-astro-cid-wu5dj4rx="">Lan Tian @ Blog</a> <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#lantian-navbar" aria-controls="lantian-navbar" aria-expanded="false" aria-label="Toggle navigation" data-astro-cid-wu5dj4rx=""> <span class="navbar-toggler-icon" data-astro-cid-wu5dj4rx=""></span> </button> <div class="collapse navbar-collapse" id="lantian-navbar" data-astro-cid-wu5dj4rx=""> <ul class="navbar-nav" data-astro-cid-wu5dj4rx=""> <li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/en/page/archive/index.html" data-astro-cid-wu5dj4rx=""> Posts </a> </li><li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/en/page/himawari/index.html" data-astro-cid-wu5dj4rx=""> Himawari </a> </li><li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/en/page/dn42/index.html" data-astro-cid-wu5dj4rx=""> DN42 </a> </li> <li class="nav-item dropdown d-block d-lg-none" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="pages-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-file" data-astro-cid-wu5dj4rx=""></i> Page  <span class="caret" data-astro-cid-wu5dj4rx=""></span> </a> <ul class="dropdown-menu" aria-labelledby="pages-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/en/page/archive/index.html" data-astro-cid-wu5dj4rx=""> Posts </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/en/page/himawari/index.html" data-astro-cid-wu5dj4rx=""> Himawari </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/en/page/dn42/index.html" data-astro-cid-wu5dj4rx=""> DN42 </a> </li> </ul> </li> </ul> <ul class="navbar-nav ms-auto" data-astro-cid-wu5dj4rx=""> <li class="nav-item dropdown" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="languages-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-language" data-astro-cid-wu5dj4rx=""></i> Language <span class="caret" data-astro-cid-wu5dj4rx=""></span> </a> <ul class="dropdown-menu" aria-labelledby="languages-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/article/modify-computer/cyclone-iv-fpga-development-bugs-resolve.lantian/" data-astro-cid-wu5dj4rx=""> <span class="flag-icon flag-icon-cn" data-astro-cid-wu5dj4rx=""></span> Chinese Simplified / 简体中文 </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item active" href="/en/article/modify-computer/cyclone-iv-fpga-development-bugs-resolve.lantian/" data-astro-cid-wu5dj4rx=""> <span class="flag-icon flag-icon-us" data-astro-cid-wu5dj4rx=""></span> English </a> </li> <li data-astro-cid-wu5dj4rx=""><hr class="dropdown-divider" data-astro-cid-wu5dj4rx=""></li> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item disabled" href="#" data-astro-cid-wu5dj4rx="">Not all pages have translations.</a> </li> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item disabled" href="#" data-astro-cid-wu5dj4rx="">You may see 404 - this is normal.</a> </li> </ul> </li> <li class="nav-item dropdown" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="color-scheme-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-adjust" data-astro-cid-wu5dj4rx=""></i> Night Mode </a> <ul class="dropdown-menu" aria-labelledby="color-scheme-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-auto" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-adjust" data-astro-cid-wu5dj4rx=""></i> Auto </a> </li> <li data-astro-cid-wu5dj4rx=""><hr class="dropdown-divider" data-astro-cid-wu5dj4rx=""></li> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-light" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-sun" data-astro-cid-wu5dj4rx=""></i> Light</a> </li> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-dark" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-moon" data-astro-cid-wu5dj4rx=""></i> Dark</a> </li> </ul> </li> </ul> </div> </div> </nav> <script type="module">const m="user-color-scheme",s="data-user-color-scheme",u=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},i=e=>{try{return localStorage.getItem(e)}catch{return null}},c=e=>{const t={dark:!0,light:!0,auto:!0},o=e===null||!Object.keys(t).includes(e)?"auto":e;u(m,o);for(const l in t){const n=document.getElementById("color-scheme-"+l);n&&(l==o?n.classList.add("active"):n.classList.remove("active"))}o!="auto"?document.documentElement.setAttribute(s,o):document.documentElement.removeAttribute(s)};c(i(m));const r=document.getElementById("color-scheme-auto");r&&r.addEventListener("click",()=>c("auto"));const a=document.getElementById("color-scheme-light");a&&a.addEventListener("click",()=>c("light"));const d=document.getElementById("color-scheme-dark");d&&d.addEventListener("click",()=>c("dark"));</script>  <div class="d-flex" data-astro-cid-porej7z2=""> <div id="content" data-astro-cid-porej7z2="">  <article> <div class="d-flex"> <div class="post-info-wrap" data-astro-cid-dckccua4=""> <div class="post-info" data-astro-cid-dckccua4=""> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-clock"></span> <br> <small>07-08</small> </p> <div class="post-meta-value"> Published on<span class="badge badge-tag" data-astro-cid-dckccua4=""> 2019-07-08 13:10 </span>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-file-alt"></span> <br> <small>Computers and Clients</small> </p> <div class="post-meta-value"> Category <a class="badge badge-tag" href="/en/category/modify-computer" data-astro-cid-dckccua4=""> Computers and Clients </a>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-tag"></span> <br> <small>2 tags</small> </p> <div class="post-meta-value"> Tags  <a class="badge badge-tag" href="/en/tag/FPGA" data-astro-cid-dckccua4=""> FPGA </a>  <a class="badge badge-tag" href="/en/tag/Development-Log" data-astro-cid-dckccua4=""> Development Log </a>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-list"></span> <br> <small>ToC</small> </p> <div class="post-meta-value">  <ol data-astro-cid-nj3qel45=""> <li class="toc-item toc-level-1" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#academic-integrity-alert--open-source" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Academic Integrity Alert &amp; Open Source</span> </a> </li><li class="toc-item toc-level-1" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#networking" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Networking</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#intel-triple-speed-ethernet-ip-wont-work" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Intel Triple Speed Ethernet IP Won&#39;t Work</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#lacking-mdio-support-with-open-source-module" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Lacking MDIO Support with Open Source Module</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#open-source-ip-receives-but-doesnt-send-tx-led-not-blinking" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Open Source IP Receives but Doesn&#39;t Send, TX LED Not Blinking</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#open-source-ip-receives-but-doesnt-send-tx-led-blinking" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Open Source IP Receives but Doesn&#39;t Send, TX LED Blinking</span> </a> </li><li class="toc-item toc-level-1" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#audio" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Audio</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#audio-chip-outputs-noise" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Audio Chip Outputs Noise</span> </a> </li><li class="toc-item toc-level-1" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#video" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Video</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#fps-less-than-1" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">FPS Less Than 1</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#fps-less-than-30" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">FPS Less Than 30</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#64-sprites-cause-logical-timeouts" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">64 Sprites Cause Logical Timeouts</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#storing-data-to-sdram" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Storing Data to SDRAM</span> </a> </li><li class="toc-item toc-level-1" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#keyboard" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Keyboard</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#avoid-resets-interference-of-debugging" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Avoid Reset&#39;s Interference of Debugging</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#avoid-resets-interference-of-muscle-health" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Avoid Reset&#39;s Interference of Muscle Health</span> </a> </li> </ol>   </div> </div> </div> </div>  </div>  <div class="post-wrap">  <h1 class="post-title"> <a href="/en/article/modify-computer/cyclone-iv-fpga-development-bugs-resolve.lantian/" rel="bookmark" title="Cyclone IV FPGA Development Log">Cyclone IV FPGA Development Log</a> </h1> <div class="post-text">   <p>Last semester, the school offered a digital systems course, which involves
development on FPGAs. At the end of the course, we need to gather in groups and
achieve some complicated functionality with the flexible architecture of FPGA,
such as creating a game or running a convoluted neural network. We are free to
add extra functionalities as we wish.</p>
<p>Our group has done a game similar to Raiden, or controlling a fighter jet and
attacking enemies with bullets. In addition to course requirements, we
implemented these extra functionalities:</p>
<ul>
<li>A 640x480 VGA framebuffer with 16-bit color depth, stored on SRAM chip
<ul>
<li>Naturally, Simplified Chinese fonts are included (full UTF-8 Chinese range,
but without punctuation marks, since they are out of that range and we're
kinda lazy)</li>
<li>Fast screen scrolling by adjusting Y offset (for flying effects)</li>
<li>SRAM controller and chip are working at 2x bus frequency, so both the CPU
and the VGA controller can access data simultaneously without competition or
lockups</li>
</ul>
</li>
<li>Up to 8 jets (friend + enemy), fully customizable image (no palette or
indexing involved), free movement across the screen</li>
<li>Up to 56 bullets (friend + enemy), customizable size and color, free movement
across the screen</li>
<li>Loop playback of background music (~5min) with WM8731 sound chip, 2 channels,
16-bit depth, 8000Hz sample rate
<ul>
<li>Used a module provided by course (written by former students) but had
pitfalls; will be discussed later</li>
</ul>
</li>
<li>Internet connection with Marvell 88E1111 chip and RJ45 connectors, for
uploading gameplay records and downloading rankings
<ul>
<li>Used open source code on GitHub for data transmission
(<a href="https://github.com/alexforencich/verilog-ethernet" rel="noopener noreferrer" target="_blank">https://github.com/alexforencich/verilog-ethernet</a>)</li>
<li>Custom MDIO communication code for modifying network chip registers</li>
<li>LwIP as TCP/IP protocol stack</li>
</ul>
</li>
<li>User input via USB keyboard, connected to onboard USB chip
<ul>
<li>Since the keyboards in our lab are unstable, we used a separate CPU for
controlling the keyboard so they can be reset and debugged separately. The
main CPU can also be reset less frequently</li>
</ul>
</li>
</ul>
<p>Here is the demonstration video (in Chinese):</p>
<video width="100%" controls="">
  <source src="/usr/uploads/2019/07/3087632729.mp4" type="video/mp4">
</video>
<p>We used the <code>DE2-115</code> development board with an FPGA chip of
<code>Cyclone IV EP4CE115F29C7</code>, and <code>Quartus Prime 18.1 Free Edition</code> as development
software.</p>
<p>Thie post is a record of problems I encountered and resolved when implementing
the extra features.</p>
<h1 id="academic-integrity-alert--open-source">Academic Integrity Alert &#x26; Open Source</h1>
<p><strong>WARNING:</strong> This post does not contain any materials covered in the course, and
is <strong>NOT HELPFUL</strong> to other projects except the final project. If you referenced
this post or our code, you <strong>MUST</strong> list it in your report, or you may be
punished for plagiarism.</p>
<p>We open-sourced the code at <a href="https://github.com/xddxdd/zjui-ece385-final" rel="noopener noreferrer" target="_blank">https://github.com/xddxdd/zjui-ece385-final</a>.</p>
<h1 id="networking">Networking</h1>
<p>We implemented networking on the development board to upload gameplay records
and generate score rankings. It is the extra feature we consider the most
important. This part involves pitfalls we had with the following components:</p>
<ul>
<li>Intel Triple Speed Ethernet IP (The 10/100/100M Adaptive Ethernet module that
comes with Quartus)</li>
<li>Ethernet IP by GitHub User <a href="https://github.com/alexforencich" rel="noopener noreferrer" target="_blank">Alex Forencich</a>
(<a href="https://github.com/alexforencich/verilog-ethernet" rel="noopener noreferrer" target="_blank">https://github.com/alexforencich/verilog-ethernet</a>)</li>
<li>LwIP Embedded TCP/IP Protocol Stack
(<a href="https://savannah.nongnu.org/projects/lwip/" rel="noopener noreferrer" target="_blank">https://savannah.nongnu.org/projects/lwip/</a>)</li>
</ul>
<h2 id="intel-triple-speed-ethernet-ip-wont-work">Intel Triple Speed Ethernet IP Won't Work</h2>
<p>DE2-115 development board comes with 2 Marvell 88E1111 network chips,
corresponding to the 2 RJ45 ethernet jacks. While interfacing with the chip, we
found that Quartus has provided an Ethernet IP with a rich list of options, and
went for it.</p>
<p>We had to admit that such official Intel IPs have comprehensive functionalities,
such as support for various interfaces such as GMII and RGMII, built-in FIFO
buffers, easy MDIO communication with Ethernet chip, and a lot of stuff we
didn't need. But when we added the IP and tried to use it, no data was sent from
the Ethernet chip, TX LED wasn't blinking, and despite that RX LED was blinking,
no data was received. It still wouldn't work even if we followed the official
Intel guide
<a href="ftp://ftp.intel.com/pub/fpgaup/pub/Intel_Material/17.0/Tutorials/DE2-115/Using_Triple_Speed_Ethernet.pdf">ftp://ftp.intel.com/pub/fpgaup/pub/Intel_Material/17.0/Tutorials/DE2-115/Using_Triple_Speed_Ethernet.pdf</a>
step by step.</p>
<p>After debugging for as long as 3 days, we found that this Ethernet IP by Intel
needs to be paid for. Since we apparently didn't do that, the IP worked in trial
mode, and would only work when <strong>the development board was connected to PC</strong> and
<strong>the Licensing window was open on Quartus Programming UI</strong>. In any other
circumstance, it would disable itself by not sending any data and not processing
any received data.</p>
<p>Out of rage and frustration, we decided to replace it with an open-source IP on
GitHub, the second one listed above. While the IP is open source and free, it
does have its pitfalls; read on.</p>
<h2 id="lacking-mdio-support-with-open-source-module">Lacking MDIO Support with Open Source Module</h2>
<p>Marvell 88E1111 Ethernet chip has an MDIO interface, providing read/write access
to 32 registers. They are used to set link speed (10/100/1000M), obtain
connection status (plugged in or not), etc. But we dug into the open-source IP
and found no trace of MDIO support.</p>
<p>Intel does provide an independent MDIO module free of charge, but it works with
a newer protocol version of Clause 45, and cannot communicate with the chip
normally, which speaks older Clause 22.</p>
<p>So we managed to create our own.
<a href="https://github.com/xddxdd/zjui-ece385-final/blob/master/comp/lantian_mdio/lantian_mdio.sv" rel="noopener noreferrer" target="_blank">https://github.com/xddxdd/zjui-ece385-final/blob/master/comp/lantian_mdio/lantian_mdio.sv</a></p>
<p>This module directly exposes MDIO registers on Avalon-MM memory bus, and allows
direct memory operations on them.</p>
<h2 id="open-source-ip-receives-but-doesnt-send-tx-led-not-blinking">Open Source IP Receives but Doesn't Send, TX LED Not Blinking</h2>
<p>Now we have received packets on the FPGA, which means we are close to success.
But we did a packet capture with Wireshark on the computer connected to the
other end and got nothing.</p>
<p>If the TX LED doesn't blink, it means that the data transferred from FPGA to
Ethernet chip is corrupted, and the Ethernet chip will not send anything it
doesn't recognize. Investigation shows that the <code>IFG Delay</code> parameter of the
Open Source IP is set incorrectly. This parameter controls the number of gap
cycles between two Ethernet frames over the cable, and is usually set to 12. We
had removed the parameter previously and ignored it...</p>
<h2 id="open-source-ip-receives-but-doesnt-send-tx-led-blinking">Open Source IP Receives but Doesn't Send, TX LED Blinking</h2>
<p>... And we're here, adding that parameter.</p>
<p>After a 3-hour reading of the code of the Open Source IP, we found that it
requires data from the same packet to be sent continuously, not accepting delay
in any of the cycles. The 1000Mb Ethernet module runs at 125 MHz and sends 8
bits of data to the Ethernet chip every time, but our CPU and DMA run at 50 MHz
and also send 8 bits each cycle. Therefore the Open Source IP needs to wait for
data, and when this happens, it simply tells the Ethernet chip that "data is
corrupted". Ethernet chip on the FPGA board proceeds to send the "corrupted"
signal, and the computer network card on the other end silently drops the packet
before the operating system is aware of anything.</p>
<p>The solution is also simple: the DMA module supports 32-bit width on the sender
side, so 32-bit width is used with DMA and input side of FIFO (output side
connected to Open Source IP is still 8 bits). We also increased the DMA FIFO
buffer size a bit out of stability considerations and simple convenience. This
time, the bandwidth of DMA is increased from 400 Mbps to 1600 Mbps, and the Open
Source IP no longer needs to wait for data.</p>
<h1 id="audio">Audio</h1>
<p>Since a WM8731 driver module written by former students is provided on the
course website, we thought adding audio was pretty easy.</p>
<p>We were wrong.</p>
<h2 id="audio-chip-outputs-noise">Audio Chip Outputs Noise</h2>
<p>In the operating systems course I took in the previous semester (previous to
this FPGA course), I added Sound Blaster 16 sound card support to our group's
operating system. At the beginning I designed the interface of the sound module
to be the same as SB16, providing a memory region where audio data is stored,
and triggering an interrupt whenever half of the data is read.</p>
<p>And the audio chip output only noise.</p>
<p>We thought that this interface was too complicated and did it again with DMA and
FIFO, similar to Ethernet.</p>
<p>Still only noise.</p>
<p>We began to read through the driver module, but the module is written in VHDL, a
totally different language from SystemVerilog taught in the course. The design
is also quite weird, as we traced an input signal and found that it ended up
unused!?</p>
<p>We finally discovered that a signal, which we expect to be an 8000 Hz pulse
signal (equal to sample rate) that indicates ready for the next sample point, is
not what we thought it to be.</p>
<p>We had to find our own 8000 Hz signal source, and we saw Intel's Interval Timer
IP.</p>
<p>For the sake of simplicity (and laziness), we added an 8000 Hz interrupt to the
main CPU and outputted the audio signal via PIO in the interrupt handler. Simple
but effective.</p>
<blockquote>
<p>Our finished game doesn't consume a lot of CPU cycles and can handle
interrupts at such high frequency.</p>
</blockquote>
<p>The CPU handled one interrupt and stopped.</p>
<p>We read through the datasheet of Interval Timer and found we need to write to a
register after each interrupt.</p>
<p>After one rich day of debugging, we finally heard beautiful music coming from
our board.</p>
<h1 id="video">Video</h1>
<p>The video part is the difficult part of the whole project. We began with a pure
frame buffer without sprites, yet our mere 50 MHz <strong>FREE</strong> CPU core, without
cache, pipelining, or instruction prediction, couldn't handle the workload of
refreshing each pixel. Here the problem came:</p>
<h2 id="fps-less-than-1">FPS Less Than 1</h2>
<p>Yes, that's how bad the performance went. Due to the limitation of SRAM (10 ns
per operation, or 100 MHz; bus at 50 MHz max since SRAM has double the frequency
with the multiplexer module), we cannot overclock it anymore.</p>
<p>We were not going to try the paid version of CPU IP, since we were scared of
what happened with our Ethernet module.</p>
<p>We thought compiler optimizations might do something and added <code>-O2</code>. FPS
instantly increased to around 7-8.</p>
<h2 id="fps-less-than-30">FPS Less Than 30</h2>
<p>But this is definitely not enough for a shooter game. The minimum acceptable FPS
is 30, and reaching 60 will be the best. Because of this, we had to build a
sprite system, where each object could be moved quickly by modifying its
coordinates. Thanks to this, we reached a framerate of 60, and the game could be
played normally.</p>
<p>In addition, we added a DMA controller to the architecture. The DMA controller
is a dedicated module for memory copy, and is much more efficient than the
<strong>FREE</strong> CPU.</p>
<p>But we're not done yet:</p>
<h2 id="64-sprites-cause-logical-timeouts">64 Sprites Cause Logical Timeouts</h2>
<p>Fighter jets and bullets have their transparency. When processing each pixel, a
long combinational logic processing each layer is required. This means that the
logic cannot properly finish in 40 ns (or 25 MHz, the pixel frequency of 640x480
VGA), and the VGA output may have artifacts.</p>
<p>We ended up with a tree-shaped design. Since the Cyclone IV FPGA has 4 input
LUTs, we designed such a structure:</p>
<ol>
<li>All 64 objects are split into 32 groups. Transparency is handled in each
group, and 32 outputs are generated;</li>
<li>Split 32 outputs into 16 groups and repeat;</li>
<li>Split 16 outputs into 8 groups and repeat;</li>
<li>Split 8 outputs into 4 groups and repeat;</li>
<li>Split 4 outputs into 2 groups and repeat;</li>
<li>Process the last 2 outputs and generate the final output.</li>
</ol>
<p>The combinational logic path is reduced from 64 comparisons to 6.</p>
<h2 id="storing-data-to-sdram">Storing Data to SDRAM</h2>
<p>Lastly, we need a way to store all the data, including fighter jets,
backgrounds, and audio data, to SDRAM.</p>
<p>In the course, we are suggested to use the <code>DE2-115 Control Panel</code>, which loads
a custom program to the FPGA and writes to SDRAM. But in a previous homework, we
found that the data on SDRAM may be randomly corrupted after switching back to
our own programs.</p>
<p>What we did was write to the SDRAM when we uploaded the program to the CPU.
Create a new ELF section in the <code>BSP Editor</code> in Eclipse, name it anything
starting with a dot, such as <code>.resources</code>, but not the same name as anything in
<code>Platform Designer</code>. Then, assign it to be stored in SDRAM.</p>
<p>Arrays can be created similar to this:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">unsigned</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> char</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080"> arr</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">[</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">1000000</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">] </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">__attribute__</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">((</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">section</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">".resources"</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">))) = { </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">0</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">, </span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">1</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">, ... };</span></span></code></pre>
<p>The array will be uploaded to and stored in SDRAM in this case. Since no extra
programming on the FPGA itself is required, there is no risk of data damage.</p>
<h1 id="keyboard">Keyboard</h1>
<p>Although this part is covered by course materials, the USB keyboard was
extremely unstable when we simply followed the guides. We often had to reset the
keyboard dozens of times so it could be recognized, but when it works, it works
stably until the next reset.</p>
<h2 id="avoid-resets-interference-of-debugging">Avoid Reset's Interference of Debugging</h2>
<p>The first thing we thought of was to split the reset functionality of the main
program and the USB keyboard part to debug them individually.</p>
<p>To be precise, we created an individual CPU that is solely used to communicate
with the keyboard. The keyboard CPU and the USB chip are reset with an
individual button, so it will not interfere with the main program. The two CPUs
communicate with a dual-port on-chip memory without locking mechanisms
(unnecessary since it's write-only on one end and read-only on the other end).</p>
<h2 id="avoid-resets-interference-of-muscle-health">Avoid Reset's Interference of Muscle Health</h2>
<p>We added a timeout to the USB CPU's program. The CPU will reset itself if it
cannot connect to the keyboard after a time period.</p>
<p>Actual testing shows that it is helpful, but not much. But since we were unable
to solve the USB keyboard issue (even the professor couldn't fix it), we had to
live with such a workaround.</p>  </div>  <div class="clearfix" id="post-navi" data-astro-cid-gfbmwgei=""> <div class="float-end text-end" data-astro-cid-gfbmwgei=""> <a href="/en/article/modify-website/dn42-docker-anycast-dns.lantian/" title="Running Anycast DNS with Docker in DN42" data-astro-cid-gfbmwgei=""> Running Anycast DNS with Docker in DN42 </a> <br data-astro-cid-gfbmwgei=""> Next post »
</div> <div class="float-start text-start position-absolute" data-astro-cid-gfbmwgei="">
« Previous post <br data-astro-cid-gfbmwgei=""> <a href="/en/article/modify-website/gpp-preprocess-dockerfile-include-if.lantian/" title="Using GPP to Preprocess Dockerfile for #include, #if, and Other Features" data-astro-cid-gfbmwgei=""> Using GPP to Preprocess Dockerfile for #include, #if, and Other Features </a> </div> </div>  <div id="waline" data-waline-language="en-US" data-waline-path="/en/article/modify-computer/cyclone-iv-fpga-development-bugs-resolve.lantian"></div> <script type="module" src="/assets/WalineComment.astro_astro_type_script_index_0_lang.Dqib3X1E.js"></script>  </div> </div> </article>  </div> <aside class="d-none d-xl-block"> <section class="widget"> <h3>Latest posts</h3> <ul class="list-unstyled"> <li> 07-20  <a href="/en/article/modify-computer/legal-lte-network-at-home-with-open5gs.lantian/">Legal LTE Network at Home with Open5GS</a> </li><li> 06-27  <a href="/en/article/modify-computer/sidestore-without-stosvpn-across-lan.lantian/">Using SideStore without StosVPN across your LAN</a> </li><li> 05-19  <a href="/en/article/modify-computer/nix-logarithmetic-math-library-from-zero.lantian/">Nix Logarithmic Math Library from Ground Zero</a> </li><li> 04-06  <a href="/en/article/modify-computer/legal-lte-network-at-home-for-100-bucks.lantian/">Legal LTE Network at Home for $100</a> </li><li> 02-10  <a href="/en/article/modify-computer/build-custom-android-kernel-with-nix.lantian/">Building Custom Android Kernel with Nix</a> </li><li> 04-20  <a href="/en/article/modify-website/migrate-blog-to-astro-js.lantian/">Migrating My Blog to Astro.js</a> </li><li> 12-16  <a href="/en/article/modify-computer/nixos-low-ram-vps.lantian/">NixOS Series 5: Creating Disk Image for Low RAM VPS</a> </li><li> 09-20  <a href="/en/article/modify-computer/nix-trigonometric-math-library-from-zero.lantian/">Nix Trigonometric Math Library from Ground Zero</a> </li><li> 05-29  <a href="/en/article/random-notes/pipewire-sigkill-fix.lantian/">Preventing Pipewire from being SIGKILLed</a> </li><li> 05-12  <a href="/en/article/modify-website/how-to-kill-the-dn42-network.lantian/">How to Kill the DN42 Network (Updated 2023-05-12)</a> </li><li> 05-08  <a href="/en/article/modify-computer/laptop-muxed-nvidia-passthrough.lantian/">NVIDIA GPU Passthrough on an Optimus MUXed Laptop (Updated 2023-05)</a> </li><li> 04-17  <a href="/en/article/random-notes/fix-china-telecom-roaming-no-4g-on-aosp-rom.lantian/">Fix China Telecom 4G Roaming on AOSP ROM by Changing APN</a> </li><li> 03-26  <a href="/en/article/random-notes/old-hp-workstation-as-all-in-one.lantian/">Notes on Setting Up NAS+Router on Old HP Workstation</a> </li><li> 01-14  <a href="/en/article/modify-computer/nixos-impermanence.lantian/">NixOS Series 4: &quot;Stateless&quot; Operating System</a> </li><li> 06-21  <a href="/en/article/modify-computer/nixos-packaging.lantian/">NixOS Series 3: Software Packaging 101</a> </li> </ul> </section> <section class="widget"> <h3>Latest comments</h3> <ul class="list-unstyled" id="recent-comments">  <li><a href="#">Loading...</a></li>  </ul> </section> <script type="module">const i=window.location.hostname=="localhost"?"https://comments.lantian.pub":window.location.origin;fetch(`${i}/api/comment?type=recent&count=10`).then(t=>{if(t.status!==200)throw new Error(`Server returned bad HTTP status ${t.status}`);return t.json()}).then(t=>{const e=document.getElementById("recent-comments");e&&(e.innerHTML=t.data.map(n=>{const o=n.comment.replace(/(<([^>]+)>)/gi,"");return"<li>"+n.nick+' <a href="'+n.url+'">'+o+"</a></li>"}).join(""))});</script> <section class="widget"> <h3>Others</h3> <ul class="list-unstyled">  <li> <i class="fas fa-fw fa-rss"></i>  <a href="/rss2.xml" target="_blank">RSS Feed</a> |  <a href="/feed.xml" target="_blank">Atom</a> |  <a href="/feed.json" target="_blank">JSON</a> </li> <li> <i class="fas fa-fw fa-globe"></i>  <a href="https://stats.uptimerobot.com/BLK6VsRkR" target="_blank"> Sever Status </a> </li> <li> <i class="fas fa-fw fa-sitemap"></i>  <a href="https://lg.lantian.pub" target="_blank">DN42 Looking Glass</a> </li> <li> <i class="fas fa-fw fa-link"></i>  <a href="gopher://lantian.pub" target="_blank">Access with Gopher protocol</a> </li>  </ul> </section> <section class="widget"> <h3>Links</h3> <ul class="list-unstyled"> <li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://0x7f.cc"> 0x7f Blog 🐑 </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="http://foreverblog.cn"> 10 Year&#39;s Promise (Forever Blog) </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://alanyhq.com"> Alanyhq </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://blog.baoshuo.ren/?utm_source=friends"> Baoshuo&#39;s Blog </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://blog.cas7.moe"> Blog of Moecast </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://jerryxiao.cc"> JerryXiao </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://sangsir.com"> SangSir </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://snli.org"> Shucheng Li </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://yuetau.net"> YuetAu&#39;s Spot </a> </li> </ul> </section> </aside> </div> <footer class="lantian clearfix" data-astro-cid-w3csb3e3="">  <div id="copyright" class="float-end text-end" data-astro-cid-w3csb3e3=""> <i class="fas fa-copyright" data-astro-cid-w3csb3e3=""></i> 2012-2025 Lan Tian @ Blog<br data-astro-cid-w3csb3e3=""> <small data-astro-cid-w3csb3e3=""> Powered by Astro v5.15.1 @ 2025-10-25 23:46:39 </small> </div> <script type="module">function v(c,o,r){const h=/^localhost$|^127(?:\.[0-9]+){0,2}\.[0-9]+$|^(?:0*:)*?:?0*1$/.test(location.hostname)||location.protocol==="file:";if(!o.trackLocalhost&&h)return console.warn("[Plausible] Ignoring event because website is running locally");try{if(window.localStorage.plausible_ignore==="true")return console.warn('[Plausible] Ignoring event because "plausible_ignore" is set to "true" in localStorage')}catch{}const p={n:c,u:o.url,d:o.domain,r:o.referrer,w:o.deviceWidth,h:o.hashMode?1:0,p:r&&r.props?JSON.stringify(r.props):void 0},s=new XMLHttpRequest;s.open("POST",`${o.apiHost}/api/event`,!0),s.setRequestHeader("Content-Type","text/plain"),s.send(JSON.stringify(p)),s.onreadystatechange=()=>{s.readyState===4&&r&&r.callback&&r.callback()}}function b(c){const o=()=>({hashMode:!1,trackLocalhost:!1,url:location.href,domain:location.hostname,referrer:document.referrer||null,deviceWidth:window.innerWidth,apiHost:"https://plausible.io",...c}),r=(t,n,i)=>{v(t,{...o(),...i},n)},h=(t,n)=>{r("pageview",n,t)};return{trackEvent:r,trackPageview:h,enableAutoPageviews:()=>{const t=()=>h(),n=history.pushState;return n&&(history.pushState=function(i,l,u){n.apply(this,[i,l,u]),t()},addEventListener("popstate",t)),c&&c.hashMode&&addEventListener("hashchange",t),h(),function(){n&&(history.pushState=n,removeEventListener("popstate",t)),c&&c.hashMode&&removeEventListener("hashchange",t)}},enableAutoOutboundTracking:(t=document,n={subtree:!0,childList:!0,attributes:!0,attributeFilter:["href"]})=>{function i(e){r("Outbound Link: Click",{props:{url:this.href}}),typeof process<"u"&&process,setTimeout(()=>{location.href=this.href},150),e.preventDefault()}const l=new Set;function u(e){e instanceof HTMLAnchorElement?e.host!==location.host&&(e.addEventListener("click",i),l.add(e)):"querySelectorAll"in e&&e.querySelectorAll("a").forEach(u)}function f(e){e instanceof HTMLAnchorElement?(e.removeEventListener("click",i),l.delete(e)):"querySelectorAll"in e&&e.querySelectorAll("a").forEach(f)}const d=new MutationObserver(e=>{e.forEach(a=>{a.type==="attributes"?(f(a.target),u(a.target)):a.type==="childList"&&(a.addedNodes.forEach(u),a.removedNodes.forEach(f))})});return t.querySelectorAll("a").forEach(u),d.observe(t,n),function(){l.forEach(a=>{a.removeEventListener("click",i)}),l.clear(),d.disconnect()}}}}const g=b({domain:"lantian.pub",trackLocalhost:!0,apiHost:""});g.trackPageview();</script> </footer>  </div>  </body> </html>