<!DOCTYPE html><html lang="en-US" itemscope="" itemtype="https://schema.org/Article" data-astro-cid-porej7z2=""> <head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>DN42 Experimental Network: Intro and Registration (Updated 2022-12) - Lan Tian @ Blog</title><script>
  ;(() => {
    try {
      const mode = localStorage.getItem('user-color-scheme')
      if (mode == 'dark' || mode == 'light') {
        document.documentElement.setAttribute('data-user-color-scheme', mode)
      }
    } catch {
      // Ignore errors
    }
  })()
</script><link rel="stylesheet" href="/assets/index.CUlf1-Vz.css"><style>#post-navi[data-astro-cid-gfbmwgei]{padding:5px;border-top:1px solid var(--lt-border-weak);border-bottom:1px solid var(--lt-border-weak)}
ol[data-astro-cid-nj3qel45]{margin:0;padding:0;line-height:1.5}ol[data-astro-cid-nj3qel45] .toc-item[data-astro-cid-nj3qel45]{list-style:none}ol[data-astro-cid-nj3qel45] .toc-child[data-astro-cid-nj3qel45],ol[data-astro-cid-nj3qel45] .toc[data-astro-cid-nj3qel45]{padding:0}ol[data-astro-cid-nj3qel45] .toc-link[data-astro-cid-nj3qel45]{display:block;margin-left:1em;padding:.25em 0}ol[data-astro-cid-nj3qel45] .toc-level-1[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-2[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-3[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-4[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-5[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-6[data-astro-cid-nj3qel45]:before{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:1em;padding:.25em 0;float:left;font-style:normal;font-variant:normal;font-weight:900;font-family:Font Awesome\ 6 Free;font-feature-settings:normal;text-align:center}ol[data-astro-cid-nj3qel45] .toc-level-1[data-astro-cid-nj3qel45]:before{content:""}ol[data-astro-cid-nj3qel45] .toc-level-2[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-3[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-4[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-5[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-6[data-astro-cid-nj3qel45]:before{content:""}.post-info-wrap[data-astro-cid-dckccua4]{-ms-flex:0 0 2.5em;flex:0 0 2.5em;background-color:var(--lt-component-bg-emphasis)}@media(min-width:768px){.post-info[data-astro-cid-dckccua4]{position:sticky;top:0}}@media(max-width:767.98px){.post-info[data-astro-cid-dckccua4]{position:absolute}}
</style><script type="module" src="/assets/PageLayout.astro_astro_type_script_index_0_lang.C1wfUPs6.js"></script><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Referrer-Policy" content="no-referrer, strict-origin-when-cross-origin"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="imagemode" content="force"><meta name="nightmode" content="disable"><meta name="wap-font-scale" content="no"><meta name="title" content="DN42 Experimental Network: Intro and Registration (Updated 2022-12) - Lan Tian @ Blog"><meta name="keywords" content=""><meta name="author" content="Lan Tian"><link rel="canonical" href="https://lantian.pub/en/article/modify-website/dn42-experimental-network-2020.lantian/"><link rel="alternate" type="application/rss+xml" title="Lan Tian @ Blog" href="https://lantian.pub/rss2.xml"><link rel="alternate" type="application/atom+xml" title="Lan Tian @ Blog" href="https://lantian.pub/feed.xml"><link rel="alternate" href="https://lantian.pub/article/modify-website/dn42-experimental-network-2020.lantian/" hreflang="zh"><link rel="alternate" href="https://lantian.pub/en/article/modify-website/dn42-experimental-network-2020.lantian/" hreflang="en"><meta name="copyright" content="Copyright 2012-2025 Lan Tian @ Blog"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="manifest" href="/manifest.webmanifest"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#03a9f4"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#212121"><meta name="application-name" content="Lan Tian @ Blog"><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="167x167" href="/apple-touch-icon-167x167.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><link rel="apple-touch-icon" sizes="1024x1024" href="/apple-touch-icon-1024x1024.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-precomposed.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#03a9f4"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="Lan Tian @ Blog"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-640x1136.png"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1136x640.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-750x1334.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1334x750.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1125x2436.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2436x1125.png"><link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1170x2532.png"><link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2532x1170.png"><link rel="apple-touch-startup-image" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1179x2556.png"><link rel="apple-touch-startup-image" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2556x1179.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-828x1792.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1792x828.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2688.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2688x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2208.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2208x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1284x2778.png"><link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2778x1284.png"><link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1290x2796.png"><link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2796x1290.png"><link rel="apple-touch-startup-image" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1488x2266.png"><link rel="apple-touch-startup-image" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2266x1488.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1536x2048.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2048x1536.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1620x2160.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1620.png"><link rel="apple-touch-startup-image" media="(device-width: 820px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1640x2160.png"><link rel="apple-touch-startup-image" media="(device-width: 820px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1640.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2388.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2388x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2224.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2224x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-2048x2732.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2732x2048.png"><meta name="msapplication-TileColor" content="#bbdefb"><meta name="msapplication-TileImage" content="/mstile-144x144.png"><meta name="msapplication-config" content="/browserconfig.xml"><link rel="yandex-tableau-widget" href="/yandex-browser-manifest.json"><meta property="og:url" content="https://lantian.pub/en/article/modify-website/dn42-experimental-network-2020.lantian/"><meta property="og:type" content="website"><meta property="og:title" content="DN42 Experimental Network: Intro and Registration (Updated 2022-12) - Lan Tian @ Blog"><meta property="og:image" content="https://lantian.pub/apple-touch-icon.png"><meta content="DN42, aka Decentralized Network 42, is a large, decentralized VPN-based network. But unlike other traditional VPNs, DN42 itself doesn&#38;#39;t provide any VPN exits, which means it doesn&#38;#39;t allow you to bypass Internet censorships or unlock streaming services. On the contrary, the goal of DN42 is to simulate another Internet. It uses much of the technology running on modern Internet backbones (BGP, recursive DNS, etc), and is a great replica of a real network environment. In short, DN42 is: NOT suitable for users only seeking privacy protection or bypassing censorship NOT suitable for users consuming large amounts of bandwidth/data, such as for unlocking streaming services IS suitable for users learning about networking, practicing configuration of servers and routers,..."><meta property="og:site_name" content="Lan Tian @ Blog"><meta property="og:locale" content="en"><meta name="twitter:card" content="summary"><meta name="twitter:url" content="https://lantian.pub/en/article/modify-website/dn42-experimental-network-2020.lantian/"><meta name="twitter:title" content="DN42 Experimental Network: Intro and Registration (Updated 2022-12) - Lan Tian @ Blog"><meta property="twitter:image" content="https://lantian.pub/apple-touch-icon.png"><meta content="DN42, aka Decentralized Network 42, is a large, decentralized VPN-based network. But unlike other traditional VPNs, DN42 itself doesn&#38;#39;t provide any VPN exits, which means it doesn&#38;#39;t allow you to bypass Internet censorships or unlock streaming services. On the contrary, the goal of DN42 is to simulate another Internet. It uses much of the technology running on modern Internet backbones (BGP, recursive DNS, etc), and is a great replica of a real network environment. In short, DN42 is: NOT suitable for users only seeking privacy protection or bypassing censorship NOT suitable for users consuming large amounts of bandwidth/data, such as for unlocking streaming services IS suitable for users learning about networking, practicing configuration of servers and routers,..."><meta name="twitter:dnt" content="on"><meta itemprop="name" content="DN42 Experimental Network: Intro and Registration (Updated 2022-12) - Lan Tian @ Blog"><meta property="image" content="https://lantian.pub/apple-touch-icon.png"><meta content="DN42, aka Decentralized Network 42, is a large, decentralized VPN-based network. But unlike other traditional VPNs, DN42 itself doesn&#38;#39;t provide any VPN exits, which means it doesn&#38;#39;t allow you to bypass Internet censorships or unlock streaming services. On the contrary, the goal of DN42 is to simulate another Internet. It uses much of the technology running on modern Internet backbones (BGP, recursive DNS, etc), and is a great replica of a real network environment. In short, DN42 is: NOT suitable for users only seeking privacy protection or bypassing censorship NOT suitable for users consuming large amounts of bandwidth/data, such as for unlocking streaming services IS suitable for users learning about networking, practicing configuration of servers and routers,..."><meta content="DN42, aka Decentralized Network 42, is a large, decentralized VPN-based network. But unlike other traditional VPNs, DN42 itself doesn&#38;#39;t provide any VPN exits, which means it doesn&#38;#39;t allow you to bypass Internet censorships or unlock streaming services. On the contrary, the goal of DN42 is to simulate another Internet. It uses much of the technology running on modern Internet backbones (BGP, recursive DNS, etc), and is a great replica of a real network environment. In short, DN42 is: NOT suitable for users only seeking privacy protection or bypassing censorship NOT suitable for users consuming large amounts of bandwidth/data, such as for unlocking streaming services IS suitable for users learning about networking, practicing configuration of servers and routers,..."><link rel="me" href="https://mastodon.social/@lantian"></head> <body data-astro-cid-porej7z2=""> <div id="bg" data-astro-cid-j6vmxtef=""></div>   <div id="container" class="container" data-astro-cid-porej7z2=""> <nav class="lantian navbar navbar-expand-lg" data-astro-cid-wu5dj4rx=""> <div class="container-fluid" data-astro-cid-wu5dj4rx=""> <a class="navbar-brand" href="/en/" data-astro-cid-wu5dj4rx="">Lan Tian @ Blog</a> <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#lantian-navbar" aria-controls="lantian-navbar" aria-expanded="false" aria-label="Toggle navigation" data-astro-cid-wu5dj4rx=""> <span class="navbar-toggler-icon" data-astro-cid-wu5dj4rx=""></span> </button> <div class="collapse navbar-collapse" id="lantian-navbar" data-astro-cid-wu5dj4rx=""> <ul class="navbar-nav" data-astro-cid-wu5dj4rx=""> <li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/en/page/archive/index.html" data-astro-cid-wu5dj4rx=""> Posts </a> </li><li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/en/page/himawari/index.html" data-astro-cid-wu5dj4rx=""> Himawari </a> </li><li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/en/page/dn42/index.html" data-astro-cid-wu5dj4rx=""> DN42 </a> </li> <li class="nav-item dropdown d-block d-lg-none" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="pages-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-file" data-astro-cid-wu5dj4rx=""></i> Page  <span class="caret" data-astro-cid-wu5dj4rx=""></span> </a> <ul class="dropdown-menu" aria-labelledby="pages-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/en/page/archive/index.html" data-astro-cid-wu5dj4rx=""> Posts </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/en/page/himawari/index.html" data-astro-cid-wu5dj4rx=""> Himawari </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/en/page/dn42/index.html" data-astro-cid-wu5dj4rx=""> DN42 </a> </li> </ul> </li> </ul> <ul class="navbar-nav ms-auto" data-astro-cid-wu5dj4rx=""> <li class="nav-item dropdown" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="languages-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-language" data-astro-cid-wu5dj4rx=""></i> Language <span class="caret" data-astro-cid-wu5dj4rx=""></span> </a> <ul class="dropdown-menu" aria-labelledby="languages-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/article/modify-website/dn42-experimental-network-2020.lantian/" data-astro-cid-wu5dj4rx=""> <span class="flag-icon flag-icon-cn" data-astro-cid-wu5dj4rx=""></span> Chinese Simplified / 简体中文 </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item active" href="/en/article/modify-website/dn42-experimental-network-2020.lantian/" data-astro-cid-wu5dj4rx=""> <span class="flag-icon flag-icon-us" data-astro-cid-wu5dj4rx=""></span> English </a> </li> <li data-astro-cid-wu5dj4rx=""><hr class="dropdown-divider" data-astro-cid-wu5dj4rx=""></li> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item disabled" href="#" data-astro-cid-wu5dj4rx="">Not all pages have translations.</a> </li> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item disabled" href="#" data-astro-cid-wu5dj4rx="">You may see 404 - this is normal.</a> </li> </ul> </li> <li class="nav-item dropdown" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="color-scheme-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-adjust" data-astro-cid-wu5dj4rx=""></i> Night Mode </a> <ul class="dropdown-menu" aria-labelledby="color-scheme-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-auto" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-adjust" data-astro-cid-wu5dj4rx=""></i> Auto </a> </li> <li data-astro-cid-wu5dj4rx=""><hr class="dropdown-divider" data-astro-cid-wu5dj4rx=""></li> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-light" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-sun" data-astro-cid-wu5dj4rx=""></i> Light</a> </li> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-dark" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-moon" data-astro-cid-wu5dj4rx=""></i> Dark</a> </li> </ul> </li> </ul> </div> </div> </nav> <script type="module">const m="user-color-scheme",s="data-user-color-scheme",u=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},i=e=>{try{return localStorage.getItem(e)}catch{return null}},c=e=>{const t={dark:!0,light:!0,auto:!0},o=e===null||!Object.keys(t).includes(e)?"auto":e;u(m,o);for(const l in t){const n=document.getElementById("color-scheme-"+l);n&&(l==o?n.classList.add("active"):n.classList.remove("active"))}o!="auto"?document.documentElement.setAttribute(s,o):document.documentElement.removeAttribute(s)};c(i(m));const r=document.getElementById("color-scheme-auto");r&&r.addEventListener("click",()=>c("auto"));const a=document.getElementById("color-scheme-light");a&&a.addEventListener("click",()=>c("light"));const d=document.getElementById("color-scheme-dark");d&&d.addEventListener("click",()=>c("dark"));</script>  <div class="d-flex" data-astro-cid-porej7z2=""> <div id="content" data-astro-cid-porej7z2="">  <article> <div class="d-flex"> <div class="post-info-wrap" data-astro-cid-dckccua4=""> <div class="post-info" data-astro-cid-dckccua4=""> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-clock"></span> <br> <small>05-02</small> </p> <div class="post-meta-value"> Published on<span class="badge badge-tag" data-astro-cid-dckccua4=""> 2021-05-02 12:21 </span>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-file-alt"></span> <br> <small>Website and Servers</small> </p> <div class="post-meta-value"> Category <a class="badge badge-tag" href="/en/category/modify-website" data-astro-cid-dckccua4=""> Website and Servers </a>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-tag"></span> <br> <small>2 tags</small> </p> <div class="post-meta-value"> Tags  <a class="badge badge-tag" href="/en/tag/DN42" data-astro-cid-dckccua4=""> DN42 </a>  <a class="badge badge-tag" href="/en/tag/BGP" data-astro-cid-dckccua4=""> BGP </a>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-list"></span> <br> <small>ToC</small> </p> <div class="post-meta-value">  <ol data-astro-cid-nj3qel45=""> <li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#changelog" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Changelog</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#skill-requirements" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Skill Requirements</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#registration-procedure" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Registration Procedure</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#finding-a-peer-node" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Finding a Peer Node</span> </a> </li><li class="toc-item toc-level-1" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#very-important-system-configuration" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Very Important System Configuration</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#choose-tunnel-software" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Choose Tunnel Software</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#choose-bgp-software" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Choose BGP Software</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#building-internal-network" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Building Internal Network</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#1xrtt-peering-faster-peering" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">&quot;1xRTT Peering&quot;: Faster Peering</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#tunnel-setup-wireguard" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Tunnel Setup: WireGuard</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#tunnel-setup-openvpn" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Tunnel Setup: OpenVPN</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#limit-traffic-on-dn42-interfaces" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Limit Traffic on DN42 Interfaces</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#bgp-session-setup-bird-v1--v2" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">BGP Session Setup: BIRD v1 &amp; v2</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#network-test--bonus" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Network Test &amp; Bonus</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#need-help" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Need Help?</span> </a> </li> </ol>   </div> </div> </div> </div>  </div>  <div class="post-wrap">  <h1 class="post-title"> <a href="/en/article/modify-website/dn42-experimental-network-2020.lantian/" rel="bookmark" title="DN42 Experimental Network: Intro and Registration (Updated 2022-12)">DN42 Experimental Network: Intro and Registration (Updated 2022-12)</a> </h1> <div class="post-text">   <p>DN42, aka Decentralized Network 42, is a large, decentralized VPN-based network.
But unlike other traditional VPNs, DN42 itself doesn&#39;t provide any VPN exits,
which means it doesn&#39;t allow you to bypass Internet censorships or unlock
streaming services. On the contrary, the goal of DN42 is to simulate another
Internet. It uses much of the technology running on modern Internet backbones
(BGP, recursive DNS, etc), and is a great replica of a real network environment.</p>
<p>In short, DN42 is:</p>
<ul>
<li>NOT suitable for users only seeking privacy protection or bypassing censorship</li>
<li>NOT suitable for users consuming large amounts of bandwidth/data, such as for
unlocking streaming services</li>
<li>IS suitable for users learning about networking, practicing configuration of
servers and routers, and even preparing for an AS on the real Internet</li>
<li>IS suitable for users with a real AS, but is worried of
<a href="https://blog.cloudflare.com/how-verizon-and-a-bgp-optimizer-knocked-large-parts-of-the-internet-offline-today/" rel="noopener noreferrer" target="_blank">knocking out the Internet due to configuration errors</a>,
and want a test field.</li>
</ul>
<p>Because of this, the bar to enter DN42 is a bit high. Just like the real
Internet, you will be playing the role of a ISP, register your personal ID, ASN,
IPv4 and IPv6 blocks, and announce your IP blocks on your server with BGP. You
also need to contact other users and peer with them, so you can enter the &quot;real&quot;
DN42 step by step.</p>
<p>DN42 is running on <code>172.20.0.0/14</code> and <code>fd00::/8</code>, IP blocks reserved for
internal usage. In other words, whatever you do on DN42 won&#39;t impact real
Interner connections.</p>
<h2 id="changelog">Changelog</h2>
<ul>
<li>2022-12: Add steps to use a free IPv4 block finder.</li>
<li>2022-06: Update to the latest registration procedure.</li>
<li>2022-02: Update <code>rp_filter</code> content, never use <code>rp_filter=2</code>!</li>
<li>2021-06: Improve readability of some config files, differ <code>contact</code> from
<code>e-mail</code>.</li>
<li>2021-05: Add &quot;Skills Required&quot; section; Add iptables firewall rules.</li>
<li>2020-12: Fix peer config path for BIRDv2.</li>
<li>2020-10: No longer recommend using Debian Unstable repo for WireGuard (better
ways exist now); Recommend using WSL on Windows.</li>
<li>2020-09: Update to the latest registration procedure.</li>
<li>2020-08: No longer recommend new users to go to Burble, following his policy
update.</li>
<li>2020-07: DN42 Git server has changed from <code>git.dn42.us</code> to <code>git.dn42.dev</code>.</li>
<li>2020-05: Update <code>rp_filter</code> content, and suggest disabling UFW.</li>
<li>2020-04: Add suggestions for configuring your internal network across servers,
request to not use too much resource, and add more detailed explanation of
config choices.</li>
<li>2020-03: Explain the risk of choosing your own IPv6 ULA; Add &quot;Very Important
System Configuration&quot; section; Add guides to create and upload GPG keys and
sign git commits.</li>
</ul>
<h2 id="skill-requirements">Skill Requirements</h2>
<p>This post assumes that you are already capable of:</p>
<ol>
<li>You have a Linux environment (either dual-boot/virtual machine/VPS is fine).</li>
<li>You know how to use common Linux commands (<code>cd</code>, <code>ls</code>, etc), how to install
packages on your Linux OS (<code>apt</code>, <code>yum</code>, etc.), and how to use at least one
editor (either graphical editors like <code>gedit</code> or <code>vscode</code>, or command-line
ones like <code>vim</code> or <code>nano</code>). If you don&#39;t know how to do this, please have a
look at <a href="https://ryanstutorials.net/linuxtutorial/" rel="noopener noreferrer" target="_blank">this guide</a>.</li>
<li>You know basic usage of Git version control system, like push/pull/commit. If
you don&#39;t, please have a look at
<a href="https://guides.github.com/introduction/git-handbook/" rel="noopener noreferrer" target="_blank">this guide</a>.</li>
<li>You have a moderate level of knowledge in networking, know what IP and MAC
addresses are, know the working principles of switches and routers, can do
basic networking diagnosis under Linux (with <code>ping</code>, <code>traceroute</code>, etc.),
have heard of dynamic routing protocols like BGP or OSPF. If you don&#39;t,
please have a look at
<a href="https://www.cs.unh.edu/cnrg/people/gherrin/linux-net.html" rel="noopener noreferrer" target="_blank">this guide (Chapter 1-8)</a>.</li>
</ol>
<p>If you don&#39;t fulfill the knowledge required, it&#39;s very likely that you cannot
understand important aspects in this guide, make mistakes during the
configuration process, and cause trouble to other users in DN42.</p>
<h2 id="registration-procedure">Registration Procedure</h2>
<p>When I wrote my previous guide in 2017,
<a href="/en/article/modify-website/join-dn42-experimental-network.lantian">Joining DN42 Experimental Network</a>,
the user information as well as ASN and IP are all managed from a system called
Monotone. But in the year of 2018, DN42 gave up on Monotone and switched to Git.</p>
<p><strong>WARNING:</strong> The registration procedure to DN42 is long and complicated since
the procedure to register ASN and IP in the real Internet is similar, and DN42&#39;s
goal is being a replicate to the real Internet.</p>
<p><strong>ATTENTION:</strong></p>
<ul>
<li>The procedure here may become outdated as DN42 updates its registration
procedures. Please refer to DN42&#39;s official guides first, and use my guide
only as reference.</li>
<li><a href="https://dn42.dev/howto/Getting-Started" rel="noopener noreferrer" target="_blank">DN42 Registration Procedure on Official Wiki</a></li>
<li><a href="https://git.dn42.dev/dn42/registry/src/branch/master/README.md" rel="noopener noreferrer" target="_blank">DN42 Git Guide (Creating Pull Request) on Official Wiki</a></li>
</ul>
<p>In addition, since a bunch of UNIX tools (such as Git, GnuPG) are required in
the procedure:</p>
<ul>
<li>It&#39;s recommended to use Linux or macOS for the whole procedure.</li>
<li>If you use Windows, you may try
<a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="noopener noreferrer" target="_blank">Windows Subsystem for Linux</a>.</li>
</ul>
<p>Here are the steps:</p>
<ol>
<li>
<p>First, go to <a href="https://git.dn42.dev" rel="noopener noreferrer" target="_blank">https://git.dn42.dev</a> and register an
account. This is the GitHub for DN42, and the account information is stored
in one of the git repos.</p>
</li>
<li>
<p>Visit <a href="https://git.dn42.dev/dn42/registry" rel="noopener noreferrer" target="_blank">dn42/registry</a>, the account
information repo, and click Fork on the top right. This will create a copy of
the repo into your own account.</p>
<ul>
<li>Previously you can directly create a branch in the repository, but now you
need to fork the repo, just like what you do on GitHub and similar sites.</li>
</ul>
</li>
<li>
<p>Now the page should automatically switch to the copy in your own account. Git
clone it to your local machine.</p>
</li>
<li>
<p>Now, you need to create a series of files in the cloned repo, including:</p>
<ol>
<li>
<p>Create a file <code>[NICKNAME]-MNT</code> under <code>data/mntner</code> directory. This file is
your account that authorizes your further operations. For example, this is
my <code>mntner</code> file (available under <code>data/mntner/LANTIAN-MNT</code>):</p>
<p></p><div class="btn-group btn-group-vertical" role="group" id="lti-g1385112">  <input type="radio" name="lti-g1385112" id="lti-1385112-0" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop1"> <label class="btn btn-outline-primary" for="lti-1385112-0"> Here is my registration info for reference only. </label>  <input type="radio" name="lti-g1385112" id="lti-1385112-1" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop2"> <label class="btn btn-outline-primary" for="lti-1385112-1"> Read the document carefully and replace EVERYTHING with YOUR information. </label>  <input type="radio" name="lti-g1385112" id="lti-1385112-2" class="btn-check lti-option" autocomplete="off" data-lti-tag="code1"> <label class="btn btn-outline-primary" for="lti-1385112-2"> I acknowledge the notes above, and want to see the code. </label>  </div> 
<div id="lti-content-code1" class="lti-content"><pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mntner:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-MNT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">admin-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">tech-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mnt-by:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-MNT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">source</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">auth:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">               pgp-fingerprint</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 23067C13B6AEBDD7C0BB567327F31700E751EC22</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">auth:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">               ssh-rsa</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> AAAAB3NzaC1yc2EAAAADAQABAAACAQCulLscvKjEeroKdPE207W10MbZ3+ZYzWn34EnVeIG0GzfZ3zkjQJVfXFahu97P68Tw++N6zIk7htGic9SouQuAH8+8kzTB8/55Yjwp7W3bmqL7heTmznRmKehtKg6RVgcpvFfciyxQXV/bzOkyO+xKdmEw+fs92JLUFjd/rbUfVnhJKmrfnohdvKBfgA27szHOzLlESeOJf3PuXV7BLge1B+cO8TJMJXv8iG8P5Uu8UCr857HnfDyrJS82K541Scph3j+NXFBcELb2JSZcWeNJRVacIH3RzgLvp5NuWPBCt6KET1CCJZLsrcajyonkA5TqNhzumIYtUimEnAPoH51hoUD1BaL4wh2DRxqCWOoXn0HMrRmwx65nvWae6+C/7l1rFkWLBir4ABQiKoUb/MrNvoXb+Qw/ZRo6hVCL5rvlvFd35UF0/9wNu1nzZRSs9os2WLBMt00A4qgaU2/ux7G6KApb7shz1TXxkN1k+/EKkxPj/sQuXNvO6Bfxww1xEWFywMNZ8nswpSq/4Ml6nniS2OpkZVM2SQV1q/VdLEKYPrObtp2NgneQ4lzHmAa5MGnUCckES+qOrXFZAcpI126nv1uDXqA2aytN6WHGfN50K05MZ+jA8OM9CWFWIcglnT+rr3l+TI/FLAjE13t6fMTYlBH0C8q+RnQDiIncNwyidQ==</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">remarks:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            pin-sha256:o1lfYvcdcYy81UIuZMZO1CkCLX+vJOdD5GLw1cmeStU=</span></span></code></pre></div>
<ul>
<li>The items in the file are:
<ul>
<li><code>mntner</code>: <code>maintainer</code>, the name for your account. Same as the file
name.</li>
<li><code>admin-c</code>: <code>admin contact</code>, points to a later created <code>person</code> file.
Usually <code>[NICKNAME]-DN42</code>.</li>
<li><code>tech-c</code>: <code>tech contact</code>, points to a later created <code>person</code> file.
Usually <code>[NICKNAME]-DN42</code>.</li>
<li><code>mnt-by</code>: <code>maintain by</code>, points to this account itself. Usually
<code>[NICKNAME]-DN42</code>.</li>
<li><code>source</code>: has a fixed value of <code>DN42</code>.</li>
<li><code>auth</code>: your authentication info. Usually, two types of data are
accepted: GPG public key and SSH public key.
<ul>
<li>You <strong>MUST</strong> add at least one out of GPG pubkey and SSH pubkey.</li>
<li>If you plan to add a GPG pubkey, you need to create one first
(assuming you don&#39;t have one). You may follow
<a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/generating-a-new-gpg-key" rel="noopener noreferrer" target="_blank">this guide by GitHub</a>.
You will also need the pubkey when submitting your registration
request.
<ul>
<li>You also need to upload your GPG pubkey to a public server, aka
Keyserver, for other people to obtain.</li>
<li>Run this command:
<ul>
<li><code>gpg --keyserver hkp://keyserver.ubuntu.com --send-key [GPG Key ID]</code></li>
</ul>
</li>
<li>Then fill the key ID to <code>auth</code> item, with the format of
<code>pgp-fingerprint [GPG Key ID]</code>, similar to my example above.</li>
</ul>
</li>
<li>If you plan to add an SSH pubkey, you need to create one first
(assuming you don&#39;t have one).
<ul>
<li>Running <code>ssh-keygen -t ed25519</code> is usually enough for Mac and
Linux, but if you have a rather old version of SSH, which doesn&#39;t
support ED25519 crypto, you may run <code>ssh-keygen -t rsa</code> instead to
use RSA crypto.</li>
<li>For Windows, you can
<a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" rel="noopener noreferrer" target="_blank">download PuTTY</a>
and use its <code>puttygen</code> utility.</li>
<li>After generation, add your pubkey (usually stored at <code>~/.ssh</code> and
named <code>id_ed25519.pub</code> or <code>id_rsa.pub</code> on Mac and Linux; displayed
straight on <code>puttygen</code> window after generation) to <code>auth</code> item,
with format <code>ssh-ed25519 [SSH Pubkey]</code> or <code>ssh-rsa [SSH Pubkey]</code>.</li>
<li>In addition, some services on DN42 verify your identity with your
SSH pubkey here.</li>
</ul>
</li>
<li>Read DN42&#39;s
<a href="https://dn42.dev/howto/Registry-Authentication" rel="noopener noreferrer" target="_blank">Registry Authentication Wiki Page</a>
for more information.</li>
</ul>
</li>
<li><code>remarks</code>: comments, fill with whatever content you like. Or you may
simply remove them.</li>
</ul>
</li>
<li><strong>ATTENTION:</strong> There is a long sequence of spaces between the name and
values. The length of this space sequence <strong>cannot be changed to
whatever you like, and cannot be replaced with TAB</strong>. The length of the
name, the colon, and the spaces <strong>MUST be exactly 20 characters</strong>.</li>
</ul>
</li>
<li>
<p>Create <code>[NICKNAME]-DN42</code> under <code>data/person</code>. This stands for your
personal information, but what&#39;s actually needed is simply a mailbox.
Here&#39;s my <code>person</code> file, for example (<code>data/person/LANTIAN-DN42</code>):</p>
<p></p><div class="btn-group btn-group-vertical" role="group" id="lti-g5825003">  <input type="radio" name="lti-g5825003" id="lti-5825003-0" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop1"> <label class="btn btn-outline-primary" for="lti-5825003-0"> Here is my registration info for reference only. </label>  <input type="radio" name="lti-g5825003" id="lti-5825003-1" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop2"> <label class="btn btn-outline-primary" for="lti-5825003-1"> Read the document carefully and replace EVERYTHING with YOUR information. </label>  <input type="radio" name="lti-g5825003" id="lti-5825003-2" class="btn-check lti-option" autocomplete="off" data-lti-tag="code2"> <label class="btn btn-outline-primary" for="lti-5825003-2"> I acknowledge the notes above, and want to see the code. </label>  </div> 
<div id="lti-content-code2" class="lti-content"><pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">person:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             Lan</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> Tian</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">e-mail:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             dn42@lantian.pub</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">contact:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            telegram:lantian1998</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">nic-hdl:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mnt-by:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-MNT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">source</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             DN42</span></span></code></pre></div>
<ul>
<li>The items in the file are:
<ul>
<li><code>person</code>: your nickname.</li>
<li><code>e-mail</code>: your e-mail address.</li>
<li><code>contact</code>: optional, your contact information other than e-mail, e.g.
IRC or Telegram.</li>
<li><code>nic-hdl</code>: <code>NIC handle</code>, points to the file itself. It is the same as
file name, <code>[NICKNAME]-DN42</code>.</li>
<li><code>mnt-by</code>: <code>maintain by</code>, points to the <code>mntner</code> file you previously
created, <code>[NICKNAME]-MNT</code>.</li>
<li><code>source</code>: has a fixed value of <code>DN42</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Next, you need to choose for yourself an Autonomous System Number or ASN.
On the real/global Internet, the ASN range 4200000000 - 4294967294 is
reserved for private use, and DN42 occupies one small block in it,
424242<strong>0000</strong> - 424242<strong>3999</strong>. <strong>(Note that the range contains 4000 ASNs
rather than 10000! The other 6000 ASNs aren&#39;t open to registration yet.)</strong>
Pick yourself an ASN in the range that you like and is not occupied, and
create a file for it under <code>data/aut-num</code>. For example, I&#39;m running
AS4242422547, so I have the file <code>data/aut-num/AS4242422547</code>:</p>
<p></p><div class="btn-group btn-group-vertical" role="group" id="lti-g7540568">  <input type="radio" name="lti-g7540568" id="lti-7540568-0" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop1"> <label class="btn btn-outline-primary" for="lti-7540568-0"> Here is my registration info for reference only. </label>  <input type="radio" name="lti-g7540568" id="lti-7540568-1" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop2"> <label class="btn btn-outline-primary" for="lti-7540568-1"> Read the document carefully and replace EVERYTHING with YOUR information. </label>  <input type="radio" name="lti-g7540568" id="lti-7540568-2" class="btn-check lti-option" autocomplete="off" data-lti-tag="code3"> <label class="btn btn-outline-primary" for="lti-7540568-2"> I acknowledge the notes above, and want to see the code. </label>  </div> 
<div id="lti-content-code3" class="lti-content"><pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">aut-num:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            AS4242422547</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">as-name:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            LANTIAN-AS</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">descr:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">              Peer</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> with</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> me</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> at</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42@lantian.pub</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">admin-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">tech-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mnt-by:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-MNT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">source</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             DN42</span></span></code></pre></div>
<ul>
<li>The items in the file are:
<ul>
<li><code>aut-num</code>: Your ASN.</li>
<li><code>as-name</code>: Name for the AS, usually only visible in some network
structure graphs of DN42. The recommended value is <code>[NICKNAME]-AS</code>.</li>
<li><code>descr</code>: Description for the AS, usually only visible in some network
structure graphs of DN42. Fill with whatever you like.</li>
<li><code>admin-c</code>: <code>admin contact</code>, points to your <code>person</code> file,
<code>[NICKNAME]-DN42</code>.</li>
<li><code>tech-c</code>: <code>tech contact</code>, points to your <code>person</code> file,
<code>[NICKNAME]-DN42</code>.</li>
<li><code>mnt-by</code>: <code>maintain by</code>, points to your <code>mntner</code> file,
<code>[NICKNAME]-MNT</code>.</li>
<li><code>source</code>: has a fixed value of <code>DN42</code>.</li>
</ul>
</li>
<li>If you have an ASN on the real Internet:
<ul>
<li><strong>You may choose to use your real, global ASN in DN42.</strong> Simply use
your own ASN in this step.</li>
<li>If you do this, you may run into a bit of trouble when peering with
others：
<ul>
<li>When establishing a VPN connection, many people in DN42 use the last
5 digits of your ASN as the port number. In this case, your public
ASN may collide with an internal ASN in DN42.</li>
<li>If this happens, you need to talk to the other side, so you can
connect to another port.</li>
</ul>
</li>
<li>And your identity may need to be verified, such as checking if the
mailbox match what&#39;s on the WHOIS information of your global ASN, etc.
<ul>
<li>I never experienced this sequence, and the verification procedure is
my guess. Perhaps a more complicated procedure is required.</li>
</ul>
</li>
<li>Generally, I suggest that you <strong>register for a new ASN in DN42</strong>. It&#39;s
less hassle.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Next, you start to choose your IP. Browse to <code>data/inetnum</code> folder, where
all registered IPv4 blocks are stored. You need to find a free space and
occupy it for your own use.</p>
<ul>
<li>
<p>DN42&#39;s IPv4 addresses are in range <code>172.20.0.0/14</code>, or
<code>172.20.0.0 - 172.23.255.255</code>.</p>
<ul>
<li>However, a lot of IPv4 blocks are reserved for other purposes, and you
cannot apply for them. Therefore,</li>
<li><strong>Please use the following tools to choose your IP block, instead of
manually finding one in <code>data/inetnum</code></strong>.</li>
<li><strong>Please use the following tools to choose your IP block, instead of
manually finding one in <code>data/inetnum</code></strong>.</li>
<li><strong>Please use the following tools to choose your IP block, instead of
manually finding one in <code>data/inetnum</code></strong>.
<ul>
<li><a href="https://explorer.burble.com/free#/4" rel="noopener noreferrer" target="_blank">https://explorer.burble.com/free#/4</a></li>
<li><a href="https://dn42.us/peers/free" rel="noopener noreferrer" target="_blank">https://dn42.us/peers/free</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p>The smallest address block you can register in DN42 is <code>/29</code>, or 8 IPs.
Out of which 6 IPs are usable for servers and devices, as the first IP
is reserved for marking the address block, and the last IP is for
broadcasting within the block.</p>
<ul>
<li>For users who &quot;just want a bit of experience&quot;, <code>/29</code> is enough.</li>
</ul>
</li>
<li>
<p>If you satisfy any requirement below, <code>/29</code> is not enough for you, and
you need to apply for a larger block:</p>
<ul>
<li>You have more than 6 servers and devices</li>
<li>You plan to set up services like Anycast, which will occupy more IPs</li>
<li>Some devices that you use (for example, Mikrotik routers) may require
<code>/30</code> blocks when establishing tunnels for peering.
<ul>
<li>In the later peering stage, Linux servers can set up point-to-point
tunnels between any pair of single IPs, such as <code>172.22.76.185/32</code>
to <code>172.21.2.3/32</code>. In addition, my address <code>172.22.76.185/32</code> may
be reused for any number of tunnels, which means I can also set up
<code>172.22.76.185/32</code> to <code>172.22.3.4/32</code>, etc. In short, I can peer
with any number of people without extra IPs.</li>
<li>But if your device requires <code>/30</code>, one tunnel will occupy 4
individual IP addresses, and your address cannot be reused. This is
a waste of IP space.</li>
<li>In this case, you need to reserve a large number of IPs yourself.
Since physical routers are relatively rare in DN42, your peer may
not have reserved that many addresses. The <code>/30</code> block needs to be
provided by you.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>DN42 generally suggests registering for <code>/27</code>. The largest block you can
directly register without additional steps is <code>/26</code>.</p>
</li>
<li>
<p>If you <strong>REALLY have a lot of servers (more than 62)</strong> that doesn&#39;t fit
even a <code>/26</code>, then:</p>
<ul>
<li>Your application won&#39;t be accepted immediately. In this case, you need
to visit one of the places below, tell everyone that you need a larger
block, state your reasons, and request a vote:
<ul>
<li>DN42&#39;s IRC channel (<a href="https://wiki.dn42.us/services/IRC" rel="noopener noreferrer" target="_blank">here</a>, under
<code>public internet</code>)</li>
<li>DN42&#39;s mailing list
(<a href="https://wiki.dn42.us/contact#contact_mailing-list" rel="noopener noreferrer" target="_blank">here</a>, under
<code>Mailing list</code>)</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>DO NOT REQUEST HUGE BLOCKS LIKE <code>/24</code> ON YOUR FIRST REGISTRATION!</strong></p>
</li>
<li>
<p><strong>DO NOT REQUEST HUGE BLOCKS LIKE <code>/24</code> ON YOUR FIRST REGISTRATION!</strong></p>
</li>
<li>
<p><strong>DO NOT REQUEST HUGE BLOCKS LIKE <code>/24</code> ON YOUR FIRST REGISTRATION!</strong></p>
<ul>
<li>You may find a free <code>/24</code> and take a small block from it like <code>/27</code>.
Later, when you need it, you may expand the block to <code>/24</code>.</li>
</ul>
</li>
<li>
<p><strong>ESPECIALLY, DO NOT RESERVE <code>/24</code> AND IDLE IT!</strong></p>
</li>
<li>
<p><strong>ESPECIALLY, DO NOT RESERVE <code>/24</code> AND IDLE IT!</strong></p>
</li>
<li>
<p><strong>ESPECIALLY, DO NOT RESERVE <code>/24</code> AND IDLE IT!</strong></p>
<ul>
<li>DN42&#39;s IPv4 addresses are scarce, just like public Internet.</li>
</ul>
</li>
<li>
<p>When you finally finish choosing your IP block, create the file under
<code>data/inetnum</code>. For example, one of my blocks is <code>172.22.76.184/29</code>, and
the corresponding file is <code>data/inetnum/172.22.76.184_29</code>:</p>
<p></p><div class="btn-group btn-group-vertical" role="group" id="lti-g1059841">  <input type="radio" name="lti-g1059841" id="lti-1059841-0" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop1"> <label class="btn btn-outline-primary" for="lti-1059841-0"> Here is my registration info for reference only. </label>  <input type="radio" name="lti-g1059841" id="lti-1059841-1" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop2"> <label class="btn btn-outline-primary" for="lti-1059841-1"> Read the document carefully and replace EVERYTHING with YOUR information. </label>  <input type="radio" name="lti-g1059841" id="lti-1059841-2" class="btn-check lti-option" autocomplete="off" data-lti-tag="code4"> <label class="btn btn-outline-primary" for="lti-1059841-2"> I acknowledge the notes above, and want to see the code. </label>  </div> 
<div id="lti-content-code4" class="lti-content"><pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">inetnum:</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">            172.22.76.184</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> -</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 172.22.76.191</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">netname:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            LANTIAN-IPV4</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">remarks:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            Peer</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> with</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> me</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> at</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42@lantian.pub</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">descr:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">              Peer</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> with</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> me</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> at</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42@lantian.pub</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">country:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            CN</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">admin-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">tech-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mnt-by:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-MNT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">nserver:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            ns1.lantian.dn42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">nserver:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            ns2.lantian.dn42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">status:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             ASSIGNED</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">cidr:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">               172.22.76.184/29</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">source</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             DN42</span></span></code></pre></div>
</li>
<li>
<p>The items in the file are:</p>
<ul>
<li><code>inetnum</code>: range of your IP block. If you don&#39;t know how to calculate
this, you may deduce it from nearby blocks or use a
<a href="https://mxtoolbox.com/subnetcalculator.aspx" rel="noopener noreferrer" target="_blank">calculator</a>.</li>
<li><code>netname</code>: name of your IP block. Not really useful, fill with
anything (but recommended to be <code>[NICKNAME]-IPV4</code>).</li>
<li><code>remarks</code>: comments, fill with anything you like.</li>
<li><code>descr</code>: description, fill with anything you like.</li>
<li><code>country</code>: your country, CN for Mainland China, US for United States,
etc.</li>
<li><code>admin-c</code>: <code>admin contact</code>, points to your <code>person</code> file,
<code>[NICKNAME]-DN42</code>.</li>
<li><code>tech-c</code>: <code>tech contact</code>, points to your <code>person</code> file,
<code>[NICKNAME]-DN42</code>.</li>
<li><code>mnt-by</code>: <code>maintain by</code>, points to your <code>mntner</code> file,
<code>[NICKNAME]-MNT</code>.</li>
<li><code>nserver</code>: name servers for reverse resolving the IP block. If you
don&#39;t know that this is or don&#39;t need this, remove the line.</li>
<li><code>status</code>: has a fixed value of <code>ASSIGNED</code>.</li>
<li><code>cidr</code>: range of your IP block, same as <code>inetnum</code> but in CIDR.</li>
<li><code>source</code>: has a fixed value of <code>DN42</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>IP registration is not done yet. You also need a <code>route</code> object to
authorize your AS to use the address. Create a file under <code>data/route</code>,
<code>data/route/172.22.76.184_29</code> for example:</p>
<p></p><div class="btn-group btn-group-vertical" role="group" id="lti-g1807649">  <input type="radio" name="lti-g1807649" id="lti-1807649-0" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop1"> <label class="btn btn-outline-primary" for="lti-1807649-0"> Here is my registration info for reference only. </label>  <input type="radio" name="lti-g1807649" id="lti-1807649-1" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop2"> <label class="btn btn-outline-primary" for="lti-1807649-1"> Read the document carefully and replace EVERYTHING with YOUR information. </label>  <input type="radio" name="lti-g1807649" id="lti-1807649-2" class="btn-check lti-option" autocomplete="off" data-lti-tag="code5"> <label class="btn btn-outline-primary" for="lti-1807649-2"> I acknowledge the notes above, and want to see the code. </label>  </div> 
<div id="lti-content-code5" class="lti-content"><pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">route:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">              172.22.76.184/29</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">descr:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">              Peer</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> with</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> me</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> at</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42@lantian.pub</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">origin:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             AS4242422547</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mnt-by:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-MNT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">source</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             DN42</span></span></code></pre></div>
<ul>
<li>The items in the file are:
<ul>
<li><code>route</code>: range of your IP block.</li>
<li><code>descr</code>: description, fill with anything you like.</li>
<li><code>origin</code>: AS you authorize to use this IP block. Fill with your ASN.</li>
<li><code>mnt-by</code>: <code>maintain by</code>, points to your <code>mntner</code> file,
<code>[NICKNAME]-MNT</code>.</li>
<li><code>source</code>: has a fixed value of <code>DN42</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Since it&#39;s already the year 2020, you&#39;d better also register an IPv6
block. Create a file under <code>data/inet6num</code>.</p>
<ul>
<li>
<p>DN42&#39;s IPv6 blocks are in the <code>fd00::/8</code> range, reserved for private
use.</p>
</li>
<li>
<p>DN42&#39;s IPv6 blocks usually exist in <code>/48</code>. This ought to be enough for
anybody.</p>
<ul>
<li>Even if your router requires <code>/64</code> for IPv6 tunnels, there can be
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>16</mn></msup><mo>=</mo><mn>65536</mn></mrow><annotation encoding="application/x-tex">2^{16} = 65536</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">16</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">65536</span></span></span></span> <code>/64</code> in a <code>/48</code>, enough to peer with everybody in
DN42.</li>
</ul>
</li>
<li>
<p>You may want to customize your block, filling it with contents like
<code>deadbeef</code>.</p>
<ul>
<li>First, I am <strong>against you from doing this</strong>!</li>
<li>First, I am <strong>against you from doing this</strong>!</li>
<li>First, I am <strong>against you from doing this</strong>!
<ul>
<li>Instead of an easy-to-remember IPv6 address, you may want
<a href="/en/article/modify-website/register-own-domain-in-dn42.lantian">an easy-to-remember domain in DN42</a>。</li>
</ul>
</li>
<li>RFC4193 regulates that all IPv6 ULA addresses should be generated
randomly to be <strong>globally unique</strong>.
<ul>
<li>If you customize your block, another user may have an address
conflict while joining DN42. This causes trouble for both of you.</li>
</ul>
</li>
<li>In addition, DN42 interconnects with similar experimental networks and
shares the IPv6 ULA range with them.
<ul>
<li>Since DN42 <strong>may not get complete address allocations from other
networks</strong>, your IPv6 block may still conflict with other networks,
even when your IPv6 block isn&#39;t registered in DN42 Registry.</li>
</ul>
</li>
<li>If such collision occurs, <strong>you may need to renumber the IPv6 address
of your whole network</strong>.</li>
<li>By the way, DN42 admins have different opinions on customizing IPv6
blocks. Some registered successfully, while others were denied.
<ul>
<li>So if you customized your block and got denied, <strong>don&#39;t be
surprised, just fix the problem</strong>.</li>
</ul>
</li>
<li>If you are <strong>REALLY REALLY REALLY</strong> sure that you want a customized
address, DN42 admins may reply with the following message when you
submit your registration request:</li>
<li>
<blockquote>
<p>Your inet6num violates RFC4193 section 3.2. Are you fully aware of
the consequences, and do you really want to continue? Being forced
to renumber your whole network really isn&#39;t fun.</p>
</blockquote>
</li>
<li>If you are <strong>REALLY REALLY REALLY</strong> sure, reply <code>Yes, I&#39;m sure</code>.</li>
<li>But keep in mind that some DN42 admins as well as myself are <strong>against
this behavior</strong>.</li>
</ul>
</li>
<li>
<p>Your best choice is a random IPv6 block. You may use some
<a href="https://simpledns.plus/private-ipv6" rel="noopener noreferrer" target="_blank">random prefix generator</a>.</p>
</li>
<li>
<p>After generating your IPv6 block, create a file in <code>data/inet6num</code>
similar to IPv4. For example I have <code>data/inet6num/fdbc:f9dc:67ad::_48</code>
for <code>fdbc:f9dc:67ad::/48</code>:</p>
<p></p><div class="btn-group btn-group-vertical" role="group" id="lti-g7148821">  <input type="radio" name="lti-g7148821" id="lti-7148821-0" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop1"> <label class="btn btn-outline-primary" for="lti-7148821-0"> Here is my registration info for reference only. </label>  <input type="radio" name="lti-g7148821" id="lti-7148821-1" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop2"> <label class="btn btn-outline-primary" for="lti-7148821-1"> Read the document carefully and replace EVERYTHING with YOUR information. </label>  <input type="radio" name="lti-g7148821" id="lti-7148821-2" class="btn-check lti-option" autocomplete="off" data-lti-tag="code6"> <label class="btn btn-outline-primary" for="lti-7148821-2"> I acknowledge the notes above, and want to see the code. </label>  </div> 
<div id="lti-content-code6" class="lti-content"><pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">inet6num:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">           fdbc:f9dc:67ad:0000:0000:0000:0000:0000</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> -</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fdbc:f9dc:67ad:ffff:ffff:ffff:ffff:ffff</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">netname:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            LANTIAN-IPV6</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">descr:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">              Peer</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> with</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> me</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> at</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42@lantian.pub</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">country:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            CN</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">admin-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">tech-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mnt-by:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-MNT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">nserver:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            ns1.lantian.dn42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">nserver:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            ns2.lantian.dn42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">status:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             ASSIGNED</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">cidr:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">               fdbc:f9dc:67ad::/48</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">source</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             DN42</span></span></code></pre></div>
</li>
<li>
<p>The items in the file are:</p>
<ul>
<li><code>inet6num</code>: range of your IP block. IPv6 ranges are easy to calculate,
from all 0 to all f.</li>
<li><code>netname</code>: name of your IP block. Not really useful, fill with
anything (but recommended to be <code>[NICKNAME]-IPV6</code>).</li>
<li><code>remarks</code>: comments, fill with anything you like.</li>
<li><code>descr</code>: description, fill with anything you like.</li>
<li><code>country</code>: your country, CN for Mainland China, US for United States,
etc.</li>
<li><code>admin-c</code>: <code>admin contact</code>, points to your <code>person</code> file,
<code>[NICKNAME]-DN42</code>.</li>
<li><code>tech-c</code>: <code>tech contact</code>, points to your <code>person</code> file,
<code>[NICKNAME]-DN42</code>.</li>
<li><code>mnt-by</code>: <code>maintain by</code>, points to your <code>mntner</code> file,
<code>[NICKNAME]-MNT</code>.</li>
<li><code>nserver</code>: name servers for reverse resolving the IP block. If you
don&#39;t know that this is or don&#39;t need this, remove the line.</li>
<li><code>status</code>: has a fixed value of <code>ASSIGNED</code>.</li>
<li><code>cidr</code>: range of your IP block, same as <code>inetnum</code> but in CIDR.</li>
<li><code>source</code>: has a fixed value of <code>DN42</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Then create a <code>route6</code> object under <code>data/route6</code>, to authorize your AS to
use the IP range. For example I have <code>data/route6/fdbc:f9dc:67ad::_48</code>:</p>
<p></p><div class="btn-group btn-group-vertical" role="group" id="lti-g6539606">  <input type="radio" name="lti-g6539606" id="lti-6539606-0" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop1"> <label class="btn btn-outline-primary" for="lti-6539606-0"> Here is my registration info for reference only. </label>  <input type="radio" name="lti-g6539606" id="lti-6539606-1" class="btn-check lti-option" autocomplete="off" data-lti-tag="noop2"> <label class="btn btn-outline-primary" for="lti-6539606-1"> Read the document carefully and replace EVERYTHING with YOUR information. </label>  <input type="radio" name="lti-g6539606" id="lti-6539606-2" class="btn-check lti-option" autocomplete="off" data-lti-tag="code7"> <label class="btn btn-outline-primary" for="lti-6539606-2"> I acknowledge the notes above, and want to see the code. </label>  </div> 
<div id="lti-content-code7" class="lti-content"><pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">route6:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             fdbc:f9dc:67ad::/48</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">descr:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">              Peer</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> with</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> me</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> at</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42@lantian.pub</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">origin:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             AS4242422547</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mnt-by:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-MNT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">source</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             DN42</span></span></code></pre></div>
<ul>
<li>The items in the file are:
<ul>
<li><code>route6</code>: range of your IP block.</li>
<li><code>descr</code>: description, fill with anything you like.</li>
<li><code>origin</code>: AS you authorize to use this IP block. Fill with your ASN.</li>
<li><code>mnt-by</code>: <code>maintain by</code>, points to your <code>mntner</code> file,
<code>[NICKNAME]-MNT</code>.</li>
<li><code>source</code>: has a fixed value of <code>DN42</code>.</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li>
<p>Congratulations, you have created all files you need. Next, <code>cd</code> to the root
folder of the git repo, run <code>git add .</code>, and run <code>git commit -S</code>, use your
previously created GPG key to create a <strong>GPG signed commit</strong>.</p>
<ul>
<li>
<p>If you have already committed, run <code>git commit --amend -S</code> sign your
previous commit.</p>
<ul>
<li>If you don&#39;t have a GPG key, remove <code>-S</code> from the command. This means you
need to authenticate yourself with your SSH pubkey. See the following
steps.</li>
</ul>
</li>
<li>
<p>According to feedbacks, you may run into problems with GPG signing here if
you&#39;re using Windows.</p>
<ul>
<li>
<p>You may try
<a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="noopener noreferrer" target="_blank">Windows Subsystem for Linux</a>.</p>
</li>
<li>
<p>Alternatively, a possible solution is provided in the comment section.
Run this command, then retry:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">export</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080"> GPG_TTY</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">=$(</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">tty</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">)</span></span></code></pre>
</li>
<li>
<p>Alternatively, authenticate yourself with SSH pubkey instead of GPG. See
the following steps.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>If you committed multiple times before, you need to squash all of your
changes into a single commit. Simply run the <code>./squash-my-commits</code> script to
do so.</p>
</li>
<li>
<p>Since others may have changed the registry while you&#39;re adding your files,
you need to update your repository:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Obtain registry updates</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">git</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fetch</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> origin</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> master</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Switch to your own branch</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">git</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> checkout</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> lantian-20200901/register</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Rebase your branch, effectively reapplying your changes on the latest registry</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># An editor will pop up after typing this line. You need to keep the &quot;pick&quot; in 1st line</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># and change all &quot;pick&quot; to &quot;squash&quot; starting from 2nd line (if they exist)</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># then save and exit your editor</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000">#</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># If you don&#39;t have a GPG key, remove -S from the command</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">git</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> rebase</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -i</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -S</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> origin/master</span></span></code></pre>
</li>
<li>
<p>Run <code>git push -f</code> to upload your changes to the Git server.</p>
</li>
<li>
<p>Back to <a href="https://git.dn42.dev/dn42/registry" rel="noopener noreferrer" target="_blank">dn42/registry</a>, send a Pull
Request and wait for your information to be merged.</p>
</li>
</ol>
<ul>
<li>If you&#39;re authenticating with SSH pubkey, firstly run <code>git log</code> to see the
hash of your commit, then run this command and post the result along with your
Pull Request:
<ul>
<li><code>echo [commit hash] | ssh-keygen -Y sign -f ~/.ssh/id_ed25519 -n dn42</code></li>
<li>Remember to replace with your commit hash and private key location.</li>
</ul>
</li>
<li>If there are some errors in your procedure or file contents, an admin will
reply to your Pull Request, fix them accordingly.</li>
<li>But you <strong>don&#39;t need to close your previous Pull Request and create a new
one</strong> after fixing your problem. Simply <code>git commit</code> and <code>git push</code> and your
later changes will be automatically linked to the Pull Request.
<ul>
<li>You need only one Pull Request per registration/information change.</li>
</ul>
</li>
<li><strong>Use ENGLISH</strong> for Pull Requests!</li>
</ul>
<p>After merging your information, you&#39;ve officially obtained your address block
and may start peering with others.</p>
<h2 id="finding-a-peer-node">Finding a Peer Node</h2>
<p>Since DN42 is a decentralized network, there is no official server to connect
to. You need to contact other users registered in DN42 just like you, create a
VPN tunnel connection and BGP session, to establish peering.</p>
<p>Here are some recommended places to find other users:</p>
<ol>
<li>Use <a href="https://dn42.us/peers" rel="noopener noreferrer" target="_blank">DN42 PingFinder</a>. Submit your IP address, and
server nodes of other users registered on PingFinder will test their latency
to you. These node entries usually have e-mail addresses or links to their
description pages for their DN42 AS. You may contact them with this
information.</li>
<li>Go to DN42&#39;s <a href="https://wiki.dn42.us/services/IRC" rel="noopener noreferrer" target="_blank">IRC channel</a>.</li>
<li>Go to this <a href="https://t.me/Dn42Chat" rel="noopener noreferrer" target="_blank">unofficial Telegram group</a>.</li>
<li><del>Directly go to Burble. Burble is a really active user in DN42 who has many
nodes around the world. Visit
<a href="https://dn42.burble.com/peering" rel="noopener noreferrer" target="_blank">his peering info page</a> to see his server
information and contacts.</del>
<ul>
<li>To reduce network centrality and avoid single point failure, Burble now
only accepts users with at least 2 already established peers.</li>
</ul>
</li>
<li>Directly go to me. Click <a href="/en/page/dn42/index.html">here</a> or the DN42 item on
the top navbar to see my information and contacts.</li>
</ol>
<p>You may peer with many people/nodes simultaneously. It increases the stability
of your network and prevents loss of connection when a single node fails.</p>
<p>Find a few nodes close to your server with low latency, and proceed downwards.</p>
<h1 id="very-important-system-configuration">Very Important System Configuration</h1>
<ul>
<li>
<p>First, <strong>MAKE SURE</strong> that you enabled Linux&#39;s packet forwarding, or
<code>ip_forwarding</code>.</p>
<ul>
<li>
<p>There is no absolute &quot;client&quot; in DN42. Everyone&#39;s server is a router for
others and needs to forward packets. The steps are:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">echo</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> &quot;net.ipv4.ip_forward=1&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &gt;&gt; </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">/etc/sysctl.conf</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">echo</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> &quot;net.ipv6.conf.default.forwarding=1&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &gt;&gt; </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">/etc/sysctl.conf</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">echo</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> &quot;net.ipv6.conf.all.forwarding=1&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &gt;&gt; </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">/etc/sysctl.conf</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">sysctl</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -p</span></span></code></pre>
</li>
<li>
<p>By the way, if you configured a firewall like <code>iptables</code>, check the
configuration and make sure they don&#39;t block packet forwarding.</p>
</li>
</ul>
</li>
<li>
<p>Then, <strong>MAKE SURE</strong> to disable Linux <code>rp_filter</code>&#39;s strict mode:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">echo</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> &quot;net.ipv4.conf.default.rp_filter=0&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &gt;&gt; </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">/etc/sysctl.conf</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">echo</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> &quot;net.ipv4.conf.all.rp_filter=0&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &gt;&gt; </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">/etc/sysctl.conf</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">sysctl</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -p</span></span></code></pre>
<ul>
<li><code>rp_filter</code> is a network security mechanism of the Linux kernel. It checks
the packet&#39;s source address and the source network interface:
<ul>
<li>If set to 0 (disabled), allow all packets.
<ul>
<li>Some packets that cannot be replied to correctly (no entries in the
routing table) will be processed by userspace applications, possibly
consuming extra resources.</li>
<li>But the overhead should be tiny, so setting to 0 is no issue here.</li>
</ul>
</li>
<li>If set to 1 (strict), if the packet doesn&#39;t come from the &quot;best&quot; network
interface (or in other words, your machine will reply to the packet on a
different network interface), the packet will be <strong>dropped</strong>.
<ul>
<li>Having different network interfaces for source and reply is <strong>very
common</strong> in DN42, so <strong>MAKE SURE</strong> you don&#39;t set <code>rp_filter</code> to 1!</li>
</ul>
</li>
<li>If set to 2 (relaxed), <strong>in theory</strong>, Linux will only drop packets that
don&#39;t have a source address in the routing table, which means it doesn&#39;t
know how to properly reply to them.
<ul>
<li>However, theory is just theory. In newer versions (5.0+) of the kernel,
still, a lot of normal packets with correct source addresses are
dropped. Therefore, don&#39;t use this mode, please stick to 0 instead.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Then, <strong>MAKE SURE</strong> to turn off any tool that helps you configure <code>iptables</code>
easily, such as UFW.</p>
<ul>
<li>These easy tools may use some assumptions that are suitable for personal
users but are not suitable for DN42, such as using conntrack.
<ul>
<li>Conntrack filters packets from links it hasn&#39;t seen before, effectively
doing strict <code>rp_filter</code>.</li>
</ul>
</li>
<li>I personally recommend you to configure iptable manually.</li>
</ul>
</li>
</ul>
<h2 id="choose-tunnel-software">Choose Tunnel Software</h2>
<p>Almost every peering in DN42 is established on tunneling software (or VPN)
since:</p>
<ul>
<li>DN42 nodes are spread across the world, and tunneling provides basic
encryption and protection;</li>
<li>DN42 uses private addresses that will be dropped by firewalls on the Internet.
What&#39;s worse, your ISP may think you are doing &quot;IP Spoofing&quot; which is a
violation of ToS and cause catastrophic consequences.</li>
</ul>
<p>But there are exceptions:</p>
<ul>
<li>Two nodes connected to the same internal network may be connected directly.
<ul>
<li>Examples are some NAT VPSes, or Alibaba Cloud servers with Classic
Networking.</li>
</ul>
</li>
</ul>
<p>Here is my recommendation for tunneling software:</p>
<ol>
<li>
<p>If you&#39;re using a Linux VPS or dedicated server, and you&#39;re not using OpenVZ
or LXC, use WireGuard.</p>
<ul>
<li>
<p>Pros:</p>
<ul>
<li>Extremely easy to configure</li>
<li>Little resource consumption</li>
<li>Good security</li>
</ul>
</li>
<li>
<p>Cons:</p>
<ul>
<li>Lack of features, only allow point-to-point connections</li>
<li>Needs extra kernel modules</li>
<li>Layer 3 only and doesn&#39;t support bridging</li>
</ul>
</li>
<li>
<p>If you&#39;re using OpenVZ or LXC, <code>wireguard-go</code> is not suggested. It&#39;s not
updated as frequently, and it&#39;s reported by other users to have stability
issues.</p>
</li>
<li>
<p>Installation, on Debian 10 (Buster) as an example:</p>
<ul>
<li>
<p>First, add Debian Backports repo:</p>
<ul>
<li>
<p>Edit <code>/etc/apt/sources.list</code>, add:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">deb</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> http://deb.debian.org/debian</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> buster-backports</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> main</span></span></code></pre>
</li>
</ul>
</li>
<li>
<p>Then, use DKMS to install WireGuard kernel modules and management tools:</p>
<ul>
<li><code>sudo apt update</code></li>
<li><code>sudo apt install wireguard-tools wireguard-dkms</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>If you&#39;re using OpenVZ or LXC VPS, use OpenVPN.</p>
<ul>
<li>Pros:
<ul>
<li>Extremely wide usage</li>
<li>Tons of tutorials</li>
<li>No need for any extra kernel module</li>
<li>Choose between Layer 2 and Layer 2</li>
</ul>
</li>
<li>Cons:
<ul>
<li>Being a bit complicated to configure</li>
<li>Less secure than WireGuard</li>
</ul>
</li>
<li>Installation <code>sudo apt install openvpn supervisor</code></li>
<li>Here, Supervisor is for managing processes. You may use others like
<code>systemd</code>.</li>
</ul>
</li>
<li>
<p>If you&#39;re using a hardware router from Cisco, Mikrotik, etc., you&#39;re usually
restricted to GRE/IPSec:</p>
<ul>
<li>Pros:
<ul>
<li>Wide use on hardware routers</li>
</ul>
</li>
<li>Cons:
<ul>
<li>Difficult to configure, may need repeated communication/discussions</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Or simply use plain GRE:</p>
<ul>
<li>Pro:
<ul>
<li>Available on hardware routers</li>
<li>Easy to configure</li>
</ul>
</li>
<li>Cons:
<ul>
<li><strong>NO ENCRYPTION! PLAINTEXT TRANSMISSION!</strong></li>
<li><strong>NO ENCRYPTION! PLAINTEXT TRANSMISSION!</strong></li>
<li><strong>NO ENCRYPTION! PLAINTEXT TRANSMISSION!</strong></li>
</ul>
</li>
</ul>
</li>
<li>
<p>On Linux servers, you may also use ZeroTier One for internal connections or
for peering.</p>
<ul>
<li>Pros:
<ul>
<li>Nice web interface</li>
<li>Fully automated IP assign</li>
</ul>
</li>
<li>Cons:
<ul>
<li>May consume much CPU and RAM</li>
<li>Not widely accepted in DN42</li>
</ul>
</li>
<li>Installation: <code>curl -s https://install.zerotier.com | sudo bash</code></li>
</ul>
</li>
</ol>
<h2 id="choose-bgp-software">Choose BGP Software</h2>
<p>The BGP protocol is used to exchange route information between DN42 users. Here
is a list of widely used, BGP supported routing software:</p>
<ol>
<li>
<p>BIRD Internet Routing Daemon <strong>(v2)</strong></p>
<ul>
<li>
<p>Supports various routing protocols, including BGP, OSPF, RIP, etc</p>
</li>
<li>
<p>Supports both IPv4 and IPv6</p>
</li>
<li>
<p>Clear configuration syntax yet powerful</p>
</li>
<li>
<p>ATTENTION: this is for BIRD2, which is different from BIRD1.</p>
</li>
<li>
<p>BIRD configuration is a bit complicated, so please refer to
<a href="https://wiki.dn42.us/howto/Bird2" rel="noopener noreferrer" target="_blank">DN42 Wiki&#39;s Bird2 Guide</a>, where a
copy-paste-able config is available.</p>
</li>
<li>
<p>You can directly use BIRD&#39;s official repo in Debian:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">wget</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -O</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> -</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> http://bird.network.cz/debian/apt.key</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> | </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">apt-key</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> add</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> -</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">apt-get</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> install</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> lsb-release</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">echo</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> &quot;deb http://bird.network.cz/debian/ $(</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">lsb_release</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -sc</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">) main&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &gt; </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">/etc/apt/sources.list.d/bird.list</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">apt-get</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> update</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">apt-get</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> install</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> bird2</span></span></code></pre>
<p>You may refer to
<a href="https://bird.network.cz/?download&tdir=debian/" rel="noopener noreferrer" target="_blank">BIRD&#39;s download page</a>.</p>
</li>
</ul>
</li>
<li>
<p>BIRD Internet Routing Daemon <strong>(v1)</strong></p>
<ul>
<li>
<p>Split IPv4 and IPv6 into two processes compared to V2</p>
</li>
<li>
<p>And lack some features, like Multiprotocol BGP, OSPFv3, etc</p>
<ul>
<li>But doesn&#39;t affect basic peerings</li>
</ul>
</li>
<li>
<p>Refer to <a href="https://wiki.dn42.us/howto/Bird" rel="noopener noreferrer" target="_blank">DN42 Wiki&#39;s Bird1 Guide</a>, where
a copy-paste-able config is available.</p>
</li>
<li>
<p>You can directly use BIRD&#39;s official repo in Debian:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">wget</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -O</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> -</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> http://bird.network.cz/debian/apt.key</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> | </span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">apt-key</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> add</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> -</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">apt-get</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> install</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> lsb-release</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">echo</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> &quot;deb http://bird.network.cz/debian/ $(</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">lsb_release</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -sc</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">) main&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> &gt; </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">/etc/apt/sources.list.d/bird.list</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">apt-get</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> update</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">apt-get</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> install</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> bird</span></span></code></pre>
<p>You may refer to
<a href="https://bird.network.cz/?download&tdir=debian/" rel="noopener noreferrer" target="_blank">BIRD&#39;s download page</a>.</p>
</li>
</ul>
</li>
<li>
<p>Quagga / FRRouting</p>
<ul>
<li>Syntax is similar to Cisco routers, so people with hardware router
experiences may like this</li>
<li>Might be the only available option for some routing OSes (like pfSense)</li>
<li>Refer to <a href="https://wiki.dn42.us/howto/Quagga" rel="noopener noreferrer" target="_blank">DN42 Wiki&#39;s Quagga Guide</a></li>
</ul>
</li>
<li>
<p>BGP functionality of hardware routers</p>
<ul>
<li>Supported by router manufacturer, and is usually rock stable</li>
<li>But might be limited in terms of extended functionality</li>
<li>And the configuration is different per vendor, so you have to do your own
research</li>
</ul>
</li>
</ol>
<h2 id="building-internal-network">Building Internal Network</h2>
<p>If you have multiple servers joining DN42, you need to configure your internal
network first. Your network needs to satisfy the following requirements to work
normally:</p>
<ol>
<li>Proper communication (or pingable) between any two servers
<ul>
<li>Routers outside your AS are only responsible for sending the packet to your
own AS, and the packet may enter from any node. Your own node needs to
forward the packet to the correct node.</li>
<li>You may use these schemes:
<ol>
<li>A full-mesh VPN with Tinc, ZeroTier One, etc., so any two servers can
talk directly.</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n (n-1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> point-to-point tunnels with OpenVPN, WireGuard,
etc., so any two servers can talk directly.</li>
<li><strong>(Relatively Dangerous)</strong> Use OpenVPN, WireGuard, etc., to create less
than <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{n (n-1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> tunnels, but make sure there is a path between
any two servers (intermediate nodes allowed). Then use Babel, OSPF, RIP,
etc., to find the path in your own network.</li>
</ol>
<ul>
<li>In this scheme, it&#39;s easy to make mistakes and <strong>cause catastrophic
failures</strong>.
<ul>
<li>Some real examples are available at
<a href="/en/article/modify-website/how-to-kill-the-dn42-network.lantian/">How to Kill the DN42 Network</a>.</li>
</ul>
</li>
<li>Routing protocols, including Babel, OSPF, RIP, etc., can automatically
detect the topology of your whole network and configure the routes.</li>
<li>But Babel, OSPF, RIP are only supposed to handle your internal routing,
and <strong>shouldn&#39;t be used to forward routes received externally from BGP!</strong>
<ul>
<li>When BGP routing information is forwarded by Babel, OSPF, RIP,
information such as source, route length, and BGP communities are all
lost.</li>
<li>Therefore, your other nodes will think that the route <strong>comes from your
own network</strong> and broadcast the route to others with your AS as the
source.</li>
<li>In short: you will <strong>hijack the whole DN42</strong>.</li>
</ul>
</li>
<li>Babel, OSPF, RIP should be strictly restricted to your own IP range.
<strong>External routing must be handled by BGP</strong>.</li>
<li>If you have questions, seek help at
<a href="https://t.me/Dn42Chat" rel="noopener noreferrer" target="_blank">the unofficial Telegram group</a>.</li>
</ul>
</li>
</ul>
</li>
<li>BGP configuration must satisfy one of:
<ol>
<li>One BGP session between each of your two servers.
<ul>
<li>BGP has a feature that, within one AS, a BGP node will only broadcast
routes that it <strong>received externally</strong> and <strong>won&#39;t forward</strong> routes it
received from other internal nodes in the AS. It is to prevent any
occurrence of route loops. Therefore, each server needs to establish BGP
sessions with all other servers, so it can obtain a complete routing
table.</li>
<li>If you have a lot of servers, you will have fun configuring each server
by hand. You may consider writing a script or using any plan below.</li>
</ul>
</li>
<li>Configure one server as a <code>BGP Route Reflector</code> and establish BGP sessions
with all other servers.
<ul>
<li>Route Reflector will manage and broadcast all routing information within
the AS.</li>
<li>Compared to the last scheme, you will need to do substantially less
configuration, but if the Route Reflector is down, your whole network is
dead.</li>
<li>Note that I haven&#39;t tried this configuration and cannot provide any
technical help.</li>
<li>If you have questions, seek help at
<a href="https://t.me/Dn42Chat" rel="noopener noreferrer" target="_blank">the unofficial Telegram group</a>, where some users
use this scheme.</li>
</ul>
</li>
<li>Configure a different private ASN at each node, and configure BGP
Confederation.
<ul>
<li>ASN should be in the private ASN range 4200000000 - 4294967294, but not
4242420000 - 4242429999 since it may overlap with other DN42 users.</li>
<li>With Confederation, multiple servers team together and appear as one AS
when observed externally.</li>
<li>See
<a href="/en/article/modify-website/bird-confederation.lantian">Bird BGP Confederation: Configuration and Emulation</a>.</li>
<li>If you have questions, seek help at
<a href="https://t.me/Dn42Chat" rel="noopener noreferrer" target="_blank">the unofficial Telegram group</a>, where some other
users also use this scheme.</li>
</ul>
</li>
</ol>
</li>
<li><strong>All your servers must finish the Very Important System Configuration.</strong></li>
</ol>
<h2 id="1xrtt-peering-faster-peering">&quot;1xRTT Peering&quot;: Faster Peering</h2>
<p>Most users in DN42 are in the United States or Europe. When I contact them from
China, due to the timezone differences, one communication cycle can be quite
lengthy. So we should configure our side as completely as possible based on the
public information of the other side. This makes debugging easier for others and
reduces the time consumption in repeated communications.</p>
<p>I have a list on my <a href="/en/page/dn42/index.html">DN42 Page</a>, including the
information I&#39;ll need when setting up the tunnel and BGP session and the steps
you should take.</p>
<p>Note that I don&#39;t have any special configuration/requirements, and the list is a
general requirement for almost any DN42 user. Therefore I suggest that you
follow the list and provide complete information.</p>
<p>Here is a copy of the list for reference:</p>

<ol>
<li>Choose a server from the list below. Usually, this will be the one with the
lowest latency (ping) to your server.
<ul>
<li>If you have multiple servers in DN42, I'm open to peering with all of them
at once.</li>
</ul>
</li>
<li>Choose a type of VPN for tunneling.
<ul>
<li>I usually prefer WireGuard and OpenVPN, but others such as GRE/Plain and
ZeroTier will also work.
<ul>
<li>GRE/IPSec configuration is extremely complicated, and different IPSec
implementations usually have severe compatibility issues, so it may take
days or even weeks to debug. Therefore, <strong>I no longer accept GRE/IPSec
tunnels</strong>, and existing tunnels may be disconnected at any time.</li>
</ul>
</li>
<li><strong>WARN: I DO NOT peer with servers in mainland China to avoid possible
legal issues.</strong></li>
<li>I'm also willing to try new types of VPNs - just ask!</li>
</ul>
</li>
<li>Configure BGP daemon and VPN software on your side. You may assume I will use
the following configuration:
<ul>
<li>My General Information:
<ul>
<li>ASN: <strong>4242422547</strong></li>
<li>Public IP: listed below</li>
<li>DN42 IPv4 (IP used in the tunnel on my end): listed below
<ul>
<li>If you need an address block (such as /30) for the IPv4 tunnel, it will
come out of your address space.</li>
<li>This is usually needed for hardware routers, such as Mikrotik.</li>
</ul>
</li>
<li>DN42 IPv6: <strong>fe80::2547</strong> for peering over link-local addresses
<ul>
<li>If you need an address block (such as /64) for the IPv6 tunnel, it will
come out of your address space.</li>
</ul>
</li>
<li>Multiprotocol BGP (MP-BGP):
<ul>
<li>Although I support MP-BGP, I still configure two BGP sessions (1 IPv4 &#x26;
1 IPv6) by default.</li>
<li>If you also support MP-BGP and only need one session, just let me know.</li>
</ul>
</li>
</ul>
</li>
<li>For creating a tunnel connection:
<ul>
<li>WireGuard/OpenVPN port on my side: <strong>last 5 digits of your ASN</strong>
<ul>
<li>e.g., 4242420001 means I will use port 20001</li>
</ul>
</li>
<li>OpenVPN static key: generated by you, sent to me later</li>
<li>OpenVPN default configuration: show below
<ul>
<li>If you can't use my default configuration, set something suitable for
you and send it to me</li>
</ul>
</li>
<li>ZeroTier One: I will request to join your network
<ul>
<li>You may try to invite my server to your network, if possible</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Send the following information via email to <strong><a href="mailto:dn42@lantian.pub">dn42@lantian.pub</a></strong>:
<ul>
<li>Your General Information:
<ul>
<li>ASN</li>
<li>Public IP
<ul>
<li>I prefer IPv4 since IPv6 is tunneled on some of my servers (HE.NET
Tunnelbroker)</li>
</ul>
</li>
<li>DN42 IPv4 and IPv6 (IP used in the tunnel on your end)
<ul>
<li>Or address blocks, if you need them for the tunnel</li>
<li>Including link-local address for IPv6 peering</li>
</ul>
</li>
<li>The server you want to peer with</li>
</ul>
</li>
<li>For creating a tunnel connection:
<ul>
<li>WireGuard/OpenVPN port on your side
<ul>
<li>I will assume 22547 if you don't specify</li>
</ul>
</li>
<li>OpenVPN static key (generated by you)</li>
<li>ZeroTier One: Your network ID (I will request to join your network)</li>
<li>OpenVPN custom configuration (if necessary)</li>
</ul>
</li>
</ul>
</li>
<li>Wait till I set up the tunnel and the peering, and respond to your email.
Usually, the peering is successful by now.
<ul>
<li>You may use <a href="https://lg.lantian.pub/" rel="noopener noreferrer" target="_blank">my Looking Glass</a> to debug our
connection.</li>
</ul>
</li>
</ol>
<h2 id="tunnel-setup-wireguard">Tunnel Setup: WireGuard</h2>
<p>DN42 Wiki has a WireGuard configuration guide available. I made minor
modifications to it so that it&#39;s clearer.</p>
<p>First, run <code>wg genkey | tee privatekey | wg pubkey &gt; publickey</code> to generate your
public/private key pair. This is the only authentication info in a WireGuard
tunnel, so don&#39;t leak the private key.</p>
<p>Then create a configuration file <code>[PEER_NAME].conf</code>:</p>

<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">[Interface]</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Your WireGuard private key</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">PrivateKey</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> =</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ABCDEFABCDEFABCDEFABCDEFABCDEFABCDEFABCDEFA=</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Port number on your side</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ListenPort</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> =</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 22547</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">Table</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> =</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> off</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Add your link-local IPv6 (fe80::1234 in this case)</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">PostUp</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> =</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ip</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> addr</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> add</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fe80::1234/64</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dev</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> %i</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Add your DN42 IPv6 address (fd12:3456:7890::1 in this case)</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">PostUp</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> =</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ip</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> addr</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> add</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fd12:3456:7890::1/128</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dev</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> %i</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># First IP is your DN42 IPv4, second is mine</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">PostUp</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> =</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ip</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> addr</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> add</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 172.21.2.3</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> peer</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 172.22.76.185</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dev</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> %i</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">PostUp</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> =</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> sysctl</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -w</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> net.ipv6.conf.%i.autoconf=</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">[Peer]</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Set to my (or your peer's) public key</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">PublicKey</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> =</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> zyATu8FW392WFFNAz7ZH6+4TUutEYEooPPirwcoIiXo=</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Set to my (or your peer's) node IP and port, the port is last 5 digits of your ASN</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">Endpoint</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> =</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> hostdare.lantian.pub:21234</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">AllowedIPs</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> =</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 10.0.0.0/8,</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 172.20.0.0/14,</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 172.31.0.0/16,</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fd00::/8,</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fe80::/64</span></span></code></pre>
<p>Then run <code>wg-quick up [PEER_NAME].conf</code> to set up the tunnel.</p>
<h2 id="tunnel-setup-openvpn">Tunnel Setup: OpenVPN</h2>
<p>DN42 Wiki also provided an OpenVPN configuration template. I made minor
modifications to it so that it&#39;s clearer.</p>

<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">proto</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">         udp</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mode</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">          p2p</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># my (or your peer's) server IP</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">remote</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">        185.186.147.110</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># my (or your peer's) tunnel port, last 5 digits of your ASN</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">rport</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">         21234</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># your server IP</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">local</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">         12</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">34</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">56</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">78</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># your tunnel port, usually 22547 (or last 5 digits of your peer's ASN)</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">lport</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">         22547</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">dev-type</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">      tun</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">resolv-retry</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">  infinite</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">dev</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">           dn42-lantian</span><span style="--shiki-dark:#6A9955;--shiki-light:#008000">    # change to whatever you want</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">comp-lzo</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">persist-key</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">persist-tun</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">tun-ipv6</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">cipher</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">        aes-256-cbc</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># first is your DN42 IPv4, second is mine (or your peer's)</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ifconfig</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">      172.21.2.3</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 172.22.76.185</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># first is your link-local IPv6, second is mine (or your peer's)</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ifconfig-ipv6</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fe80::1234</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fe80::2547</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Post-up script that:</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># 1. Remove stable-privacy IPv6 address</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># 2. Assigns preferred outbound IPv6 address (fd12:3456:7890::1 in this case)</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">script-security</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 2</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">up</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> "/bin/sh -c '/sbin/sysctl -w net.ipv6.conf.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">$dev</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">.autoconf=0 &#x26;&#x26; /sbin/sysctl -w net.ipv6.conf.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">$dev</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">.accept_ra=0 &#x26;&#x26; /sbin/sysctl -w net.ipv6.conf.</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">$dev</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">.addr_gen_mode=1 &#x26;&#x26; /sbin/ip addr add fd12:3456:7890::1/128 dev </span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">$dev</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">'"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Set to static key for our tunnel</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Generated with openvpn --genkey --secret static.key</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">&#x3C;secret></span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">-----BEGIN</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> OpenVPN</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> Static</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> key</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> V1-----</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">0123456789abcdef0123456789abcdef</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># ...</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># key contents</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># ...</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">0123456789abcdef0123456789abcdef</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">-----END</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> OpenVPN</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> Static</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> key</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> V1-----</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">&#x3C;/secret></span></span></code></pre>
<h2 id="limit-traffic-on-dn42-interfaces">Limit Traffic on DN42 Interfaces</h2>
<p>The tunnel established during a DN42 peering usually allows traffic to any IP
(unless you set AllowedIPs for WireGuard), and this creates a risk: your peer
can inject packets destined for public IPs to your tunnel, and your node will
forward them to the public Internet, under your name. If your peer is exploiting
this for a network attack, you will be in great trouble.</p>
<p>Therefore, it&#39;s recommended that you set up iptables rules to block forwarding
from your peers to the Internet.</p>
<blockquote>
<p>Note: you don&#39;t need this if you only use WireGuard. WireGuard already has IP
limitations built-in.</p>
</blockquote>
<p>The following rules will restrict traffic to DN42 IP ranges on all interfaces
with name starting with <code>dn42-</code>:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -N</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -s</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 172.20.0.0/14</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -s</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 172.31.0.0/16</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -s</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 10.0.0.0/8</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -s</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 224.0.0.0/4</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> REJECT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> INPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -i</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42+</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -N</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -d</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 172.20.0.0/14</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -d</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 172.31.0.0/16</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -d</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 10.0.0.0/8</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -d</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 224.0.0.0/4</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> REJECT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> OUTPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -o</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42+</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -N</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -s</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fd00::/8</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -s</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fe80::/10</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -s</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ff00::/8</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> REJECT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> INPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -i</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42+</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -N</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -d</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fd00::/8</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -d</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fe80::/10</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -d</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ff00::/8</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> ACCEPT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> REJECT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> OUTPUT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -o</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42+</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> FORWARD</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -i</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42+</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">iptables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> FORWARD</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -o</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42+</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> FORWARD</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -i</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42+</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_INPUT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">ip6tables</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -A</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> FORWARD</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -o</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42+</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> -j</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> DN42_OUTPUT</span></span></code></pre>
<h2 id="bgp-session-setup-bird-v1--v2">BGP Session Setup: BIRD v1 &amp; v2</h2>
<p>I will only talk about the configuration of BIRD v1 and v2 since they are the
most widely used. I assume you have finished the setup following the Wiki but
don&#39;t have any peers.</p>
<ul>
<li><a href="https://wiki.dn42.us/howto/Bird2" rel="noopener noreferrer" target="_blank">DN42 Wiki&#39;s Bird2 Guide</a></li>
<li><a href="https://wiki.dn42.us/howto/Bird" rel="noopener noreferrer" target="_blank">DN42 Wiki&#39;s Bird1 Guide</a></li>
</ul>
<p>For BIRD v1, what you need is:</p>

<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Add to /etc/bird/peers4/dn42_lantian.conf</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Rename dn42_lantian to whatever you want</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">protocol</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> bgp</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42_lantian</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dnpeers</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> {</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000">    # Set to my (or your peer's) DN42 IPv4 address and ASN</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">    neighbor</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 172.22.76.185</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> as</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 4242421234</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">    direct</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Add to /etc/bird/peers4/dn42_lantian.conf</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Rename dn42_lantian to whatever you want</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">protocol</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> bgp</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42_lantian</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dnpeers</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> {</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000">    # Set to my (or your peer's) link-local IPv6, the tunnel's interface name, and ASN</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">    neighbor</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fe80::1234</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> %</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 'dn42-lantian'</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> as</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 4242421234</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">    direct</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">};</span></span></code></pre>
<p>For BIRD v2, what you need is:</p>

<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Add to /etc/bird/peers/dn42_lantian.conf</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Rename dn42_lantian_v4 to whatever you want</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">protocol</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> bgp</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42_lantian_v4</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dnpeers</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> {</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000">    # Set to my (or your peer's) DN42 IPv4 address and ASN</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">    neighbor</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 172.22.76.185</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> as</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 4242421234</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">    direct</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000">    # Disable IPv6 route exchange in IPv4 BGP, strongly recommended</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">    ipv6</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">        import</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> none</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">        export</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080"> none</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">    };</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Rename dn42_lantian_v6 to whatever you want</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">protocol</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> bgp</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dn42_lantian_v6</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> from</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> dnpeers</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> {</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000">    # Set to my (or your peer's) link-local IPv6, the tunnel's interface name, and ASN</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">    neighbor</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fe80::1234</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> %</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 'dn42-lantian'</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> as</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 4242421234</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">    direct</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000">    # Disable IPv4 route exchange in IPv6 BGP</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000">    # You may remove these statements if you want to use "multiprotocol BGP" (MP-BGP)</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">    ipv4</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> {</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">        import</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> none</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">        export</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080"> none</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">;</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">    };</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">};</span></span></code></pre>
<h2 id="network-test--bonus">Network Test &amp; Bonus</h2>
<p>After finishing all the setup above, you have successfully entered the DN42
network. Now you can perform some tests:</p>
<ul>
<li><code>ping 172.20.0.53</code> or <code>ping 172.23.0.53</code>, this is the Anycast DNS in DN42.</li>
<li><code>ping 172.23.0.80</code>, this is the internal IP address of DN42 Wiki.</li>
<li>Try
<a href="https://wiki.dn42.us/internal/Internal-Services" rel="noopener noreferrer" target="_blank">Internal Services on DN42 Wiki</a>,
<a href="https://dn42.burble.com/home/burble-dn42-services" rel="noopener noreferrer" target="_blank">Burble&#39;s Services</a>.</li>
</ul>
<p>You can also challenge yourself and change your tunnel and BGP config, add more
functionalities and improve performance and/or safety:</p>
<ul>
<li>ROA, or Route Origin Authorization, checks if a route comes from the AS it&#39;s
supposed to. For example, my <code>172.22.76.184/29</code> should come from <code>4242422547</code>.
Routes failing the check will be rejected;
<ul>
<li>DN42 Wiki has a ROA configuration guide for BIRD: see
<a href="https://wiki.dn42.us/howto/Bird2" rel="noopener noreferrer" target="_blank">Bird2</a> or
<a href="https://wiki.dn42.us/howto/Bird" rel="noopener noreferrer" target="_blank">Bird1</a></li>
</ul>
</li>
<li>Community Filter, that assigns scores to links in DN42 based on latency,
bandwidth, and encryption, and selects a faster route based on them
<ul>
<li>For Bird1, refer to
<a href="https://wiki.dn42.us/howto/Bird-communities" rel="noopener noreferrer" target="_blank">DN42 Wiki&#39;s Bird Communities Page</a>.
For Bird2, changes are needed, and you may try out yourself</li>
</ul>
</li>
<li>Anycast, aka multiple servers announcing the same IP, so that external
requests will be directed to the nearest server
<ul>
<li>Usually used for DNS on the global Internet, but in DN42, the Wiki
(172.23.0.80) is also anycasted.</li>
<li>I&#39;ve written two posts on this, one in last year and one in this year: see
<a href="/en/article/modify-website/dn42-docker-anycast-dns.lantian">Building Anycast DNS with Docker in DN42</a>
and
<a href="/en/article/modify-website/docker-share-network-namespace-bird-high-availability.lantian">Sharing Network Namespace Among Docker Containers for Bird Anycasting</a>.</li>
</ul>
</li>
<li>Build your own recursive or authoritative DNS server
<ul>
<li>You may even apply to join DN42&#39;s DNS Anycast and become a DN42 official DNS
server.</li>
</ul>
</li>
<li>Register a domain and create a website
<ul>
<li>See my post in 2018:
<a href="/en/article/modify-website/register-own-domain-in-dn42.lantian">Register Domain in DN42</a></li>
</ul>
</li>
<li>Or register an AS on the real Internet with RIPE, rent a public IPv4 and IPv6
address pool, and start doing it for real.</li>
</ul>
<h2 id="need-help">Need Help?</h2>
<p>Remember: DN42 is an <strong>experimental network</strong> where everyone helps everyone.
Nobody is going to blame you if you screwed up. You may seek help at DN42&#39;s
<a href="https://wiki.dn42.us/services/IRC" rel="noopener noreferrer" target="_blank">IRC channel</a>,
<a href="https://wiki.dn42.us/contact#contact_mailing-list" rel="noopener noreferrer" target="_blank">mailing list</a> or the
<a href="https://t.me/Dn42Chat" rel="noopener noreferrer" target="_blank">unofficial Telegram group</a>.</p>  </div>  <div class="clearfix" id="post-navi" data-astro-cid-gfbmwgei=""> <div class="float-end text-end" data-astro-cid-gfbmwgei=""> <a href="/en/article/modify-website/serve-dn42-whois-with-nginx.lantian/" title="Setting up DN42 WHOIS Server with Nginx" data-astro-cid-gfbmwgei=""> Setting up DN42 WHOIS Server with Nginx </a> <br data-astro-cid-gfbmwgei=""> Next post »
</div> <div class="float-start text-start position-absolute" data-astro-cid-gfbmwgei="">
« Previous post <br data-astro-cid-gfbmwgei=""> <a href="/en/article/modify-website/lookup-any-whois-with-nginx.lantian/" title="Lookup Any Public WHOIS with this nginx-based Server" data-astro-cid-gfbmwgei=""> Lookup Any Public WHOIS with this nginx-based Server </a> </div> </div>  <div id="waline" data-waline-language="en-US" data-waline-path="/en/article/modify-website/dn42-experimental-network-2020.lantian"></div> <script type="module" src="/assets/WalineComment.astro_astro_type_script_index_0_lang.Dqib3X1E.js"></script>  </div> </div> </article>  </div> <aside class="d-none d-xl-block"> <section class="widget"> <h3>Latest posts</h3> <ul class="list-unstyled"> <li> 07-20  <a href="/en/article/modify-computer/legal-lte-network-at-home-with-open5gs.lantian/">Legal LTE Network at Home with Open5GS</a> </li><li> 06-27  <a href="/en/article/modify-computer/sidestore-without-stosvpn-across-lan.lantian/">Using SideStore without StosVPN across your LAN</a> </li><li> 05-19  <a href="/en/article/modify-computer/nix-logarithmetic-math-library-from-zero.lantian/">Nix Logarithmic Math Library from Ground Zero</a> </li><li> 04-06  <a href="/en/article/modify-computer/legal-lte-network-at-home-for-100-bucks.lantian/">Legal LTE Network at Home for $100</a> </li><li> 02-10  <a href="/en/article/modify-computer/build-custom-android-kernel-with-nix.lantian/">Building Custom Android Kernel with Nix</a> </li><li> 04-20  <a href="/en/article/modify-website/migrate-blog-to-astro-js.lantian/">Migrating My Blog to Astro.js</a> </li><li> 12-16  <a href="/en/article/modify-computer/nixos-low-ram-vps.lantian/">NixOS Series 5: Creating Disk Image for Low RAM VPS</a> </li><li> 09-20  <a href="/en/article/modify-computer/nix-trigonometric-math-library-from-zero.lantian/">Nix Trigonometric Math Library from Ground Zero</a> </li><li> 05-29  <a href="/en/article/random-notes/pipewire-sigkill-fix.lantian/">Preventing Pipewire from being SIGKILLed</a> </li><li> 05-12  <a href="/en/article/modify-website/how-to-kill-the-dn42-network.lantian/">How to Kill the DN42 Network (Updated 2023-05-12)</a> </li><li> 05-08  <a href="/en/article/modify-computer/laptop-muxed-nvidia-passthrough.lantian/">NVIDIA GPU Passthrough on an Optimus MUXed Laptop (Updated 2023-05)</a> </li><li> 04-17  <a href="/en/article/random-notes/fix-china-telecom-roaming-no-4g-on-aosp-rom.lantian/">Fix China Telecom 4G Roaming on AOSP ROM by Changing APN</a> </li><li> 03-26  <a href="/en/article/random-notes/old-hp-workstation-as-all-in-one.lantian/">Notes on Setting Up NAS+Router on Old HP Workstation</a> </li><li> 01-14  <a href="/en/article/modify-computer/nixos-impermanence.lantian/">NixOS Series 4: &quot;Stateless&quot; Operating System</a> </li><li> 06-21  <a href="/en/article/modify-computer/nixos-packaging.lantian/">NixOS Series 3: Software Packaging 101</a> </li> </ul> </section> <section class="widget"> <h3>Latest comments</h3> <ul class="list-unstyled" id="recent-comments">  <li><a href="#">Loading...</a></li>  </ul> </section> <script type="module">const i=window.location.hostname=="localhost"?"https://comments.lantian.pub":window.location.origin;fetch(`${i}/api/comment?type=recent&count=10`).then(t=>{if(t.status!==200)throw new Error(`Server returned bad HTTP status ${t.status}`);return t.json()}).then(t=>{const e=document.getElementById("recent-comments");e&&(e.innerHTML=t.data.map(n=>{const o=n.comment.replace(/(<([^>]+)>)/gi,"");return"<li>"+n.nick+' <a href="'+n.url+'">'+o+"</a></li>"}).join(""))});</script> <section class="widget"> <h3>Others</h3> <ul class="list-unstyled">  <li> <i class="fas fa-fw fa-rss"></i>  <a href="/rss2.xml" target="_blank">RSS Feed</a> |  <a href="/feed.xml" target="_blank">Atom</a> |  <a href="/feed.json" target="_blank">JSON</a> </li> <li> <i class="fas fa-fw fa-globe"></i>  <a href="https://stats.uptimerobot.com/BLK6VsRkR" target="_blank"> Sever Status </a> </li> <li> <i class="fas fa-fw fa-sitemap"></i>  <a href="https://lg.lantian.pub" target="_blank">DN42 Looking Glass</a> </li> <li> <i class="fas fa-fw fa-link"></i>  <a href="gopher://lantian.pub" target="_blank">Access with Gopher protocol</a> </li>  </ul> </section> <section class="widget"> <h3>Links</h3> <ul class="list-unstyled"> <li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://0x7f.cc"> 0x7f Blog 🐑 </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="http://foreverblog.cn"> 10 Year&#39;s Promise (Forever Blog) </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://alanyhq.com"> Alanyhq </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://blog.baoshuo.ren/?utm_source=friends"> Baoshuo&#39;s Blog </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://blog.cas7.moe"> Blog of Moecast </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://jerryxiao.cc"> JerryXiao </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://sangsir.com"> SangSir </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://snli.org"> Shucheng Li </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://yuetau.net"> YuetAu&#39;s Spot </a> </li> </ul> </section> </aside> </div> <footer class="lantian clearfix" data-astro-cid-w3csb3e3="">  <div id="copyright" class="float-end text-end" data-astro-cid-w3csb3e3=""> <i class="fas fa-copyright" data-astro-cid-w3csb3e3=""></i> 2012-2025 Lan Tian @ Blog<br data-astro-cid-w3csb3e3=""> <small data-astro-cid-w3csb3e3=""> Powered by Astro v5.15.1 @ 2025-10-25 23:46:38 </small> </div> <script type="module">function v(c,o,r){const h=/^localhost$|^127(?:\.[0-9]+){0,2}\.[0-9]+$|^(?:0*:)*?:?0*1$/.test(location.hostname)||location.protocol==="file:";if(!o.trackLocalhost&&h)return console.warn("[Plausible] Ignoring event because website is running locally");try{if(window.localStorage.plausible_ignore==="true")return console.warn('[Plausible] Ignoring event because "plausible_ignore" is set to "true" in localStorage')}catch{}const p={n:c,u:o.url,d:o.domain,r:o.referrer,w:o.deviceWidth,h:o.hashMode?1:0,p:r&&r.props?JSON.stringify(r.props):void 0},s=new XMLHttpRequest;s.open("POST",`${o.apiHost}/api/event`,!0),s.setRequestHeader("Content-Type","text/plain"),s.send(JSON.stringify(p)),s.onreadystatechange=()=>{s.readyState===4&&r&&r.callback&&r.callback()}}function b(c){const o=()=>({hashMode:!1,trackLocalhost:!1,url:location.href,domain:location.hostname,referrer:document.referrer||null,deviceWidth:window.innerWidth,apiHost:"https://plausible.io",...c}),r=(t,n,i)=>{v(t,{...o(),...i},n)},h=(t,n)=>{r("pageview",n,t)};return{trackEvent:r,trackPageview:h,enableAutoPageviews:()=>{const t=()=>h(),n=history.pushState;return n&&(history.pushState=function(i,l,u){n.apply(this,[i,l,u]),t()},addEventListener("popstate",t)),c&&c.hashMode&&addEventListener("hashchange",t),h(),function(){n&&(history.pushState=n,removeEventListener("popstate",t)),c&&c.hashMode&&removeEventListener("hashchange",t)}},enableAutoOutboundTracking:(t=document,n={subtree:!0,childList:!0,attributes:!0,attributeFilter:["href"]})=>{function i(e){r("Outbound Link: Click",{props:{url:this.href}}),typeof process<"u"&&process,setTimeout(()=>{location.href=this.href},150),e.preventDefault()}const l=new Set;function u(e){e instanceof HTMLAnchorElement?e.host!==location.host&&(e.addEventListener("click",i),l.add(e)):"querySelectorAll"in e&&e.querySelectorAll("a").forEach(u)}function f(e){e instanceof HTMLAnchorElement?(e.removeEventListener("click",i),l.delete(e)):"querySelectorAll"in e&&e.querySelectorAll("a").forEach(f)}const d=new MutationObserver(e=>{e.forEach(a=>{a.type==="attributes"?(f(a.target),u(a.target)):a.type==="childList"&&(a.addedNodes.forEach(u),a.removedNodes.forEach(f))})});return t.querySelectorAll("a").forEach(u),d.observe(t,n),function(){l.forEach(a=>{a.removeEventListener("click",i)}),l.clear(),d.disconnect()}}}}const g=b({domain:"lantian.pub",trackLocalhost:!0,apiHost:""});g.trackPageview();</script> </footer>  </div>  </body> </html>