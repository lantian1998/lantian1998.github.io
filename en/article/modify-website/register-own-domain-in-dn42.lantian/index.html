<!DOCTYPE html><html lang="en-US" itemscope="" itemtype="https://schema.org/Article" data-astro-cid-porej7z2=""> <head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Registering Domain in DN42 - Lan Tian @ Blog</title><script>
  ;(() => {
    try {
      const mode = localStorage.getItem('user-color-scheme')
      if (mode == 'dark' || mode == 'light') {
        document.documentElement.setAttribute('data-user-color-scheme', mode)
      }
    } catch {
      // Ignore errors
    }
  })()
</script><link rel="stylesheet" href="/assets/index.CUlf1-Vz.css"><style>#post-navi[data-astro-cid-gfbmwgei]{padding:5px;border-top:1px solid var(--lt-border-weak);border-bottom:1px solid var(--lt-border-weak)}
ol[data-astro-cid-nj3qel45]{margin:0;padding:0;line-height:1.5}ol[data-astro-cid-nj3qel45] .toc-item[data-astro-cid-nj3qel45]{list-style:none}ol[data-astro-cid-nj3qel45] .toc-child[data-astro-cid-nj3qel45],ol[data-astro-cid-nj3qel45] .toc[data-astro-cid-nj3qel45]{padding:0}ol[data-astro-cid-nj3qel45] .toc-link[data-astro-cid-nj3qel45]{display:block;margin-left:1em;padding:.25em 0}ol[data-astro-cid-nj3qel45] .toc-level-1[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-2[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-3[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-4[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-5[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-6[data-astro-cid-nj3qel45]:before{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:1em;padding:.25em 0;float:left;font-style:normal;font-variant:normal;font-weight:900;font-family:Font Awesome\ 6 Free;font-feature-settings:normal;text-align:center}ol[data-astro-cid-nj3qel45] .toc-level-1[data-astro-cid-nj3qel45]:before{content:""}ol[data-astro-cid-nj3qel45] .toc-level-2[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-3[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-4[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-5[data-astro-cid-nj3qel45]:before,ol[data-astro-cid-nj3qel45] .toc-level-6[data-astro-cid-nj3qel45]:before{content:""}.post-info-wrap[data-astro-cid-dckccua4]{-ms-flex:0 0 2.5em;flex:0 0 2.5em;background-color:var(--lt-component-bg-emphasis)}@media(min-width:768px){.post-info[data-astro-cid-dckccua4]{position:sticky;top:0}}@media(max-width:767.98px){.post-info[data-astro-cid-dckccua4]{position:absolute}}
</style><script type="module" src="/assets/PageLayout.astro_astro_type_script_index_0_lang.C1wfUPs6.js"></script><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Referrer-Policy" content="no-referrer, strict-origin-when-cross-origin"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="imagemode" content="force"><meta name="nightmode" content="disable"><meta name="wap-font-scale" content="no"><meta name="title" content="Registering Domain in DN42 - Lan Tian @ Blog"><meta name="keywords" content=""><meta name="author" content="Lan Tian"><link rel="canonical" href="https://lantian.pub/en/article/modify-website/register-own-domain-in-dn42.lantian/"><link rel="alternate" type="application/rss+xml" title="Lan Tian @ Blog" href="https://lantian.pub/rss2.xml"><link rel="alternate" type="application/atom+xml" title="Lan Tian @ Blog" href="https://lantian.pub/feed.xml"><link rel="alternate" href="https://lantian.pub/article/modify-website/register-own-domain-in-dn42.lantian/" hreflang="zh"><link rel="alternate" href="https://lantian.pub/en/article/modify-website/register-own-domain-in-dn42.lantian/" hreflang="en"><meta name="copyright" content="Copyright 2012-2025 Lan Tian @ Blog"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="48x48" href="/favicon-48x48.png"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="manifest" href="/manifest.webmanifest"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#03a9f4"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#212121"><meta name="application-name" content="Lan Tian @ Blog"><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="167x167" href="/apple-touch-icon-167x167.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><link rel="apple-touch-icon" sizes="1024x1024" href="/apple-touch-icon-1024x1024.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-precomposed.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#03a9f4"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="Lan Tian @ Blog"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-640x1136.png"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1136x640.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-750x1334.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1334x750.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1125x2436.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2436x1125.png"><link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1170x2532.png"><link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2532x1170.png"><link rel="apple-touch-startup-image" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1179x2556.png"><link rel="apple-touch-startup-image" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2556x1179.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-828x1792.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-1792x828.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2688.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2688x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1242x2208.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2208x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1284x2778.png"><link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2778x1284.png"><link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/apple-touch-startup-image-1290x2796.png"><link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/apple-touch-startup-image-2796x1290.png"><link rel="apple-touch-startup-image" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1488x2266.png"><link rel="apple-touch-startup-image" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2266x1488.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1536x2048.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2048x1536.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1620x2160.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1620.png"><link rel="apple-touch-startup-image" media="(device-width: 820px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1640x2160.png"><link rel="apple-touch-startup-image" media="(device-width: 820px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2160x1640.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2388.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2388x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-1668x2224.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2224x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/apple-touch-startup-image-2048x2732.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/apple-touch-startup-image-2732x2048.png"><meta name="msapplication-TileColor" content="#bbdefb"><meta name="msapplication-TileImage" content="/mstile-144x144.png"><meta name="msapplication-config" content="/browserconfig.xml"><link rel="yandex-tableau-widget" href="/yandex-browser-manifest.json"><meta property="og:url" content="https://lantian.pub/en/article/modify-website/register-own-domain-in-dn42.lantian/"><meta property="og:type" content="website"><meta property="og:title" content="Registering Domain in DN42 - Lan Tian @ Blog"><meta property="og:image" content="https://lantian.pub/usr/uploads/2018/04/2335363675.png"><meta content="DN42, aka Decentralized Network 42, is a large VPN network. Unlike traditional VPNs, DN42 uses a lot of technology involved in Internet backbones (such as BGP) and is a great simulation of a realistic network environment. In a previous post , I joined DN42 and connected most of my VPSes to it. (The ones left are OpenVZ VPSes without Tun/Tap support.) I knew from the beginning that DN42 has its own domain name system. For example, DN42's wiki ( https://wiki.dn42.us/Home ) can be accessed as https://internal.dn42 in DN42. I didn't register a domain back then since I didn't have time, and I didn't have much knowledge of DN42. I finished the registration this month and would like to share my experience. Building Authoritative DNS An authoritative DNS is responsible for a domain's records...."><meta property="og:site_name" content="Lan Tian @ Blog"><meta property="og:locale" content="en"><meta name="twitter:card" content="summary"><meta name="twitter:url" content="https://lantian.pub/en/article/modify-website/register-own-domain-in-dn42.lantian/"><meta name="twitter:title" content="Registering Domain in DN42 - Lan Tian @ Blog"><meta property="twitter:image" content="https://lantian.pub/usr/uploads/2018/04/2335363675.png"><meta content="DN42, aka Decentralized Network 42, is a large VPN network. Unlike traditional VPNs, DN42 uses a lot of technology involved in Internet backbones (such as BGP) and is a great simulation of a realistic network environment. In a previous post , I joined DN42 and connected most of my VPSes to it. (The ones left are OpenVZ VPSes without Tun/Tap support.) I knew from the beginning that DN42 has its own domain name system. For example, DN42's wiki ( https://wiki.dn42.us/Home ) can be accessed as https://internal.dn42 in DN42. I didn't register a domain back then since I didn't have time, and I didn't have much knowledge of DN42. I finished the registration this month and would like to share my experience. Building Authoritative DNS An authoritative DNS is responsible for a domain's records...."><meta name="twitter:dnt" content="on"><meta itemprop="name" content="Registering Domain in DN42 - Lan Tian @ Blog"><meta property="image" content="https://lantian.pub/usr/uploads/2018/04/2335363675.png"><meta content="DN42, aka Decentralized Network 42, is a large VPN network. Unlike traditional VPNs, DN42 uses a lot of technology involved in Internet backbones (such as BGP) and is a great simulation of a realistic network environment. In a previous post , I joined DN42 and connected most of my VPSes to it. (The ones left are OpenVZ VPSes without Tun/Tap support.) I knew from the beginning that DN42 has its own domain name system. For example, DN42's wiki ( https://wiki.dn42.us/Home ) can be accessed as https://internal.dn42 in DN42. I didn't register a domain back then since I didn't have time, and I didn't have much knowledge of DN42. I finished the registration this month and would like to share my experience. Building Authoritative DNS An authoritative DNS is responsible for a domain's records...."><meta content="DN42, aka Decentralized Network 42, is a large VPN network. Unlike traditional VPNs, DN42 uses a lot of technology involved in Internet backbones (such as BGP) and is a great simulation of a realistic network environment. In a previous post , I joined DN42 and connected most of my VPSes to it. (The ones left are OpenVZ VPSes without Tun/Tap support.) I knew from the beginning that DN42 has its own domain name system. For example, DN42's wiki ( https://wiki.dn42.us/Home ) can be accessed as https://internal.dn42 in DN42. I didn't register a domain back then since I didn't have time, and I didn't have much knowledge of DN42. I finished the registration this month and would like to share my experience. Building Authoritative DNS An authoritative DNS is responsible for a domain's records...."><link rel="me" href="https://mastodon.social/@lantian"></head> <body data-astro-cid-porej7z2=""> <div id="bg" data-astro-cid-j6vmxtef=""></div>   <div id="container" class="container" data-astro-cid-porej7z2=""> <nav class="lantian navbar navbar-expand-lg" data-astro-cid-wu5dj4rx=""> <div class="container-fluid" data-astro-cid-wu5dj4rx=""> <a class="navbar-brand" href="/en/" data-astro-cid-wu5dj4rx="">Lan Tian @ Blog</a> <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#lantian-navbar" aria-controls="lantian-navbar" aria-expanded="false" aria-label="Toggle navigation" data-astro-cid-wu5dj4rx=""> <span class="navbar-toggler-icon" data-astro-cid-wu5dj4rx=""></span> </button> <div class="collapse navbar-collapse" id="lantian-navbar" data-astro-cid-wu5dj4rx=""> <ul class="navbar-nav" data-astro-cid-wu5dj4rx=""> <li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/en/page/archive/index.html" data-astro-cid-wu5dj4rx=""> Posts </a> </li><li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/en/page/himawari/index.html" data-astro-cid-wu5dj4rx=""> Himawari </a> </li><li class="nav-item d-none d-lg-block" data-astro-cid-wu5dj4rx=""> <a class="nav-link" href="/en/page/dn42/index.html" data-astro-cid-wu5dj4rx=""> DN42 </a> </li> <li class="nav-item dropdown d-block d-lg-none" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="pages-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-file" data-astro-cid-wu5dj4rx=""></i> Page  <span class="caret" data-astro-cid-wu5dj4rx=""></span> </a> <ul class="dropdown-menu" aria-labelledby="pages-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/en/page/archive/index.html" data-astro-cid-wu5dj4rx=""> Posts </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/en/page/himawari/index.html" data-astro-cid-wu5dj4rx=""> Himawari </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/en/page/dn42/index.html" data-astro-cid-wu5dj4rx=""> DN42 </a> </li> </ul> </li> </ul> <ul class="navbar-nav ms-auto" data-astro-cid-wu5dj4rx=""> <li class="nav-item dropdown" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="languages-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-language" data-astro-cid-wu5dj4rx=""></i> Language <span class="caret" data-astro-cid-wu5dj4rx=""></span> </a> <ul class="dropdown-menu" aria-labelledby="languages-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item" href="/article/modify-website/register-own-domain-in-dn42.lantian/" data-astro-cid-wu5dj4rx=""> <span class="flag-icon flag-icon-cn" data-astro-cid-wu5dj4rx=""></span> Chinese Simplified / 简体中文 </a> </li><li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item active" href="/en/article/modify-website/register-own-domain-in-dn42.lantian/" data-astro-cid-wu5dj4rx=""> <span class="flag-icon flag-icon-us" data-astro-cid-wu5dj4rx=""></span> English </a> </li> <li data-astro-cid-wu5dj4rx=""><hr class="dropdown-divider" data-astro-cid-wu5dj4rx=""></li> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item disabled" href="#" data-astro-cid-wu5dj4rx="">Not all pages have translations.</a> </li> <li data-astro-cid-wu5dj4rx=""> <a class="dropdown-item disabled" href="#" data-astro-cid-wu5dj4rx="">You may see 404 - this is normal.</a> </li> </ul> </li> <li class="nav-item dropdown" data-astro-cid-wu5dj4rx=""> <a href="#" class="nav-link dropdown-toggle" id="color-scheme-dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-astro-cid-wu5dj4rx=""> <i class="fas fa-fw fa-adjust" data-astro-cid-wu5dj4rx=""></i> Night Mode </a> <ul class="dropdown-menu" aria-labelledby="color-scheme-dropdown" data-astro-cid-wu5dj4rx=""> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-auto" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-adjust" data-astro-cid-wu5dj4rx=""></i> Auto </a> </li> <li data-astro-cid-wu5dj4rx=""><hr class="dropdown-divider" data-astro-cid-wu5dj4rx=""></li> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-light" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-sun" data-astro-cid-wu5dj4rx=""></i> Light</a> </li> <li data-astro-cid-wu5dj4rx=""> <a id="color-scheme-dark" class="dropdown-item" href="#" data-astro-cid-wu5dj4rx=""><i class="fas fa-fw fa-moon" data-astro-cid-wu5dj4rx=""></i> Dark</a> </li> </ul> </li> </ul> </div> </div> </nav> <script type="module">const m="user-color-scheme",s="data-user-color-scheme",u=(e,t)=>{try{localStorage.setItem(e,t)}catch{}},i=e=>{try{return localStorage.getItem(e)}catch{return null}},c=e=>{const t={dark:!0,light:!0,auto:!0},o=e===null||!Object.keys(t).includes(e)?"auto":e;u(m,o);for(const l in t){const n=document.getElementById("color-scheme-"+l);n&&(l==o?n.classList.add("active"):n.classList.remove("active"))}o!="auto"?document.documentElement.setAttribute(s,o):document.documentElement.removeAttribute(s)};c(i(m));const r=document.getElementById("color-scheme-auto");r&&r.addEventListener("click",()=>c("auto"));const a=document.getElementById("color-scheme-light");a&&a.addEventListener("click",()=>c("light"));const d=document.getElementById("color-scheme-dark");d&&d.addEventListener("click",()=>c("dark"));</script>  <div class="d-flex" data-astro-cid-porej7z2=""> <div id="content" data-astro-cid-porej7z2="">  <article> <div class="d-flex"> <div class="post-info-wrap" data-astro-cid-dckccua4=""> <div class="post-info" data-astro-cid-dckccua4=""> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-clock"></span> <br> <small>04-26</small> </p> <div class="post-meta-value"> Published on<span class="badge badge-tag" data-astro-cid-dckccua4=""> 2018-04-26 21:54 </span>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-file-alt"></span> <br> <small>Website and Servers</small> </p> <div class="post-meta-value"> Category <a class="badge badge-tag" href="/en/category/modify-website" data-astro-cid-dckccua4=""> Website and Servers </a>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-tag"></span> <br> <small>2 tags</small> </p> <div class="post-meta-value"> Tags  <a class="badge badge-tag" href="/en/tag/DN42" data-astro-cid-dckccua4=""> DN42 </a>  <a class="badge badge-tag" href="/en/tag/DNS" data-astro-cid-dckccua4=""> DNS </a>  </div> </div> </div> <div class="post-meta-wrap"> <div class="post-meta"> <p> <span class="fas fa-list"></span> <br> <small>ToC</small> </p> <div class="post-meta-value">  <ol data-astro-cid-nj3qel45=""> <li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#building-authoritative-dns" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Building Authoritative DNS</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#setting-up-dns-mysql-masterslave-sync" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Setting up DNS: MySQL Master/Slave Sync</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#setting-up-dns-configuring-powerdns" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Setting up DNS: Configuring PowerDNS</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#setting-up-dns-installing-poweradmin" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Setting up DNS: Installing PowerAdmin</span> </a> </li><li class="toc-item toc-level-2" data-astro-cid-nj3qel45=""> <a class="toc-link" href="#register-domain-at-dn42" data-astro-cid-nj3qel45=""> <span class="toc-text" data-astro-cid-nj3qel45="">Register Domain at DN42</span> </a> </li> </ol>   </div> </div> </div> </div>  </div>  <div class="post-wrap"> <div class="post-image-wrap"> <picture> <source srcset="/usr/uploads/2018/04/2335363675.png.thumb.png.webp" type="image/webp"> <source srcset="/usr/uploads/2018/04/2335363675.png.thumb.png.avif" type="image/avif"> <source srcset="/usr/uploads/2018/04/2335363675.png.thumb.png.jxl" type="image/jxl"> <img src="/usr/uploads/2018/04/2335363675.png.thumb.png" alt="Illustration for Registering Domain in DN42" width="200" height="150"> </picture> </div> <h1 class="post-title"> <a href="/en/article/modify-website/register-own-domain-in-dn42.lantian/" rel="bookmark" title="Registering Domain in DN42">Registering Domain in DN42</a> </h1> <div class="post-text">   <p>DN42, aka Decentralized Network 42, is a large VPN network. Unlike traditional
VPNs, DN42 uses a lot of technology involved in Internet backbones (such as BGP)
and is a great simulation of a realistic network environment.</p>
<p><a href="/en/article/modify-website/join-dn42-experimental-network.lantian">In a previous post</a>, I joined DN42 and connected most of my
VPSes to it. (The ones left are OpenVZ VPSes without Tun/Tap support.) I knew
from the beginning that DN42 has its own domain name system. For example, DN42's
wiki (<a href="https://wiki.dn42.us/Home" rel="noopener noreferrer" target="_blank">https://wiki.dn42.us/Home</a>) can be accessed as
<a href="https://internal.dn42" rel="noopener noreferrer" target="_blank">https://internal.dn42</a> in DN42. I didn't register a domain back then since I
didn't have time, and I didn't have much knowledge of DN42. I finished the
registration this month and would like to share my experience.</p>
<h2 id="building-authoritative-dns">Building Authoritative DNS</h2>
<p>An authoritative DNS is responsible for a domain's records. For example, the
domain for this blog, <code>lantian.pub</code>, has authoritative servers
<code>lv3ns[1-4].ffdns.net</code> from CloudXNS. While registering domains on the Internet,
we can use existing free DNS services, such as Cloudflare or CloudXNS. But in
DN42, although there were people providing such services, communication over IRC
is usually required. I found it not worth the hassle and decided to self-host
one.</p>
<p>Bind or PowerDNS is usually used when setting up an authoritative DNS server on
Linux. Bind stores DNS records as files, which are a bit hard to manage when
synchronization across servers is needed. For PowerDNS though, in addition to
files, the records can also be stored in a database like MySQL. By the way,
PowerDNS also provides its own synchronization mechanisms.</p>
<p>Since I never succeeded in setting up PowerDNS's native sync, and I haven't
figured out why, I simply set up a MySQL source/replica replication.</p>
<blockquote>
<p>The server serving "standard" data is called "Primary DNS server / MySQL
replication source", and other servers synchronizing from it are called
"Secondary DNS server / MySQL replica".</p>
</blockquote>
<h2 id="setting-up-dns-mysql-masterslave-sync">Setting up DNS: MySQL Master/Slave Sync</h2>
<p>First, install a MySQL in each server, and add these lines to <code>my.cnf</code>:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Server IDs, can be assigned to anything, but must be unique</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">server-id</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">=</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">1</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># Server names, will be shown in phpMyAdmin's sync status page</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">report-host</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">=</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">Master</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000"># MySQL binary log files, core files for replication</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">log_bin</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">=</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">mysql-bin</span></span>
<span class="line"><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080">log_error</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">=</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">mysql-bin.err</span></span></code></pre>
<p>Then login to the source MySQL server with phpMyAdmin, and set the server to
source (master) on the "Replication" page, and create a user for replication
(with permissions of <code>REPLICATION SLAVE</code> and <code>REPLICATION CLIENT</code>).</p>
<p>When you've finished the setup, you should see a similar status as:</p>
<p><picture><source srcset="/usr/uploads/2018/04/1826994756.png.webp" type="image/webp"><source srcset="/usr/uploads/2018/04/1826994756.png.avif" type="image/avif"><source srcset="/usr/uploads/2018/04/1826994756.png.jxl" type="image/jxl"><img src="/usr/uploads/2018/04/1826994756.png" alt="Source Server State"></picture></p>
<p>The "File" is the filename for the MySQL binary log, and "Position" is the
current line position. Record these two values.</p>
<p>Then, shut down MySQL on all servers. Use <code>rsync</code> or similar tools to copy the
database to replica servers, replacing the data directories. Then restart all
MySQL services. If you don't have much database writes, like for a personal
blog, you may try to do this without shutting down the source server, but keep
in mind that in this case, the copied data may be corrupted.</p>
<p>Then use phpMyAdmin to log on to replica MySQL servers. Since I met a strange
problem while setting up a replica with its wizards, I'm executing an SQL
instead:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">change </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">master</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> to</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> master_host=</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">'[Source Server IP]'</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">master_user=</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">'[Replication Username]'</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">master_password=</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">'[Replication Password]'</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">master_log_file=</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">'[Binary Log Filename]'</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">master_log_pos=[Binary Log Position];</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">start</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> slave;</span></span></code></pre>
<p>Then go to the "Replication" page, click "See slave status table", and confirm
that <code>Slave_IO_Running</code> and <code>Slave_SQL_Running</code> are both <code>Yes</code>. Now the
replication is up and running.</p>
<p><picture><source srcset="/usr/uploads/2018/04/3187246767.png.webp" type="image/webp"><source srcset="/usr/uploads/2018/04/3187246767.png.avif" type="image/avif"><source srcset="/usr/uploads/2018/04/3187246767.png.jxl" type="image/jxl"><img src="/usr/uploads/2018/04/3187246767.png" alt="Replication Good Status"></picture></p>
<h2 id="setting-up-dns-configuring-powerdns">Setting up DNS: Configuring PowerDNS</h2>
<p>After done with the database, we can set up PowerDNS. First, create a user and
database in MySQL for PowerDNS.</p>
<p>Then, install PowerDNS. Since I'm a Docker user, I simply downloaded and started
a container with <code>docker-compose</code>:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#800000">powerdns</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">:</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#800000">  image</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF">psitrax/powerdns</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#800000">  container_name</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF">powerdns</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#800000">  restart</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF">always</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#800000">  entrypoint</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">: </span><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF">'/entrypoint.sh --cache-ttl=120 --master=yes --slave=yes'</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#800000">  environment</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">:</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">    - </span><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF">MYSQL_HOST=[Database IP]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">    - </span><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF">MYSQL_USER=[Database Username]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">    - </span><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF">MYSQL_PASS=[Database Password]</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">    - </span><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF">MYSQL_DB=[Database Name]</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#800000">  ports</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">:</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">    - </span><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF">'[DN42 IP]:53:53'</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">    - </span><span style="--shiki-dark:#CE9178;--shiki-light:#0000FF">'[DN42 IP]:53:53/udp'</span></span></code></pre>
<p>Here PowerDNS may fail to start, telling you that some columns are too long when
creating the <code>comments</code> table. This is because of a configuration change with
MySQL, causing a behavior change. These columns may be up to 64000 bytes long,
which won't fit in the data table.</p>
<p>Instead of changing the database config, we can simply reduce the length from
64000 to 16000, for example, and manually create the tables:</p>
<blockquote>
<p>This schema may be out of date for newer PowerDNS. See
<a href="https://doc.powerdns.com/authoritative/backends/generic-mysql.html" rel="noopener noreferrer" target="_blank">https://doc.powerdns.com/authoritative/backends/generic-mysql.html</a>
for the latest schema, and change length accordingly.</p>
</blockquote>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> TABLE</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> domains</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  id                    </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  name</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">                  VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">255</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  master</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">                VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">128</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  last_check            </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  type</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">                  VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">6</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  notified_serial       </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  account               </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">40</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  PRIMARY KEY</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (id)</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) Engine=InnoDB;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> UNIQUE INDEX</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> name_index</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> ON</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> domains(</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">name</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> TABLE</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> records</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  id                    </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  domain_id             </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  name</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">                  VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">255</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  type</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">                  VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">10</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  content               </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">16000</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  ttl                   </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  prio                  </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  change_date           </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  disabled</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">              TINYINT</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">1</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">DEFAULT</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 0</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  ordername             </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">255</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">BINARY</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> DEFAULT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  auth                  </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">TINYINT</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">1</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">DEFAULT</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 1</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  PRIMARY KEY</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (id)</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) Engine=InnoDB;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> INDEX</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> nametype_index</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> ON</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> records(</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">name</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">type</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">);</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> INDEX</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> domain_id</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> ON</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> records(domain_id);</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> INDEX</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> recordorder</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> ON</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> records (domain_id, ordername);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> TABLE</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> supermasters</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  ip                    </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">64</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  nameserver            </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">255</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  account               </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">40</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  PRIMARY KEY</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (ip, nameserver)</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) Engine=InnoDB;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> TABLE</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> comments</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  id                    </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  domain_id             </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  name</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">                  VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">255</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  type</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">                  VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">10</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  modified_at           </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  account               </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">40</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  comment               </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">16000</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  PRIMARY KEY</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (id)</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) Engine=InnoDB;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> INDEX</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> comments_domain_id_idx</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> ON</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> comments (domain_id);</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> INDEX</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> comments_name_type_idx</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> ON</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> comments (</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">name</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">, </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">type</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">);</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> INDEX</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> comments_order_idx</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> ON</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> comments (domain_id, modified_at);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> TABLE</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> domainmetadata</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  id                    </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  domain_id             </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  kind                  </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">32</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">),</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  content               </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">TEXT</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  PRIMARY KEY</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (id)</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) Engine=InnoDB;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> INDEX</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> domainmetadata_idx</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> ON</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> domainmetadata (domain_id, kind);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> TABLE</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> cryptokeys</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  id                    </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  domain_id             </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  flags                 </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> NOT NULL</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  active                BOOL,</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  content               </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">TEXT</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  PRIMARY KEY</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(id)</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) Engine=InnoDB;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> INDEX</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> domainidindex</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> ON</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> cryptokeys(domain_id);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> TABLE</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> tsigkeys</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">  id                    </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">INT</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  name</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">                  VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">255</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">),</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  algorithm</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">             VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">50</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">),</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  secret</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">                VARCHAR</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">(</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658">255</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">),</span></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">  PRIMARY KEY</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> (id)</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">) Engine=InnoDB;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">CREATE</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> UNIQUE INDEX</span><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26"> namealgoindex</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> ON</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> tsigkeys(</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">name</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">, </span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF">algorithm</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000">);</span></span></code></pre>
<p>Now PowerDNS will start successfully, but right now it isn't serving any
records.</p>
<h2 id="setting-up-dns-installing-poweradmin">Setting up DNS: Installing PowerAdmin</h2>
<p>PowerAdmin is a control panel for PowerDNS, which can be obtained from
<a href="https://github.com/poweradmin/poweradmin" rel="noopener noreferrer" target="_blank">https://github.com/poweradmin/poweradmin</a>. Simply follow its installation
wizard.</p>
<p>Log in to the main menu after installation:</p>
<p><picture><source srcset="/usr/uploads/2018/04/3108492334.png.webp" type="image/webp"><source srcset="/usr/uploads/2018/04/3108492334.png.avif" type="image/avif"><source srcset="/usr/uploads/2018/04/3108492334.png.jxl" type="image/jxl"><img src="/usr/uploads/2018/04/3108492334.png" alt="PowerAdmin Main Menu"></picture></p>
<p>Click "Add Master Zone", where you need to add your domains. Enter your domain
in the "Zone Name" box, and submit.</p>
<p>Back to the main menu, click on "List Zones", followed by the edit button to the
left of each domain, to enter this interface. Here I'll take <code>lantian.dn42</code>, my
DN42 domain, for example:</p>
<p><picture><source srcset="/usr/uploads/2018/04/938836545.png.webp" type="image/webp"><source srcset="/usr/uploads/2018/04/938836545.png.avif" type="image/avif"><source srcset="/usr/uploads/2018/04/938836545.png.jxl" type="image/jxl"><img src="/usr/uploads/2018/04/938836545.png" alt="Domain Management UI"></picture></p>
<p>Initially, after installing PowerAdmin, the SOA record will not contain a
similar record as <code>ns1.lantian.dn42</code>, which doesn't fit with DN42's recommended
practices. I set my SOA record to "ns1.lantian.dn42 lantian.lantian.dn42 0 28800
7200 604800 60", and a detailed explanation of each field is:</p>
<ul>
<li><code>ns1.lantian.dn42</code>: Name of the main DNS server, usually the domain name of
the server you're operating on.</li>
<li><code>lantian.lantian.dn42</code>: Mailbox of the DNS server administrator, with <code>@</code> at
symbol replaced with <code>.</code> dot symbol. Here this value implies
<code>lantian@lantian.dn42</code>. This doesn't have to be a real address in DN42.</li>
<li><code>0</code>: Record version ID, used to determine if records are changed if AXFR is
used. Since we use MySQL replication, this is not that important. Set to 0
tells PowerDNS to manage it automatically without manual intervention.</li>
<li><code>28800</code>: Refresh time, the interval for the secondary DNS server to pull from
the primary server with AXFR. Not important here.</li>
<li><code>7200</code>: Retry time, time to wait if a previous AXFR attempt failed. Also not
important here.</li>
<li><code>604800</code>: Expiration time, time for a secondary DNS server to serve records
since the last successful AXFR. After this period of time, the secondary DNS
server will stop serving this zone. Also not important here.</li>
<li><code>60</code>: Minimal TTL for all records. Minimum time to refresh record data.</li>
</ul>
<p>Click on the edit button to the left of SOA record, set the values, and save.</p>
<p>Then we need to set NS records, specifying that your domain will be served by
these DNS servers. I will configure 3 servers, <code>ns[1-3].lantian.dn42</code>. An NS
record is necessary for each of them:</p>
<p><picture><source srcset="/usr/uploads/2018/04/57781084.png.webp" type="image/webp"><source srcset="/usr/uploads/2018/04/57781084.png.avif" type="image/avif"><source srcset="/usr/uploads/2018/04/57781084.png.jxl" type="image/jxl"><img src="/usr/uploads/2018/04/57781084.png" alt="Filling in NS Records"></picture></p>
<p>Submit each one.</p>
<p>Finally, set the A records, to specify that the domain points to a specific
server:</p>
<p><picture><source srcset="/usr/uploads/2018/04/2476632371.png.webp" type="image/webp"><source srcset="/usr/uploads/2018/04/2476632371.png.avif" type="image/avif"><source srcset="/usr/uploads/2018/04/2476632371.png.jxl" type="image/jxl"><img src="/usr/uploads/2018/04/2476632371.png" alt="Filling in A Records"></picture></p>
<p>Now the primary PowerDNS has been set up. With MySQL replication in place, your
configuration has been synced to other servers. Simply install PowerDNS on each
of them.</p>
<p>Finally, <code>dig</code> your own server as a test:</p>
<p><picture><source srcset="/usr/uploads/2018/04/3598285227.png.webp" type="image/webp"><source srcset="/usr/uploads/2018/04/3598285227.png.avif" type="image/avif"><source srcset="/usr/uploads/2018/04/3598285227.png.jxl" type="image/jxl"><img src="/usr/uploads/2018/04/3598285227.png" alt="DIG Test"></picture></p>
<h2 id="register-domain-at-dn42">Register Domain at DN42</h2>
<p>DN42 had an upgrade recently, replacing the old Monotone repository with Git.
First, register an account at <a href="https://git.dn42.us/explore/repos" rel="noopener noreferrer" target="_blank">https://git.dn42.us/explore/repos</a>, Fork
<a href="https://git.dn42.us/dn42/registry" rel="noopener noreferrer" target="_blank">dn42/registry</a>, and Clone it to your local computer.</p>
<p>First, DN42 requires Git Commits to be GPG signed. I'm using GPG Keychain on
Mac. The procedures are: creating a key, uploading pubkey to a public GPG server
such as SKS, and copy the Fingerprint.</p>
<p>Then configure <code>git</code> so it will automatically sign each commit:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">git</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> config</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> --global</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> user.signingKey</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000"> [Your </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">Fingerprint]</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">git</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> config</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> --global</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> commit.gpgSign</span><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF"> true</span></span></code></pre>
<p>Since I'm already a DN42 user and have my own MNT handles, I need to edit
<code>data/mntner/LANTIAN-MNT</code> and add my GPG fingerprint to it:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mntner:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-MNT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">admin-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">tech-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mnt-by:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-MNT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">source</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">auth:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">               pgp-fingerprint</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> 23067C13B6AEBDD7C0BB567327F31700E751EC22</span></span></code></pre>
<p>Then create <code>data/dns/lantian.dn42</code>:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">domain:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             lantian.dn42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">admin-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">tech-c:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-DN42</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">mnt-by:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             LANTIAN-MNT</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">nserver:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            ns1.lantian.dn42</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 172.22.76.186</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">nserver:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            ns1.lantian.dn42</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fdbc:f9dc:67ad::8b:c606:ba01</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">nserver:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            ns2.lantian.dn42</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 172.22.76.185</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">nserver:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            ns2.lantian.dn42</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fdbc:f9dc:67ad::dd:c85a:8a93</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">nserver:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            ns3.lantian.dn42</span><span style="--shiki-dark:#B5CEA8;--shiki-light:#098658"> 172.22.76.187</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">nserver:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">            ns3.lantian.dn42</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515"> fdbc:f9dc:67ad::18:ca0f:741d</span></span>
<span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">source</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             DN42</span></span></code></pre>
<p>(2020-03-22 Update: originally this line was also present:</p>
<pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF" tabindex="0"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26">status:</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515">             CONNECT</span></span></code></pre>
<p>But it was removed in an update in Nov 2018.</p>
<p>I made this update since one user in Telegram Group had problems with this.)</p>
<p>Then <code>git add</code>, <code>git commit</code>, <code>git push</code>, send a Pull Request and wait for
merging, and fix for any possible errors as admins request.</p>
<p><picture><source srcset="/usr/uploads/2018/04/3250696671.png.webp" type="image/webp"><source srcset="/usr/uploads/2018/04/3250696671.png.avif" type="image/avif"><source srcset="/usr/uploads/2018/04/3250696671.png.jxl" type="image/jxl"><img src="/usr/uploads/2018/04/3250696671.png" alt="DN42 Pull Request Record"></picture></p>
<p>Since DN42 uses Anycast DNS, anyone can host a DNS recursive server. With
different people polling updates from the central registry at different
intervals, it may take up to a week for your domain to fully work.</p>
<p><picture><source srcset="/usr/uploads/2018/04/2335363675.png.webp" type="image/webp"><source srcset="/usr/uploads/2018/04/2335363675.png.avif" type="image/avif"><source srcset="/usr/uploads/2018/04/2335363675.png.jxl" type="image/jxl"><img src="/usr/uploads/2018/04/2335363675.png" alt="Domain Activated"></picture></p>
<p>Finally, we've registered a domain in DN42. Now you can set up your website,
mail, IRC, game server, or whatever you want.</p>  </div>  <div class="clearfix" id="post-navi" data-astro-cid-gfbmwgei=""> <div class="float-end text-end" data-astro-cid-gfbmwgei=""> <a href="/en/article/modify-website/got-50kvm-99off-vps.lantian/" title="Snagged a 0.1-Discount VPS from 50KVM" data-astro-cid-gfbmwgei=""> Snagged a 0.1-Discount VPS from 50KVM </a> <br data-astro-cid-gfbmwgei=""> Next post »
</div> <div class="float-start text-start position-absolute" data-astro-cid-gfbmwgei="">
« Previous post <br data-astro-cid-gfbmwgei=""> <a href="/en/article/modify-website/dn42-ip-reverse-record.lantian/" title="Setting Up IP Reverse Lookup in DN42" data-astro-cid-gfbmwgei=""> Setting Up IP Reverse Lookup in DN42 </a> </div> </div>  <div id="waline" data-waline-language="en-US" data-waline-path="/en/article/modify-website/register-own-domain-in-dn42.lantian"></div> <script type="module" src="/assets/WalineComment.astro_astro_type_script_index_0_lang.Dqib3X1E.js"></script>  </div> </div> </article>  </div> <aside class="d-none d-xl-block"> <section class="widget"> <h3>Latest posts</h3> <ul class="list-unstyled"> <li> 07-20  <a href="/en/article/modify-computer/legal-lte-network-at-home-with-open5gs.lantian/">Legal LTE Network at Home with Open5GS</a> </li><li> 06-27  <a href="/en/article/modify-computer/sidestore-without-stosvpn-across-lan.lantian/">Using SideStore without StosVPN across your LAN</a> </li><li> 05-19  <a href="/en/article/modify-computer/nix-logarithmetic-math-library-from-zero.lantian/">Nix Logarithmic Math Library from Ground Zero</a> </li><li> 04-06  <a href="/en/article/modify-computer/legal-lte-network-at-home-for-100-bucks.lantian/">Legal LTE Network at Home for $100</a> </li><li> 02-10  <a href="/en/article/modify-computer/build-custom-android-kernel-with-nix.lantian/">Building Custom Android Kernel with Nix</a> </li><li> 04-20  <a href="/en/article/modify-website/migrate-blog-to-astro-js.lantian/">Migrating My Blog to Astro.js</a> </li><li> 12-16  <a href="/en/article/modify-computer/nixos-low-ram-vps.lantian/">NixOS Series 5: Creating Disk Image for Low RAM VPS</a> </li><li> 09-20  <a href="/en/article/modify-computer/nix-trigonometric-math-library-from-zero.lantian/">Nix Trigonometric Math Library from Ground Zero</a> </li><li> 05-29  <a href="/en/article/random-notes/pipewire-sigkill-fix.lantian/">Preventing Pipewire from being SIGKILLed</a> </li><li> 05-12  <a href="/en/article/modify-website/how-to-kill-the-dn42-network.lantian/">How to Kill the DN42 Network (Updated 2023-05-12)</a> </li><li> 05-08  <a href="/en/article/modify-computer/laptop-muxed-nvidia-passthrough.lantian/">NVIDIA GPU Passthrough on an Optimus MUXed Laptop (Updated 2023-05)</a> </li><li> 04-17  <a href="/en/article/random-notes/fix-china-telecom-roaming-no-4g-on-aosp-rom.lantian/">Fix China Telecom 4G Roaming on AOSP ROM by Changing APN</a> </li><li> 03-26  <a href="/en/article/random-notes/old-hp-workstation-as-all-in-one.lantian/">Notes on Setting Up NAS+Router on Old HP Workstation</a> </li><li> 01-14  <a href="/en/article/modify-computer/nixos-impermanence.lantian/">NixOS Series 4: &quot;Stateless&quot; Operating System</a> </li><li> 06-21  <a href="/en/article/modify-computer/nixos-packaging.lantian/">NixOS Series 3: Software Packaging 101</a> </li> </ul> </section> <section class="widget"> <h3>Latest comments</h3> <ul class="list-unstyled" id="recent-comments">  <li><a href="#">Loading...</a></li>  </ul> </section> <script type="module">const i=window.location.hostname=="localhost"?"https://comments.lantian.pub":window.location.origin;fetch(`${i}/api/comment?type=recent&count=10`).then(t=>{if(t.status!==200)throw new Error(`Server returned bad HTTP status ${t.status}`);return t.json()}).then(t=>{const e=document.getElementById("recent-comments");e&&(e.innerHTML=t.data.map(n=>{const o=n.comment.replace(/(<([^>]+)>)/gi,"");return"<li>"+n.nick+' <a href="'+n.url+'">'+o+"</a></li>"}).join(""))});</script> <section class="widget"> <h3>Others</h3> <ul class="list-unstyled">  <li> <i class="fas fa-fw fa-rss"></i>  <a href="/rss2.xml" target="_blank">RSS Feed</a> |  <a href="/feed.xml" target="_blank">Atom</a> |  <a href="/feed.json" target="_blank">JSON</a> </li> <li> <i class="fas fa-fw fa-globe"></i>  <a href="https://stats.uptimerobot.com/BLK6VsRkR" target="_blank"> Sever Status </a> </li> <li> <i class="fas fa-fw fa-sitemap"></i>  <a href="https://lg.lantian.pub" target="_blank">DN42 Looking Glass</a> </li> <li> <i class="fas fa-fw fa-link"></i>  <a href="gopher://lantian.pub" target="_blank">Access with Gopher protocol</a> </li>  </ul> </section> <section class="widget"> <h3>Links</h3> <ul class="list-unstyled"> <li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://0x7f.cc"> 0x7f Blog 🐑 </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="http://foreverblog.cn"> 10 Year&#39;s Promise (Forever Blog) </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://alanyhq.com"> Alanyhq </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://blog.baoshuo.ren/?utm_source=friends"> Baoshuo&#39;s Blog </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://blog.cas7.moe"> Blog of Moecast </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://jerryxiao.cc"> JerryXiao </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://sangsir.com"> SangSir </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://snli.org"> Shucheng Li </a> </li><li> <i class="fas fa-fw fa-link"></i>  <a target="_blank" href="https://yuetau.net"> YuetAu&#39;s Spot </a> </li> </ul> </section> </aside> </div> <footer class="lantian clearfix" data-astro-cid-w3csb3e3="">  <div id="copyright" class="float-end text-end" data-astro-cid-w3csb3e3=""> <i class="fas fa-copyright" data-astro-cid-w3csb3e3=""></i> 2012-2025 Lan Tian @ Blog<br data-astro-cid-w3csb3e3=""> <small data-astro-cid-w3csb3e3=""> Powered by Astro v5.15.1 @ 2025-10-25 23:46:39 </small> </div> <script type="module">function v(c,o,r){const h=/^localhost$|^127(?:\.[0-9]+){0,2}\.[0-9]+$|^(?:0*:)*?:?0*1$/.test(location.hostname)||location.protocol==="file:";if(!o.trackLocalhost&&h)return console.warn("[Plausible] Ignoring event because website is running locally");try{if(window.localStorage.plausible_ignore==="true")return console.warn('[Plausible] Ignoring event because "plausible_ignore" is set to "true" in localStorage')}catch{}const p={n:c,u:o.url,d:o.domain,r:o.referrer,w:o.deviceWidth,h:o.hashMode?1:0,p:r&&r.props?JSON.stringify(r.props):void 0},s=new XMLHttpRequest;s.open("POST",`${o.apiHost}/api/event`,!0),s.setRequestHeader("Content-Type","text/plain"),s.send(JSON.stringify(p)),s.onreadystatechange=()=>{s.readyState===4&&r&&r.callback&&r.callback()}}function b(c){const o=()=>({hashMode:!1,trackLocalhost:!1,url:location.href,domain:location.hostname,referrer:document.referrer||null,deviceWidth:window.innerWidth,apiHost:"https://plausible.io",...c}),r=(t,n,i)=>{v(t,{...o(),...i},n)},h=(t,n)=>{r("pageview",n,t)};return{trackEvent:r,trackPageview:h,enableAutoPageviews:()=>{const t=()=>h(),n=history.pushState;return n&&(history.pushState=function(i,l,u){n.apply(this,[i,l,u]),t()},addEventListener("popstate",t)),c&&c.hashMode&&addEventListener("hashchange",t),h(),function(){n&&(history.pushState=n,removeEventListener("popstate",t)),c&&c.hashMode&&removeEventListener("hashchange",t)}},enableAutoOutboundTracking:(t=document,n={subtree:!0,childList:!0,attributes:!0,attributeFilter:["href"]})=>{function i(e){r("Outbound Link: Click",{props:{url:this.href}}),typeof process<"u"&&process,setTimeout(()=>{location.href=this.href},150),e.preventDefault()}const l=new Set;function u(e){e instanceof HTMLAnchorElement?e.host!==location.host&&(e.addEventListener("click",i),l.add(e)):"querySelectorAll"in e&&e.querySelectorAll("a").forEach(u)}function f(e){e instanceof HTMLAnchorElement?(e.removeEventListener("click",i),l.delete(e)):"querySelectorAll"in e&&e.querySelectorAll("a").forEach(f)}const d=new MutationObserver(e=>{e.forEach(a=>{a.type==="attributes"?(f(a.target),u(a.target)):a.type==="childList"&&(a.addedNodes.forEach(u),a.removedNodes.forEach(f))})});return t.querySelectorAll("a").forEach(u),d.observe(t,n),function(){l.forEach(a=>{a.removeEventListener("click",i)}),l.clear(),d.disconnect()}}}}const g=b({domain:"lantian.pub",trackLocalhost:!0,apiHost:""});g.trackPageview();</script> </footer>  </div>  </body> </html>